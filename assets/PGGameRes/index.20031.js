window.__require=function t(e,o,n){function i(c,s){if(!o[c]){if(!e[c]){var a=c.split("/");if(a=a[a.length-1],!e[a]){var l="function"==typeof __require&&__require;if(!s&&l)return l(a,!0);if(r)return r(a,!0);throw new Error("Cannot find module '"+c+"'")}c=a}var u=o[c]={exports:{}};e[c][0].call(u.exports,function(t){return i(e[c][1][t]||t)},u,u.exports,t,e,o,n)}return o[c].exports}for(var r="function"==typeof __require&&__require,c=0;c<n.length;c++)i(n[c]);return i}({AThemeColor:[function(t,e,o){"use strict";cc._RF.push(e,"acff4CMoehMf67nllQvUf9g","AThemeColor");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0}),o.AThemeColor=void 0;var c=t("./UIhistory"),s=cc._decorator,a=s.ccclass,l=(s.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.onLoad=function(){this.node.color=c.UIhistory.themeColor},r([a],e)}(cc.Component));o.AThemeColor=l,cc._RF.pop()},{"./UIhistory":"UIhistory"}],AdaptScreen:[function(t,e,o){"use strict";cc._RF.push(e,"9589d1fC/NP5Lpkog6c8I3m","AdaptScreen");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0}),o.AdaptScreen=void 0;var c=t("../../../../../script/framework/log/log"),s=t("../../../../../script/pkg/adapter-v2"),a=cc._decorator,l=a.ccclass,u=a.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.maxWidth=!0,e.maxHeight=!0,e}return i(e,t),e.prototype.onLoad=function(){c.tcLog.log("changeSize:",s.AdapterV2.getInstance().rootCanvasWidth,s.AdapterV2.getInstance().rootCanvasHeight);var t=new cc.Size(0,0);if(t.width=s.AdapterV2.getInstance().rootCanvasWidth,t.height=s.AdapterV2.getInstance().rootCanvasHeight,this.maxHeight)if(t.height>1875){var e=.5*(t.height-1875);this.node.setPosition(0,e<38?e:38),t.height=1875}else this.node.setPosition(0,0);this.maxWidth&&t.width>810&&(t.width=810),this.node.setContentSize(t.width,t.height)},r([u(cc.Boolean)],e.prototype,"maxWidth",void 0),r([u(cc.Boolean)],e.prototype,"maxHeight",void 0),r([l],e)}(cc.Component);o.AdaptScreen=d,cc._RF.pop()},{"../../../../../script/framework/log/log":void 0,"../../../../../script/pkg/adapter-v2":void 0}],BaseView:[function(t,e,o){"use strict";cc._RF.push(e,"5bdc3pd5G9M34rSV3+gMnis","BaseView");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0}),o.BaseView=void 0;var c=t("./CocosUtil"),s=cc._decorator,a=s.ccclass,l=(s.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.m_ui={},e.l_ui={},e}return i(e,t),e.prototype.onLoad=function(){c.default.traverseNodes(this.node,this.m_ui),c.default.traverseLabels(this.node,this.l_ui)},r([a],e)}(cc.Component));o.BaseView=l,cc._RF.pop()},{"./CocosUtil":"CocosUtil"}],BlockComp:[function(t,e,o){"use strict";cc._RF.push(e,"bdaaflcExlNW7BQ/eMNsGaU","BlockComp");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0}),o.BlockComp=void 0;var c=cc._decorator,s=c.ccclass,a=(c.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.closeWhenClick=!0,e}return i(e,t),e.prototype.onEnable=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(cc.Node.EventType.TOUCH_END,this.doBlock,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.doBlock,this),this.node.on(cc.Node.EventType.MOUSE_DOWN,this.doBlock,this),this.node.on(cc.Node.EventType.MOUSE_MOVE,this.doBlock,this),this.node.on(cc.Node.EventType.MOUSE_UP,this.doBlock,this),this.node.on(cc.Node.EventType.MOUSE_ENTER,this.doBlock,this),this.node.on(cc.Node.EventType.MOUSE_LEAVE,this.doBlock,this),this.node.on(cc.Node.EventType.MOUSE_WHEEL,this.doBlock,this)},e.prototype.onDisable=function(){this.node.off(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.off(cc.Node.EventType.TOUCH_END,this.doBlock,this),this.node.off(cc.Node.EventType.TOUCH_MOVE,this.doBlock,this),this.node.off(cc.Node.EventType.MOUSE_DOWN,this.doBlock,this),this.node.off(cc.Node.EventType.MOUSE_MOVE,this.doBlock,this),this.node.off(cc.Node.EventType.MOUSE_UP,this.doBlock,this),this.node.off(cc.Node.EventType.MOUSE_ENTER,this.doBlock,this),this.node.off(cc.Node.EventType.MOUSE_LEAVE,this.doBlock,this),this.node.off(cc.Node.EventType.MOUSE_WHEEL,this.doBlock,this)},e.prototype.onTouchStart=function(t){t.propagationStopped=!0,this.closeWhenClick&&this.node.destroy()},e.prototype.doBlock=function(t){t.propagationStopped=!0},r([s],e)}(cc.Component));o.BlockComp=a,cc._RF.pop()},{}],CHandler:[function(t,e,o){"use strict";cc._RF.push(e,"83f5crfkXREMpmCWyMtOuMT","CHandler"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function t(t,e){for(var o=[],n=2;n<arguments.length;n++)o[n-2]=arguments[n];this._autoClean=!1,this._neverFirst=!1,this._fn=e,this._thisObj=t,this._args=o}return t.prototype.neverFirst=function(){return this._neverFirst=!0,this},t.prototype.invoke=function(){var t;return t=this._args&&this._args.length>0?this._fn.apply(this._thisObj,this._args):this._fn.call(this._thisObj),this._autoClean&&this.clear(),t},t.prototype.invodeWithFirst=function(t){return this._neverFirst?this.invoke():(e=this._args&&this._args.length>0?this._fn.apply(this._thisObj,[t].concat(this._args)):this._fn.call(this._thisObj,t),this._autoClean&&this.clear(),e);var e},t.prototype.invokeWithExtra=function(){for(var t,e=[],o=0;o<arguments.length;o++)e[o]=arguments[o];return t=this._args&&this._args.length>0?e?this._fn.apply(this._thisObj,this._args.concat(e)):this._fn.apply(this._thisObj,this._args):e?this._fn.apply(this._thisObj,e):this._fn.call(this._thisObj),this._autoClean&&this.clear(),t},t.prototype.clear=function(){this._fn=null,this._thisObj=null,this._args&&(this._args.length=0),this._args=null},t.prototype.setAutoClean=function(t){this._autoClean=t},t.prototype.getTarget=function(){return this._thisObj},t}();o.default=n,cc._RF.pop()},{}],CocosUtil:[function(t,e,o){"use strict";cc._RF.push(e,"e0741XBFQxLVrvc/Q+d8b63","CocosUtil");var n=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var i=t("../../../../../script/framework/log/log"),r=t("./BlockComp"),c=t("./Globals"),s=cc._decorator,a=s.ccclass,l=(s.property,function(){function t(){}var e;return e=t,t.initComponent=function(t,e){return t.getComponent(e)?t.getComponent(e):t.addComponent(e)},t.wait=function(t){return new Promise(function(e){setTimeout(function(){e(null)},1e3*t)})},t.traverseNodes=function(t,o){if(t&&t.children)for(var n=t.children,i=0;i<n.length;i++)o[n[i].name]=n[i],e.traverseNodes(n[i],o)},t.traverseLabels=function(t,e){if(t){var o=t.getComponentsInChildren(cc.Label);for(var n in o)e[o[n].node.name]=o[n]}},t.findNode=function(t,o){if(!t)return null;if(t.name==o)return t;for(var n=t.children,i=n.length-1;i>=0;i--){var r=e.findNode(n[i],o);if(r)return r}return null},t.setModal=function(t,o){t.getComponent(cc.BlockInputEvents)||(e.initComponent(t,r.BlockComp).closeWhenClick=o)},t.mark_click=function(){this.tmr_click=0},t.addClickEvent=function(t,e,o,n,r,s){if(void 0===r&&(r=1.02),void 0===s&&(s=!1),c.isNil(t))console.warn("fail addClickEvent as target is nil");else{var a=0,l=t.getComponent(cc.Button);l?l.transition==cc.Button.Transition.SCALE&&(l.zoomScale=r,l.duration=.06):((l=t.addComponent(cc.Button)).transition=cc.Button.Transition.SCALE,l.duration=.06,l.zoomScale=r);var u=function(){!s&&a>0?i.tcLog.log("\u9891\u7e41\u70b9\u51fb",a):(setTimeout(function(){a=0},300),l.interactable&&(null!=n?e.call(o,n):e.call(o)))};t.off(cc.Node.EventType.TOUCH_END,u,o),t.on(cc.Node.EventType.TOUCH_END,u,o)}},t.delClickEvent=function(t,e,o){t.off(cc.Node.EventType.TOUCH_END,e,o)},t.convertSpaceAR=function(t,e,o,n){void 0===o&&(o=0),void 0===n&&(n=0);var i=t.convertToWorldSpaceAR(cc.v3(o,n));return e.convertToNodeSpaceAR(i)},t.tmr_click=0,e=n([a],t)}());o.default=l,cc._RF.pop()},{"../../../../../script/framework/log/log":void 0,"./BlockComp":"BlockComp","./Globals":"Globals"}],CommonUtil:[function(t,e,o){"use strict";cc._RF.push(e,"7b307TDxzhNebGvm8J7Aqx1","CommonUtil"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("./Globals");ArrayBuffer.transfer||(ArrayBuffer.transfer=function(t,e){t=Object(t);var o=new ArrayBuffer(e);if(!(t instanceof ArrayBuffer&&o instanceof ArrayBuffer))throw new TypeError("ArrayBuffer.transfer, error: Source and destination must be ArrayBuffer instances");if(!(o.byteLength>=t.byteLength))throw new RangeError("ArrayBuffer.transfer, error: destination has not enough space");return new Uint8Array(o).set(new Uint8Array(t),0),o});var i=function(){function t(){}return t.safeDelete=function(t){return null==t?null:t.delInstance?(t.delInstance(),null):t.do_dtor?(t.do_dtor(),null):t.node?(t.node.destroy(),null):(t.destroy(),null)},t.getClsName=function(t){return t&&t.constructor?t.constructor.name:""},t.getUUID=function(){for(var t=[],e=0;e<36;e++)t[e]="0123456789abcdef".substr(Math.floor(16*Math.random()),1);return t[14]="4",t[19]="0123456789abcdef".substr(3&t[19]|8,1),t[8]=t[13]=t[18]=t[23]="-",t.join("")},t.num00=function(t){return t<10?"0"+t:t.toString()},t.simpleCopy=function(t,e,o){if(null!=e&&null!=t)for(var n in e)e.hasOwnProperty(n)&&(o&&o[n]||(t[n]=e[n]))},t.deepClone=function(t){if(null==t||typeof{}!=typeof t||typeof[]!=typeof t)return t;var e,o=!1;t.length?(e=[],o=!0):(e={},o=!1);for(var n=0,i=Object.keys(t);n<i.length;n++){var r=i[n];if(null==t[r])o?e.push(null):e[r]=null;else{var c="object"==typeof t[r]?this.deepClone(t[r]):t[r];o?e.push(c):e[r]=c}}return e},t.isEqual=function(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(this.isArray(t))return this.isSameArray(e,t);for(var o in t)if(!this.isEqual(t[o],e[o]))return!1;return!1},t.addArray=function(t,e){var o=[];if(t)for(var n in t)o.push(t[n]);if(e)for(var n in e)o.push(e[n]);return o},t.appendArray=function(t,e){if(e)for(var o in e)t.push(e[o])},t.minusArray=function(t,e){if(t&&!(t.length<=0)&&e&&!(e.length<=0))for(var o=0;o<e.length;o++){var n=t.indexOf(e[o]);n>=0&&t.splice(n,1)}},t.addArrayItem=function(t,e,o){if(o&&0!=o)if(o>0)for(var n=0;n<o;n++)t.push(e);else for(var i=t.length;i>=0&&!(t[i]==e&&(t.splice(i,1),++o>=0));i--);},t.isSameArray=function(t,e){if(typeof t!=typeof e)return!1;if(t.length!=e.length)return!1;for(var o in t)if(e.indexOf(t[o])<0)return!1;for(var o in e)if(t.indexOf(e[o])<0)return!1;return!0},t.cloneArray=function(t){var e=[];if(n.isNil(t))return e;for(var o in t)e.push(t[o]);return e},t.isArray=function(t){return!n.isNil(t.length)},t.Uint8Arr2NumArr=function(t){var e=[];if(t)for(var o in t)e.push(t[o]);return e},t.NumArr2Uint8Arr=function(t){if(n.isNil(t)||t.length<=0)return null;for(var e=new ArrayBuffer(t.length),o=new DataView(e),i=0;i<t.length;i++)o.setUint8(i,t[i]);return new Uint8Array(o.buffer)},t}();o.default=i,cc._RF.pop()},{"./Globals":"Globals"}],CompDissItem:[function(t,e,o){"use strict";cc._RF.push(e,"debe4DnFshGn6yUxP3Pq8Hr","CompDissItem");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0}),o.CompDissItem=void 0;var c=t("../script/PgEvent"),s=t("./CocosUtil"),a=cc._decorator,l=a.ccclass,u=(a.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.init=function(t){this.parent=t},e.prototype.start=function(){s.default.addClickEvent(this.node,function(){cc.systemEvent.emit(c.pgGameEvent.ui_show_hisdetail_tip,this.parent,this._info)},this,null,1.01)},e.prototype.setData=function(t){this._info=t},r([l],e)}(cc.Component));o.CompDissItem=u,cc._RF.pop()},{"../script/PgEvent":"PgEvent","./CocosUtil":"CocosUtil"}],CompHisPage:[function(t,e,o){"use strict";cc._RF.push(e,"27f7dxz/oZPJIXRqbiUzYX7","CompHisPage");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c},c=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(i,r){function c(t){try{a(n.next(t))}catch(e){r(e)}}function s(t){try{a(n.throw(t))}catch(e){r(e)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(c,s)}a((n=n.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var o,n,i,r,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(t){return function(e){return a([t,e])}}function a(r){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return c.label++,{value:r[1],done:!1};case 5:c.label++,n=r[1],r=[0];continue;case 7:r=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){c=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){c.label=r[1];break}if(6===r[0]&&c.label<i[1]){c.label=i[1],i=r;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(r);break}i[2]&&c.ops.pop(),c.trys.pop();continue}r=e.call(t,c)}catch(s){r=[6,s],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.CompHisPage=void 0;var a=t("../../../../../script/config/cmd"),l=t("../../../../../script/config/config"),u=t("../../../../../script/framework/i18n/i18n"),d=t("../../../../../script/framework/log/log"),h=t("../../../../../script/framework/res/res"),p=t("../../../../../script/pkg/currency"),f=t("./BaseView"),g=t("./CocosUtil"),y=t("./CompDissItem"),v=t("./HisLineAward"),m=t("./UIhistory"),b=cc._decorator,_=b.ccclass,S=b.property,B=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sprites=[],e.select=[[0,1,2],[0,4,3],[0,4,5],[3,4,2],[3,4,5],[3,7,5],[3,7,8],[6,7,5],[6,7,8],[6,10,8]],e.itemSpire={0:0,1:1,2:2,3:3,4:4,51:5,81:6,82:7,9:8},e}return i(e,t),e.prototype.onLoad=function(){g.default.traverseNodes(this.node,this.m_ui),this.m_ui.lb_jyno.color=m.UIhistory.themeColor,this.m_ui.lb_tz.color=m.UIhistory.themeColor,this.m_ui.lb_yl.color=m.UIhistory.themeColor,this.m_ui.lb_ye.color=m.UIhistory.themeColor,this.m_ui.lb_tz.getComponent(cc.Label).string=u.tcI18n.i18nLabel("History.HistoryMainPagePayout")+"("+p.currency.getSymbol()+")",this.m_ui.lb_yl.getComponent(cc.Label).string=u.tcI18n.i18nLabel("History.HistoryRecordTotalWin")+"("+p.currency.getSymbol()+")",this.m_ui.lb_ye.getComponent(cc.Label).string=u.tcI18n.i18nLabel("History.HistoryRecordBalance")+"("+p.currency.getSymbol()+")"},e.prototype.setData=function(t){var e=this;this._data=t;var o={};if(g.default.traverseNodes(this.node,this.m_ui),g.default.traverseLabels(this.node,o),o.lb_order_no.string=t.round_no||"",null!=t.leftTimes&&t.leftTimes>-1&&t.leftTimes<7?o.lb_bet_num.string=p.currency.formatNoSymbol(0):o.lb_bet_num.string=p.currency.formatNoSymbol(t.bet),o.lb_profit_num.string=p.currency.formatNoSymbol(t.player_win_lose),o.lb_balance_num.string=p.currency.formatNoSymbol(t.balance),o.lb_betvalue.string=u.tcI18n.i18nLabel("History.HistoryBetSize")+" "+p.currency.formatWithSymbol(t.bet_size),o.lb_betrate.string=u.tcI18n.i18nLabel("History.HistoryBetLevel")+" "+(t.bet_multiple||"0"),this.ndIsAward.active=!0,this.m_ui.BgFortune.active=!1,this.m_ui.BgNor.active=!0,null!=t.leftTimes&&t.leftTimes>-1&&(this.m_ui.BgFortune.active=!0,this.m_ui.BgNor.active=!1),t.hits&&t.hits.length>0)for(var n=0;n<12;n++)this.itemSetHide(n);else for(n=0;n<12;n++)this.itemSetShow(n);if(t.screen.forEach(function(t,o){e.itemSetData(t,o)}),(!t.hits||0==t.hits.length)&&t.prize-t.bet>0){for(n=0;n<12;n++)this.itemSetHide(n);var i=cc.instantiate(this.prfAwardLine);this.ndAwardLineParent.addChild(i),(r={}).win=t.prize,i.getComponent(v.HisLineAward).setData(r,0),t.screen.forEach(function(t,o){9==t.id&&e.itemSetShow(o)}),this.ndIsAward.active=!1}if(this.m_ui.BgFortune.opacity=this.ndIsAward.active?245:153,this.m_ui.BgNor.opacity=this.ndIsAward.active?245:153,t.hits&&0!=t.hits.length)for(this.ndIsAward.active=!1,this.m_ui.BgFortune.opacity=153,this.m_ui.BgNor.opacity=153,n=0;n<t.hits.length;n++){var r=t.hits[n];i=cc.instantiate(this.prfAwardLine),this.ndAwardLineParent.addChild(i),i.getComponent(y.CompDissItem).init(this.m_ui.kong);var c={dataArr:t,item:i,itemData:r};i.getComponent(y.CompDissItem).setData(c),i.getComponent(v.HisLineAward).setData(r,n);for(var s=[],a=0;a<3;a++){var l=this.select[r.lineId-1][a];s.push(l);var h=this.ndElementParent.getChildByName("UIHisItem_"+l),f=h.getChildByName("icon"),m=h.getChildByName("awardbg"),b=h.getChildByName("lab");f.color=cc.color(255,255,255,255),b.color=cc.color(255,255,255,255),m.active=!0}d.tcLog.log("tmp:",s)}},e.prototype.itemSetHide=function(t){return c(this,void 0,void 0,function(){var e,o,n,i;return s(this,function(){return e=this.ndElementParent.getChildByName("UIHisItem_"+t),o=e.getChildByName("icon"),n=e.getChildByName("awardbg"),i=e.getChildByName("lab"),o.color=cc.color(170,170,170,255),i.color=cc.color(170,170,170,255),n.active=!1,[2]})})},e.prototype.itemSetShow=function(t){return c(this,void 0,void 0,function(){var e,o,n,i;return s(this,function(){return e=this.ndElementParent.getChildByName("UIHisItem_"+t),o=e.getChildByName("icon"),n=e.getChildByName("awardbg"),i=e.getChildByName("lab"),o.color=cc.color(255,255,255,255),i.color=cc.color(255,255,255,255),n.active=!1,9==this._data.screen[t].id&&(o.getComponent(cc.Sprite).spriteFrame=this.sprites[9]),[2]})})},e.prototype.itemSetData=function(t,e){return c(this,void 0,void 0,function(){var o,n,i,r,c,u,d,f,g,y;return s(this,function(s){switch(s.label){case 0:return o=this.ndElementParent.getChildByName("UIHisItem_"+e),n=o.getChildByName("icon"),i=o.getChildByName("lab"),r=this.itemSpire[t.id],n.getComponent(cc.Sprite).spriteFrame=this.sprites[r],9!=t.id?[3,2]:(i.active=!0,c=t.multi,u="font1",(d=c/10)>=10&&d<50?u="font3":d>=50&&(u="font4"),[4,h.tcRes.load(l.gameHelper.getBundleName(a.cmd.SERVER_TYPE_FORTUNE_RABBIT),cc.Font,"artwork/font/"+u)]);case 1:return f=s.sent(),i.getComponent(cc.Label).font=f,g=2,c.toString().length>=2&&(g=0),y=p.currency.format(p.currency.accMul(t.multi,this._data.bet_size*this._data.bet_multiple),!0,!1,g,!0),i.getComponent(cc.Label).string=y,[3,3];case 2:i.active=!1,i.getComponent(cc.Label).string="",s.label=3;case 3:return 9!=e&&11!=e||(o.active=!1),[2]}})})},r([S(cc.Node)],e.prototype,"ndElementParent",void 0),r([S(cc.Node)],e.prototype,"ndIsAward",void 0),r([S(cc.Prefab)],e.prototype,"prfAwardLine",void 0),r([S(cc.SpriteFrame)],e.prototype,"sprites",void 0),r([S(cc.Node)],e.prototype,"ndAwardLineParent",void 0),r([_],e)}(f.BaseView);o.CompHisPage=B,cc._RF.pop()},{"../../../../../script/config/cmd":void 0,"../../../../../script/config/config":void 0,"../../../../../script/framework/i18n/i18n":void 0,"../../../../../script/framework/log/log":void 0,"../../../../../script/framework/res/res":void 0,"../../../../../script/pkg/currency":void 0,"./BaseView":"BaseView","./CocosUtil":"CocosUtil","./CompDissItem":"CompDissItem","./HisLineAward":"HisLineAward","./UIhistory":"UIhistory"}],DateEx:[function(t,e,o){"use strict";cc._RF.push(e,"41ad3TGmUBKBICkI5+0I+pt","DateEx"),Object.defineProperty(o,"__esModule",{value:!0}),o.DateEx=void 0;var n=function(){function t(){}return t.getMonthDay=function(t,e){return new Date(t,e,0).getDate()},t.getMonthsAgo=function(t,e,o){var n=e+1-o,i=t;return n<=0&&(i-=1,n+=12),{year:i,month:n-=1}},t.getZeroTimestamp=function(t,e,o){return new Date(t,e,o).getTime()},t.getZeroTimestampSecond=function(t,e,o){return this.getZeroTimestamp(t,e,o)/1e3},t.getTodayZero=function(){var t=new Date;return this.getZeroTimestamp(t.getFullYear(),t.getMonth(),t.getDate())},t}();o.DateEx=n,cc._RF.pop()},{}],DateUtil:[function(t,e,o){"use strict";cc._RF.push(e,"584bdPZZXJITIvHXsH25b8y","DateUtil"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("./CommonUtil"),i=t("./Globals"),r=t("./StringUtil"),c=function(){function t(){}return t.getSysTime=function(){return(new Date).getTime()},t.getGMTString=function(){var t=new Date,e=(t.getTime(),t.getTimezoneOffset());return"(GMT"+(e<0?"+":"-")+("00"+Math.abs(Math.floor(e/60))).slice(-2)+":"+("00"+Math.abs(e%60)).slice(-2)+")"},t.second2hms=function(t){var e=t,o=0,i=0;return e>60&&(o=Math.floor(e/60),e%=60,o>60&&(i=Math.floor(o/60),o%=60)),i>0?r.default.formatStr("%s:%s:%s",n.default.num00(i),n.default.num00(o),n.default.num00(e)):o>0?r.default.formatStr("%s:%s",n.default.num00(o),n.default.num00(e)):r.default.formatStr("00:%s",n.default.num00(e))},t.formatTime=function(t,e){if(void 0===e&&(e=1),i.isNil(t))return"";var o=new Date(1e3*parseInt(t)),r=o.getFullYear(),c=n.default.num00(o.getMonth()+1),s=n.default.num00(o.getDate()),a=n.default.num00(o.getHours()),l=n.default.num00(o.getMinutes()),u=n.default.num00(o.getSeconds());return e>1?r+"-"+c+"-"+s+"\n"+a+":"+l+":"+u:r+"-"+c+"-"+s+" "+a+":"+l+":"+u},t.formatTime1=function(t,e){if(void 0===e&&(e=1),i.isNil(t))return"";var o=new Date(1e3*parseInt(t)),r=(o.getFullYear(),n.default.num00(o.getMonth()+1)),c=n.default.num00(o.getDate());return n.default.num00(o.getHours())+":"+n.default.num00(o.getMinutes())+":"+n.default.num00(o.getSeconds())+"\n"+r+"/"+c},t.formatTime2=function(t){if(i.isNil(t))return"";var e=new Date(1e3*parseInt(t)),o=e.getFullYear(),r=n.default.num00(e.getMonth()+1),c=n.default.num00(e.getDate()),s=n.default.num00(e.getHours()),a=n.default.num00(e.getMinutes());return n.default.num00(e.getSeconds()),o+"/"+r+"/"+c+" "+s+":"+a},t.formatDay=function(t,e){var o=new Date(t);return o.getFullYear()+e+(o.getMonth()+1)+e+o.getDate()},t.getMonthDays=function(t,e){return new Date(t,e,0).getDate()},t.getTimestamp=function(t,e,o,i,r,c){var s=t+"-"+n.default.num00(e)+"-"+n.default.num00(o)+" "+i+":"+r+":"+c;return new Date(s).getTime()},t.getZeroTimestamp=function(t,e,o){return new Date(t,e,o).getTime()},t.getTodayZeroTimestamp=function(){var t=new Date;return this.getZeroTimestamp(t.getFullYear(),t.getMonth(),t.getDate())},t}();o.default=c,cc._RF.pop()},{"./CommonUtil":"CommonUtil","./Globals":"Globals","./StringUtil":"StringUtil"}],Globals:[function(t,e,o){"use strict";cc._RF.push(e,"a5f20TlK1hPVJUG2UHyS5ry","Globals"),Object.defineProperty(o,"__esModule",{value:!0}),o.isEmpty=o.isNil=o.GlobalData=void 0;var n=function(){function t(){}return t.isInBackgroud=!1,t.timeOfEnterBackground=0,t}();o.GlobalData=n,o.isNil=function(t){return null==t},o.isEmpty=function(t){return null==t||0===t||""===t},cc._RF.pop()},{}],HisLineAward:[function(t,e,o){"use strict";cc._RF.push(e,"f9d4bTu9sdKsp2m4fsmdFsY","HisLineAward");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0}),o.HisLineAward=void 0;var c=t("../../../../../script/framework/i18n/i18n"),s=t("../../../../../script/pkg/currency"),a=cc._decorator,l=a.ccclass,u=a.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.lineImages=[],e}return i(e,t),e.prototype.setData=function(t,e){null!=t.lineId?(this.lb_idx.string=e+1<10?"0"+(e+1):""+(e+1),this.icon_fuhao.spriteFrame=this.lineImages[t.lineId-1],this.lb_x10.string=s.currency.formatWithSymbol(10*t.win)):(this.lb_idx.string=c.tcI18n.i18nLabel("FortuneRabbitHistory.HistoryWinLineItemCashPrize"),this.lb_x10.string=s.currency.formatWithSymbol(t.win)),this.icon_fuhao.node.active=null!=t.lineId,this.dot.active=null!=t.lineId},r([u(cc.Label)],e.prototype,"lb_idx",void 0),r([u(cc.Sprite)],e.prototype,"icon_fuhao",void 0),r([u(cc.Label)],e.prototype,"lb_x10",void 0),r([u(cc.Node)],e.prototype,"dot",void 0),r([u(cc.SpriteFrame)],e.prototype,"lineImages",void 0),r([l],e)}(cc.Component);o.HisLineAward=d,cc._RF.pop()},{"../../../../../script/framework/i18n/i18n":void 0,"../../../../../script/pkg/currency":void 0}],MoneyUtils:[function(t,e,o){"use strict";cc._RF.push(e,"59734FxoaBJNp3rxrNkiFcy","MoneyUtils"),Object.defineProperty(o,"__esModule",{value:!0}),o.MoneyUtil=void 0;var n=function(){function t(){}return t.Format=function(t){var e=t.toFixed(2).toString().split(".");return e[0]=e[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),e.join(".")},t.RunScoreAction=function(e,o,n,i,r,c){var s=this,a={value:n},l=cc.tween(a).to(o,{value:i},{progress:function(o,n,i,r){var c=1-Math.cos(r*Math.PI*.5),a=t.lerp(o,n,c);return e.string=s.Format(a),a},onComplete:function(){e.string=s.Format(i)},easing:r});return null!=c&&l.call(function(){c(e)}),l},t.lerp=function(t,e,o){return t+(e-t)*o},t}();o.MoneyUtil=n,cc._RF.pop()},{}],MoneyUtil:[function(t,e,o){"use strict";cc._RF.push(e,"d39f6qMB2ZGLarWxSflNf4+","MoneyUtil"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function t(){}return t.currencySymbol=function(){return"\uffe5"},t.rmbYuan=function(e){return e/t.BeseGold},t.rmbServer=function(e){return Math.floor(e*t.BeseGold)},t.rmbStr=function(t){var e=this.rmbYuan(t);return this.formatGold(e)},t.formatGold=function(t,e){void 0===e&&(e=2);var o=t<0,n=(t=Math.abs(t)).toString(),i=n.indexOf("."),r=n.substring(0,i),c=n.substring(i+1);if(i<0&&(r=n,c=""),r.length>3){for(var s="",a=0,l=r.length-1;l>=0;l--)s=r[l]+s,++a%3==0&&0!=l&&(s=","+s);r=s}return 0==c.length?c="00":1==c.length?c+="0":c=c.substring(0,2),o?"-"+r+"."+c:r+"."+c},t.formatGoldEx=function(t,e){if(void 0===e&&(e=2),t===Math.ceil(t))return t+".00";var o=t.toString(),n=o.indexOf(".");if(n<0)return o+".00";var i=o.length-1-n;return 1==i?o+"0":2==i?o:o.substring(0,n+e+1)},t.BeseGold=1e4,t}();o.default=n,cc._RF.pop()},{}],NodeEx:[function(t,e,o){"use strict";cc._RF.push(e,"4ab36Jsa/1J8ZB761S/+MCk","NodeEx");var n=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0}),o.NodeEx=void 0;var i=cc._decorator,r=i.ccclass,c=(i.property,function(){function t(){}return t.addClick=function(t,e){t.on(cc.Node.EventType.TOUCH_START,function(){t._pressed=!0},t),t.on(cc.Node.EventType.TOUCH_END,function(o){var n=t._pressed;if(t._pressed=!1,n){var i=o.touch.getStartLocation(),r=o.touch.getLocation();Math.abs(r.x-i.x)+Math.abs(r.y-i.y)<10&&e&&e(o)}},t),t.on(cc.Node.EventType.TOUCH_CANCEL,function(){t._pressed=!1},t)},t.getWorldPosition=function(t,e){var o=t;return e?o.convertToWorldSpaceAR(e):o.convertToWorldSpaceAR(cc.Vec3.ZERO)},t.getLocalPosition=function(t,e){return t.convertToNodeSpaceAR(e)},t.getSize=function(t){return t.getContentSize().clone()},t.setSize=function(t,e,o){var n=t;null!=e?null!=o?n.setContentSize(e,o):n.width=e:n.height=o},t.getAnchorPoint=function(t){return t.getContentSize().clone()},t.setPosition=function(t,e,o){var n=t.position;t.position=null!=e?null!=o?new cc.Vec3(e,o,n.z):new cc.Vec3(e,n.y,n.z):new cc.Vec3(n.x,o,n.z)},t.setOpacity=function(t,e){var o=t,n=o.color;o.color=new cc.Color(n.r,n.g,n.b,e)},t.recursionColor=function(t,e){var o=this;if(0!=t.children.length){var n=null;t.children.forEach(function(t){if(null!=(n=t)){if(n.__default_color)return n.color=e,void o.recursionColor(t,e);if(!n.__first_change){var i=n.color.equals(cc.Color.WHITE);if(n.__default_color=i,i||(n.__original_color=n.color.clone()),n.__first_change=!0,n.__default_color)return n.color=e,void o.recursionColor(t,e)}var r=n.__original_color,c=e.r/255*r.r,s=e.g/255*r.g,a=e.b/255*r.b,l=e.a/255*r.a;n.color=new cc.Color(c,s,a,l)}o.recursionColor(t,e)})}},t.setColor=function(t,e){t&&(t.color=e)},n([r],t)}());o.NodeEx=c,cc._RF.pop()},{}],PgAutorotation:[function(t,e,o){"use strict";cc._RF.push(e,"1d96dHsu2pB/oJMa3Gf9Hqf","PgAutorotation");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../../../../../script/framework/audio/audio"),s=t("../../../../../script/framework/i18n/i18n"),a=t("../../../../../script/framework/log/log"),l=t("../../../../../script/pkg/currency"),u=t("./PgEvent"),d=cc._decorator,h=d.ccclass,p=(d.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.clickNums=[10,30,50,80,1e3],e.labColor={select:cc.color(255,178,103,255),unselect:cc.color(128,128,128,255)},e.showType=!1,e.spinNum=0,e.slider1Mum=0,e.slider2Mum=0,e.slider3Mum=0,e.playedSlider1Sound=!1,e.playedSlider2Sound=!1,e.playedSlider3Sound=!1,e.clickSliderSoundName=c.AudioClipName.CLICKBTN,e.isFirst=!0,e}return i(e,t),e.prototype.onLoad=function(){var t,e=this;this.body=cc.find("body",this.node),this.autoRotaion=cc.find("body/autorotation",this.node),this.layoutAutoRotaion=this.autoRotaion.getComponent(cc.Layout),this.btnOutClose=cc.find("body/btnOutClose",this.node),this.btnClose=cc.find("body/autorotation/top/btnClose",this.node),this.maskBtnStart=cc.find("body/autorotation/down/maskBtnStart",this.node),this.labelBonus=cc.find("body/autorotation/down/nodeBonus/label",this.node).getComponent(cc.Label),this.labelBet=cc.find("body/autorotation/down/nodeBet/label",this.node).getComponent(cc.Label),this.labelWin=cc.find("body/autorotation/down/nodeWin/label",this.node).getComponent(cc.Label),this.clickBtns=cc.find("body/autorotation/mid/one/buttons",this.node),this.startBtn=cc.find("body/autorotation/down/startBtn",this.node),this.startMask=cc.find("body/maskBottom",this.node),this.threeNode=cc.find("body/autorotation/mid/three",this.node),this.fourNode=cc.find("body/autorotation/mid/four",this.node),this.showHideBtn=cc.find("body/autorotation/down/showHideBtn",this.node),this.slider1=cc.find("body/autorotation/mid/tow/btnSlider",this.node).getComponent(cc.Slider),this.slider1Handle=cc.find("body/autorotation/mid/tow/btnSlider/Handle",this.node),this.slider2Handle=cc.find("body/autorotation/mid/three/btnSlider/Handle",this.node),this.slider3Handle=cc.find("body/autorotation/mid/four/btnSlider/Handle",this.node),this.slider2=cc.find("body/autorotation/mid/three/btnSlider",this.node).getComponent(cc.Slider),this.slider3=cc.find("body/autorotation/mid/four/btnSlider",this.node).getComponent(cc.Slider),this.slider1.node.on("slide",this.onSlider1Active,this),this.slider2.node.on("slide",this.slider2Fun,this),this.slider3.node.on("slide",this.slider3Fun,this),this.bgMask=cc.find("mask",this.node),this.loadtip=cc.find("body/maskBottom/loadtip",this.node),this.showType=!1,this.maskBtnStart.active=!0,this.startBtn.active=!1,this.isFirst=!0,this.moveUp(),this.btnClose.on("click",function(){c.uAudio.getInstance().playEffect(e.btnClickSound||c.AudioClipName.CLICKBTN),e.moveDown()}),this.btnOutClose.on("click",function(){c.uAudio.getInstance().playEffect(e.btnClickSound||c.AudioClipName.CLICKBTN),e.moveDown()}),this.updateSliderActive(this.slider1Handle,this.slider1,!1),this.updateSliderActive(this.slider2Handle,this.slider2,!1),this.updateSliderActive(this.slider3Handle,this.slider3,!1),null===(t=this.clickBtns)||void 0===t||t.children.forEach(function(t,o){t.on("click",function(){c.uAudio.getInstance().playEffect(e.btnClickSound||c.AudioClipName.CLICKBTN),a.tcLog.log(o),e.updateAutoCountBtnsTransition(o),e.spinNum=e.clickNums[o],e.onSetColor(o),e.maskBtnStart.active=!1,e.startBtn.active=!0},e)}),this.startBtn.on("click",function(){c.uAudio.getInstance().playEffect(e.btnClickSound||c.AudioClipName.CLICKBTN),e.callBack&&e.callBack(e.spinNum),e.sliderMumChangeCallback&&e.sliderMumChangeCallback({slider1Mum:e.slider1Mum,slider2Mum:e.slider2Mum,slider3Mum:e.slider3Mum}),cc.systemEvent.emit(u.pgGameEvent.startAutoSpin),e.moveDown()}),this.showHideBtn.on("click",function(){var t;if(c.uAudio.getInstance().playEffect(e.btnClickSound||c.AudioClipName.CLICKBTN),!1===e.showType){e.showType=!0,e.threeNode.active=!0,e.fourNode.active=!0;var o=e.threeNode.opacity;e.threeNode.opacity=0,e.fourNode.opacity=0,e.btnOutClose.y=188,e.scheduleOnce(function(){e.threeNode.opacity=o,e.fourNode.opacity=o},.1),e.showHideBtn.getChildByName("des").getComponent(cc.Label).string=s.tcI18n.i18nLabel("v2_pgGame_menu_auto_hide")}else e.showType=!1,e.threeNode.active=!1,e.fourNode.active=!1,e.btnOutClose.y=-210,e.showHideBtn.getChildByName("des").getComponent(cc.Label).string=s.tcI18n.i18nLabel("v2_pgGame_menu_auto_more");null===(t=e.layoutAutoRotaion)||void 0===t||t.updateLayout()}),this.slider1Handle.on("click",function(){e.spinNum>0&&e.onSlider1Active()})},e.prototype.onSlider1Active=function(){this.slider1Fun(this.slider1),this.updateSliderActive(this.slider2Handle,this.slider2,!0),this.updateSliderActive(this.slider3Handle,this.slider3,!0)},e.prototype.updateSliderActive=function(t,e,o){e.node.parent.opacity=o?255:150,e.enabled=o,t.getComponent(cc.Button).interactable=o},e.prototype.updateAutoCountBtnsTransition=function(t){var e;null===(e=this.clickBtns)||void 0===e||e.children.forEach(function(e,o){e.getComponent(cc.Button).transition=o==t?cc.Button.Transition.NONE:cc.Button.Transition.COLOR})},e.prototype.init=function(t,e,o,n,i){a.tcLog.info("autoRotation",t,e,o),this.node.active=!1,this.labelBonus&&(this.labelBonus.string=""+l.currency.formatWithSymbol(t)),this.labelBet&&(this.labelBet.string=""+l.currency.formatWithSymbol(e)),this.labelWin&&(this.labelWin.string=""+l.currency.formatWithSymbol(o)),this.BetCount=e,this.callBack=n,this.btnClickSound=i},e.prototype.setAutoSettingSliderClickSound=function(t){this.clickSliderSoundName=t},e.prototype.setSliderCallback=function(t){this.sliderMumChangeCallback=t},e.prototype.slider1Fun=function(t){t&&(this.maskBtnStart.active=!1,this.startBtn.active=!0,this.playedSlider1Sound||(this.playedSlider1Sound=!0,c.uAudio.getInstance().playEffect(this.clickSliderSoundName)),this.slider1Deal(t))},e.prototype.slider1Deal=function(t){var e=t.node.getComponent(cc.Slider).progress*t.node.width;this.slider1.node.getChildByName("jdt").width=e;var o=this.BetCount*this.spinNum/2;this.slider1Mum=o,this.slider1Mum+=e/700*o,0==this.slider1Mum?this.slider1.node.getChildByName("num").getComponent(cc.Label).string=s.tcI18n.i18nLabel("v2_pgGame_menu_auto_none"):(this.slider1Mum=1e4*Math.round(this.slider1Mum/1e4),this.slider1.node.getChildByName("num").getComponent(cc.Label).string=l.currency.formatWithSymbol(this.slider1Mum))},e.prototype.slider2Fun=function(t){this.playedSlider2Sound||(this.playedSlider2Sound=!0,c.uAudio.getInstance().playEffect(this.clickSliderSoundName)),this.maskBtnStart.active=!1,this.startBtn.active=!0;var e=t.node.getComponent(cc.Slider).progress*t.node.width;this.slider2.node.getChildByName("jdt").width=e,this.slider2Mum=Number((e/700*5e3*this.BetCount).toFixed(2)),0==this.slider2Mum?this.slider2.node.getChildByName("num").getComponent(cc.Label).string=s.tcI18n.i18nLabel("v2_pgGame_menu_auto_none"):(this.slider2Mum=1e4*Math.round(this.slider2Mum/1e4),this.slider2.node.getChildByName("num").getComponent(cc.Label).string=l.currency.formatWithSymbol(this.slider2Mum))},e.prototype.slider3Fun=function(t){this.playedSlider3Sound||(this.playedSlider3Sound=!0,c.uAudio.getInstance().playEffect(this.clickSliderSoundName)),this.maskBtnStart.active=!1,this.startBtn.active=!0;var e=t.node.getComponent(cc.Slider).progress*t.node.width;this.slider3.node.getChildByName("jdt").width=e,this.slider3Mum=Number((e/700*500*this.BetCount).toFixed(2)),0==this.slider3Mum?this.slider3.node.getChildByName("num").getComponent(cc.Label).string=s.tcI18n.i18nLabel("v2_pgGame_menu_auto_none"):(this.slider3Mum=1e4*Math.round(this.slider3Mum/1e4),this.slider3.node.getChildByName("num").getComponent(cc.Label).string=l.currency.formatWithSymbol(this.slider3Mum))},e.prototype.onSetColor=function(t){var e,o,n=this;null===(o=null===(e=this.clickBtns)||void 0===e?void 0:e.children)||void 0===o||o.forEach(function(e,o){e.getChildByName("num").color=o==t?n.labColor.select:n.labColor.unselect})},e.prototype.moveUp=function(){},e.prototype.moveDown=function(){var t=this;cc.view.getVisibleSize(),cc.tween(this.body).to(.24,{position:cc.v3(0,-1264,0)}).call(function(){cc.tween(t.bgMask).to(.24,{opacity:0}).call(function(){window.changeTrophiesIconShow&&window.changeTrophiesIconShow(!0),t.node.destroy(),t.playedSlider1Sound=!1}).start()}).start()},e.prototype.show=function(){var t=this;window.changeTrophiesIconShow&&window.changeTrophiesIconShow(!1),this.node.active=!0,cc.tween(this.bgMask).set({opacity:0}).to(.24,{opacity:128}).start(),this.startMask.active=!0,cc.tween(this.body).set({position:cc.v3(0,-1264,0)}).to(.35,{position:cc.v3(0,-18,0)}).call(function(){cc.tween(t.startMask).set({opacity:255}).to(.5,{opacity:0}).call(function(){t.startMask.active=!1}).start()}).start()},r([h],e)}(cc.Component));o.default=p,cc._RF.pop()},{"../../../../../script/framework/audio/audio":void 0,"../../../../../script/framework/i18n/i18n":void 0,"../../../../../script/framework/log/log":void 0,"../../../../../script/pkg/currency":void 0,"./PgEvent":"PgEvent"}],PgEvent:[function(t,e,o){"use strict";cc._RF.push(e,"a8d76c+/odOSIi22ueqvyjf","PgEvent"),Object.defineProperty(o,"__esModule",{value:!0}),o.pgGameEvent=void 0,function(t){t.updateBonus="pgGameEvent_updateBonus",t.updateCurBet="pgGameEvent_updateCurBet",t.updateCurWinCount="pgGameEvent_updateCurWinCount",t.goback="pgGameEvent_goback",t.clickSpin="pgGameEvent_clickSpin",t.subBet="pgGameEvent_subBet",t.addBet="pgGameEvent_addBet",t.quikStopAutoSpin="pgGameEvent_quikStopAutoSpin",t.betPanel="pgGameEvent_betPanel",t.startAutoSpin="pgGameEvent_startAutoSpin",t.openBetPanel="pgGameEvent_openBetPanel",t.ref_record_filter="ref_record_filter",t.ui_req_loading_complete="ui_req_loading_complete",t.open_history_view="open_history_view",t.close_history_view="close_history_view",t.reset_history_view="reset_history_view",t.ui_show_hisdetail_tip="ui_show_hisdetail_tip",t.ui_close_hisdetail_tip="ui_close_hisdetail_tip",t.open_history_detail="open_history_detail",t.close_history_detail="close_history_detail",t.open_his_selectdate_view="open_his_selectdate_view",t.close_his_selectdate_view="close_his_selectdate_view",t.open_his_dateSelect_view="open_his_dateSelect_view",t.close_his_dateSelect_view="close_his_dateSelect_view",t.keyboardSpaceDownEvent="keyboardSpaceDownEvent"}(o.pgGameEvent||(o.pgGameEvent={})),cc._RF.pop()},{}],PgGameControlPanelLogic:[function(t,e,o){"use strict";cc._RF.push(e,"8afa93kI/ZBVKq9KpQSipbo","PgGameControlPanelLogic");var n=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c},i=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(i,r){function c(t){try{a(n.next(t))}catch(e){r(e)}}function s(t){try{a(n.throw(t))}catch(e){r(e)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(c,s)}a((n=n.apply(t,e||[])).next())})},r=this&&this.__generator||function(t,e){var o,n,i,r,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(t){return function(e){return a([t,e])}}function a(r){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return c.label++,{value:r[1],done:!1};case 5:c.label++,n=r[1],r=[0];continue;case 7:r=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){c=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){c.label=r[1];break}if(6===r[0]&&c.label<i[1]){c.label=i[1],i=r;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(r);break}i[2]&&c.ops.pop(),c.trys.pop();continue}r=e.call(t,c)}catch(s){r=[6,s],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}},c=this&&this.__spreadArrays||function(){for(var t=0,e=0,o=arguments.length;e<o;e++)t+=arguments[e].length;var n=Array(t),i=0;for(e=0;e<o;e++)for(var r=arguments[e],c=0,s=r.length;c<s;c++,i++)n[i]=r[c];return n};Object.defineProperty(o,"__esModule",{value:!0}),o.EBtnSpineStatus=void 0;var s=t("./PgEvent"),a=t("./PgAutorotation"),l=t("./pgGameBetSettingView"),u=t("./PgGameControlPanelView"),d=t("./PgGameWalletView"),h=t("../../../../../script/app/env"),p=t("../../../../../script/framework/log/log"),f=t("../../../../../script/framework/audio/audio"),g=t("../../../../../script/config/config"),y=t("../../../../../script/framework/res/res"),v=t("../../../../../script/framework/i18n/i18n"),m=t("../../../../../script/descriptor/descriptor"),b=t("../../../../../script/event/event"),_=t("../../gameCommon/script/game-loading"),S=t("../../gameCommon/script/game-toast"),B=t("../../gameCommon/script/round-tips "),w=t("../../../../../script/pkg/currency"),C=t("../../../../update-v2/script/api/api-config"),E=t("./PgGameRuleView"),T=t("./PgGameHistoryView"),k=cc._decorator;k.ccclass,k.property,function(t){t[t.ACTIVE_NORMAL=0]="ACTIVE_NORMAL",t[t.ACTIVE_RUN=1]="ACTIVE_RUN",t[t.UNACTIVE_NORMAL=2]="UNACTIVE_NORMAL",t[t.UNACTIVE_RUN=3]="UNACTIVE_RUN",t[t.UNACTIVE_STOP=4]="UNACTIVE_STOP"}(o.EBtnSpineStatus||(o.EBtnSpineStatus={}));var P=function(){function t(t,e){this.autoSpinNum=0,this.curWin=0,this.bQuickModel=!1,this.curGameId=0,this.betTimes=[1,2,3,4,5,6,7,8,9,10],this.betTotals=[],this.curBetIndex=h.env.curGameData.betIndex,this.curBetSizeIndex=0,this.curBetMulIndex=0,this.defaultBetSize=0,this.defaultBetMul=0,this.stopAudioSpinCondition={slider1Mum:0,slider2Mum:0,slider3Mum:0},this.autoModeWinAll=0,this.autoModeWinOnce=0,this.curGameId=t,this.gameLogic=e}return t.prototype.init=function(){this.show(),this.initBetData(),this.createBetSettingView(),cc.systemEvent.on(b.event.BTNSPIN_STATUS_CHANGE,this.changeBtnSpinStatus,this)},t.prototype.show=function(){var t,e;this.viewNode=null===(t=this.gameLogic)||void 0===t?void 0:t.getControlPanelNode(),this.viewNode?(this.view=this.viewNode.addComponent(u.default),null===(e=this.view)||void 0===e||e.updateBtnQuickModeStatus(!0,this.bQuickModel),this.setBonus(h.env.curGameData.balance),this.setBetNum(this.getBetNum()),this.setWinCount(0),this.bindClickEvent()):p.tcLog.error("PgGameControlPanelLogic.show,viewNode = null")},t.prototype.bindClickEvent=function(){var t,e,o,n,i,r,c,s,a,l,u,d,h,p,f,g,y;null===(t=this.view)||void 0===t||t.bindClickBtnBonus(this.onClickBtnBonus.bind(this)),null===(e=this.view)||void 0===e||e.bindClickBtnWin(this.onClickBtnWin.bind(this)),null===(o=this.view)||void 0===o||o.bindClickBtnBet(this.onClickBtnBet.bind(this)),null===(n=this.view)||void 0===n||n.bindClickBtnExit(this.onClickBtnExit.bind(this)),null===(i=this.view)||void 0===i||i.bindClickBtnSound(this.onClickBtnSound.bind(this)),null===(r=this.view)||void 0===r||r.bindClickBtnPaytable(this.onClickBtnPaytable.bind(this)),null===(c=this.view)||void 0===c||c.bindClickBtnRule(this.onClickBtnRule.bind(this)),null===(s=this.view)||void 0===s||s.bindClickBtnHistory(this.onClickBtnHistory.bind(this)),null===(a=this.view)||void 0===a||a.bindClickBtnQickMode(this.onClickBtnQickMode.bind(this)),null===(l=this.view)||void 0===l||l.bindClickBtnSubBet(this.onClickBtnSubBet.bind(this)),null===(u=this.view)||void 0===u||u.bindClickBtnAddBet(this.onClickBtnAddBet.bind(this)),null===(d=this.view)||void 0===d||d.bindClickBtnStartAutoMode(this.onClickBtnStartAutoMode.bind(this)),null===(h=this.view)||void 0===h||h.bindClickBtnSpin(this.onClickBtnSpin.bind(this)),null===(p=this.view)||void 0===p||p.bindClickBtnStopAutoMode(this.onClickBtnStopAutoMode.bind(this)),null===(f=this.view)||void 0===f||f.bindClickBtnOpenSetting(this.onClickBtnOpenSetting.bind(this)),null===(g=this.view)||void 0===g||g.bindClickBtnCloseSetting(this.onClickBtnCloseSetting.bind(this)),null===(y=this.view)||void 0===y||y.bindClickBtnSetbg(this.onClickBtnSetbg.bind(this))},t.prototype.onClickBtnBonus=function(){var t;return i(this,void 0,void 0,function(){var e,o,n;return r(this,function(i){switch(i.label){case 0:if(f.uAudio.getInstance().playEffect(this.gameLogic.getClickBtnSound()),this.payWalletView)return[3,4];i.label=1;case 1:return i.trys.push([1,3,,4]),_.gameLoadingDialog.show({duration:20}),[4,y.tcRes.load("PGGameRes",cc.Prefab,"prefab/pgGameWallet")];case 2:return e=i.sent(),(o=cc.instantiate(e)).setParent(g.config.uiNode.dialog),this.payWalletView=o.addComponent(d.default),_.gameLoadingDialog.close(),[3,4];case 3:return n=i.sent(),p.tcLog.error("PgGameControlPanellogic show pgGameWallet error,"+n),[3,4];case 4:return null===(t=this.payWalletView)||void 0===t||t.show(),this.onClickBtnCloseSetting(),[2]}})})},t.prototype.onClickBtnWin=function(){f.uAudio.getInstance().playEffect(this.gameLogic.getClickBtnSound()),this.onClickBtnHistory(),this.onClickBtnCloseSetting()},t.prototype.createBetSettingView=function(){var t,e;return i(this,void 0,void 0,function(){var o,n,i=this;return r(this,function(r){switch(r.label){case 0:return[4,y.tcRes.load("PGGameRes",cc.Prefab,"prefab/pgGameBetSetting")];case 1:return o=r.sent(),(n=cc.instantiate(o)).setParent(g.config.uiNode.dialog),this.betSettingView=n.addComponent(l.default),this.betSettingView.init(new(Array.bind.apply(Array,c([void 0],this.gameLogic.getBetSizes()))),new(Array.bind.apply(Array,c([void 0],this.betTimes))),new(Array.bind.apply(Array,c([void 0],this.betTotals))),null===(t=this.gameLogic)||void 0===t?void 0:t.getPayTimes(),this.defaultBetSize,this.defaultBetMul,null===(e=this.gameLogic)||void 0===e?void 0:e.getClickBtnCloseSound()),this.betSettingView.setBetCallback(function(t,e,o){i.curBetIndex=t,i.curBetSizeIndex=o,i.curBetMulIndex=e,i.setBetNum(i.getBetNum(),!0),p.tcLog.info("PgGameControlPaneLogic bet:",i.curBetIndex)}),n.active=!1,[2]}})})},t.prototype.onClickBtnBet=function(){return i(this,void 0,void 0,function(){var t=this;return r(this,function(){if(f.uAudio.getInstance().playEffect(this.gameLogic.getClickBtnSound()),this.getSpinNum()>0)return[2];if(!this.betSettingView)try{_.gameLoadingDialog.show({duration:20}),this.createBetSettingView(),_.gameLoadingDialog.close()}catch(e){p.tcLog.error("PgGameControlPanellogic show pgGameWallet error,"+e)}return cc.systemEvent.emit(s.pgGameEvent.openBetPanel),setTimeout(function(){var e;null===(e=t.betSettingView)||void 0===e||e.show(t.getBetNum(),t.curWin,t.defaultBetSize,t.defaultBetMul),t.onClickBtnCloseSetting()},200),[2]})})},t.prototype.onClickBtnExit=function(){f.uAudio.getInstance().playEffect(this.gameLogic.getClickBtnSound()),cc.systemEvent.emit(b.event.sendLeaveGameReq,this.curGameId)},t.prototype.onClickBtnStartAutoMode=function(){return i(this,void 0,void 0,function(){var t,e,o,n,i=this;return r(this,function(r){switch(r.label){case 0:f.uAudio.getInstance().playEffect(this.gameLogic.getClickBtnSound()),r.label=1;case 1:return r.trys.push([1,3,,9]),_.gameLoadingDialog.show({duration:20}),[4,y.tcRes.load("PGGameRes",cc.Prefab,"prefab/pgGameAutorotation")];case 2:return e=r.sent(),(o=cc.instantiate(e)).setParent(g.config.uiNode.dialog),this.PgAutorotationView=o.addComponent(a.default),this.PgAutorotationView.init(h.env.curGameData.balance,this.getBetNum(),this.curWin,this.setSpinNumFun.bind(this),this.gameLogic.getClickBtnCloseSound()),this.PgAutorotationView.setAutoSettingSliderClickSound(this.gameLogic.getAutoSettingSliderClickSound()),this.PgAutorotationView.setSliderCallback(function(t){i.stopAudioSpinCondition=t}),_.gameLoadingDialog.close(),this.PgAutorotationView.show(),[3,9];case 3:if(t=r.sent(),p.tcLog.error("PgGameControlPanellogic show pgGameWallet error,"+t),f.uAudio.getInstance().playEffect(this.gameLogic.getClickBtnSound()),this.PgAutorotationView)return[3,8];r.label=4;case 4:return r.trys.push([4,6,,7]),_.gameLoadingDialog.show({duration:20}),[4,y.tcRes.load("PGGameRes",cc.Prefab,"prefab/pgGameAutorotation")];case 5:return e=r.sent(),(o=cc.instantiate(e)).setParent(g.config.uiNode.dialog),this.PgAutorotationView=o.addComponent(a.default),p.tcLog.log("-----------------------",this.curWin),this.PgAutorotationView.init(h.env.curGameData.balance,this.getBetNum(),this.curWin,this.setSpinNumFun.bind(this),this.gameLogic.getClickBtnCloseSound()),this.PgAutorotationView.setAutoSettingSliderClickSound(this.gameLogic.getAutoSettingSliderClickSound()),this.PgAutorotationView.setSliderCallback(function(t){i.stopAudioSpinCondition=t}),_.gameLoadingDialog.close(),[3,7];case 6:return n=r.sent(),p.tcLog.error("PgGameControlPanellogic show pgGameWallet error,"+n),[3,7];case 7:return[3,8];case 8:return[3,9];case 9:return[2]}})})},t.prototype.onClickBtnSound=function(){var t,e;f.uAudio.getInstance().playEffect(this.gameLogic.getClickBtnSound());var o=g.gameHelper.changeSoundStatus(null===(t=this.gameLogic)||void 0===t?void 0:t.getBgMusic());null===(e=this.view)||void 0===e||e.onClickBtnSound(o)},t.prototype.onClickBtnPaytable=function(){var t,e,o,n;return i(this,void 0,void 0,function(){var i,c,s;return r(this,function(r){switch(r.label){case 0:if(f.uAudio.getInstance().playEffect(this.gameLogic.getClickBtnSound()),this.payTableView)return[3,4];r.label=1;case 1:return r.trys.push([1,3,,4]),_.gameLoadingDialog.show({duration:20}),[4,y.tcRes.load("PGGameRes",cc.Prefab,"prefab/pgGameRuleView")];case 2:return i=r.sent(),(c=cc.instantiate(i)).setParent(g.config.uiNode.dialog),this.payTableView=c.addComponent(E.default),(null===(t=this.gameLogic)||void 0===t?void 0:t.getPayTableNodeURL)?(_.gameLoadingDialog.close(),this.payTableView.addContent(this.curGameId,v.tcI18n.i18nLabel("SlotRulesShared.PaytableTitle"),null===(e=this.gameLogic)||void 0===e?void 0:e.getPayTableNodeURL(),null===(o=this.gameLogic)||void 0===o?void 0:o.getClickBtnSound()),[3,4]):(p.tcLog.error("PgGameContorlPanelLogic Does not implement interface PgGameLogicHandler"),[2]);case 3:return s=r.sent(),p.tcLog.error("PgGameControlPanellogic show pgGameWallet error,"+s),[3,4];case 4:return null===(n=this.payTableView)||void 0===n||n.show(),[2]}})})},t.prototype.onClickBtnRule=function(){var t,e,o,n;return i(this,void 0,void 0,function(){var i,c,s;return r(this,function(r){switch(r.label){case 0:if(f.uAudio.getInstance().playEffect(this.gameLogic.getClickBtnSound()),this.ruleView)return[3,4];r.label=1;case 1:return r.trys.push([1,3,,4]),_.gameLoadingDialog.show({duration:20}),[4,y.tcRes.load("PGGameRes",cc.Prefab,"prefab/pgGameRuleView")];case 2:return i=r.sent(),(c=cc.instantiate(i)).setParent(g.config.uiNode.dialog),this.ruleView=c.addComponent(E.default),(null===(t=this.gameLogic)||void 0===t?void 0:t.getRuleNodeURL)?(_.gameLoadingDialog.close(),this.ruleView.addContent(this.curGameId,v.tcI18n.i18nLabel("GameRule.RulesTitle"),null===(e=this.gameLogic)||void 0===e?void 0:e.getRuleNodeURL(),null===(o=this.gameLogic)||void 0===o?void 0:o.getClickBtnSound()),[3,4]):(p.tcLog.error("PgGameContorlPanelLogic Does not implement interface PgGameLogicHandler"),[2]);case 3:return s=r.sent(),p.tcLog.error("PgGameControlPanellogic show pgGameWallet error,"+s),[3,4];case 4:return null===(n=this.ruleView)||void 0===n||n.show(),[2]}})})},t.prototype.onClickBtnHistory=function(){var t,e,o,n;return i(this,void 0,void 0,function(){var i,c,s;return r(this,function(r){switch(r.label){case 0:if(f.uAudio.getInstance().playEffect(this.gameLogic.getClickBtnSound()),this.historyView)return[3,4];r.label=1;case 1:return r.trys.push([1,3,,4]),_.gameLoadingDialog.show({duration:20}),[4,y.tcRes.load("PGGameRes",cc.Prefab,"prefab/history/UIhistory")];case 2:return i=r.sent(),(c=cc.instantiate(i)).setParent(g.config.uiNode.dialog),this.historyView=c.addComponent(T.default),(null===(t=this.gameLogic)||void 0===t?void 0:t.getHistoryNodeURL)?(_.gameLoadingDialog.close(),this.historyView.addContent(this.curGameId,v.tcI18n.i18nLabel("v2_pgGame_bottom_history"),null===(e=this.gameLogic)||void 0===e?void 0:e.getHistoryNodeURL(),null===(o=this.gameLogic)||void 0===o?void 0:o.getClickBtnSound()),[3,4]):(p.tcLog.error("PgGameContorlPanelLogic Does not implement interface PgGameLogicHandler"),[2]);case 3:return s=r.sent(),p.tcLog.error("PgGameControlPanellogic show onClickBtnHistory error,"+s),[3,4];case 4:return null===(n=this.historyView)||void 0===n||n.show(),[2]}})})},t.prototype.onClickBtnQickMode=function(){var t;f.uAudio.getInstance().playEffect(this.gameLogic.getClickBtnSound()),this.bQuickModel=!this.bQuickModel,null===(t=this.view)||void 0===t||t.updateBtnQuickModeStatus(this.bQuickModel,this.bQuickModel),B.RoundTips.show(this.bQuickModel)},t.prototype.onClickBtnSubBet=function(){var t,e,o;if(null===(t=this.view)||void 0===t||t.shakeCurBetLabel(),0!=this.curBetIndex){for(var n=this.betTotals[this.curBetIndex],i=C.gameData.betTotalsForQuickBtn.length-1;i>=0;--i)if(C.gameData.betTotalsForQuickBtn[i]<n){n=C.gameData.betTotalsForQuickBtn[i];break}this.curBetIndex=this.betTotals.indexOf(n);var r=n==C.gameData.betTotalsForQuickBtn[0],c=n==C.gameData.betTotalsForQuickBtn[C.gameData.betTotalsForQuickBtn.length-1];null===(e=this.view)||void 0===e||e.updateCurBet(this.getBetNum(),r,c,!0),null===(o=this.betSettingView)||void 0===o||o.initScrollViews(this.getBetNum()),this.updateBetIndexs(n)}else S.gameToast.show(v.tcI18n.i18nLabel("SettingMenu.SmallestBet"))},t.prototype.onClickBtnAddBet=function(){var t,e,o;null===(t=this.view)||void 0===t||t.shakeCurBetLabel();var n=this.betTotals[this.curBetIndex];if(n>=C.gameData.betTotalsForQuickBtn[C.gameData.betTotalsForQuickBtn.length-1])S.gameToast.show(v.tcI18n.i18nLabel("SettingMenu.BiggestBet"));else{for(var i=0;i<C.gameData.betTotalsForQuickBtn.length;++i)if(C.gameData.betTotalsForQuickBtn[i]>n){n=C.gameData.betTotalsForQuickBtn[i];break}this.curBetIndex=this.betTotals.indexOf(n);var r=n==C.gameData.betTotalsForQuickBtn[0],c=n==C.gameData.betTotalsForQuickBtn[C.gameData.betTotalsForQuickBtn.length-1];null===(e=this.view)||void 0===e||e.updateCurBet(this.getBetNum(),r,c,!0),null===(o=this.betSettingView)||void 0===o||o.initScrollViews(this.getBetNum()),this.updateBetIndexs(n)}},t.prototype.updateBetIndexs=function(t){this.curBetSizeIndex=0,this.curBetMulIndex=0;for(var e=0;e<C.gameData.betSizes.length;++e)for(var o=0;o<this.betTimes.length;++o){var n=w.currency.accMul(C.gameData.betSizes[e],this.betTimes[o]);if((n=w.currency.accMul(n,C.gameData.betLines))==t){this.curBetSizeIndex=e,this.curBetMulIndex=o;break}}},t.prototype.onClickBtnSpin=function(){var t;null===(t=this.view)||void 0===t||t.playBtnSpinEffect(),cc.systemEvent.emit(s.pgGameEvent.clickSpin)},t.prototype.onClickBtnStopAutoMode=function(){f.uAudio.getInstance().playEffect(this.gameLogic.getClickBtnSound()),this.autoSpinNum=0,this.showBtnSpin(),cc.systemEvent.emit(s.pgGameEvent.quikStopAutoSpin)},t.prototype.onClickBtnOpenSetting=function(){var t;f.uAudio.getInstance().playEffect(this.gameLogic.getClickBtnSound()),null===(t=this.view)||void 0===t||t.updateNodeBtnsStatus(!1)},t.prototype.onClickBtnCloseSetting=function(t){var e;t&&f.uAudio.getInstance().playEffect(this.gameLogic.getClickBtnSound()),null===(e=this.view)||void 0===e||e.updateNodeBtnsStatus(!0)},t.prototype.onClickBtnSetbg=function(){},t.prototype.setSpinNumFun=function(t,e){this.autoSpinNum=t||0,null!=e&&this.checkStopAutoCondition(e)},t.prototype.getSpinNum=function(){return this.autoSpinNum},t.prototype.showBtnSpin=function(){var t;null===(t=this.view)||void 0===t||t.setBtnSpinStatus(!0)},t.prototype.showAutoSpin=function(){var t;null===(t=this.view)||void 0===t||t.setBtnSpinStatus(!1,this.autoSpinNum)},t.prototype.getBetNum=function(){return 0==this.betTotals.length&&this.initBetData(),this.betTotals[this.curBetIndex]||0},t.prototype.getBetSize=function(){return this.gameLogic.getBetSizes()[this.curBetSizeIndex]},t.prototype.getBetLevel=function(){var t;return null!==(t=this.betTimes[this.curBetMulIndex])&&void 0!==t?t:0},t.prototype.setBetNum=function(t,e){var o;void 0===e&&(e=!1);var n=t==C.gameData.betTotalsForQuickBtn[0],i=t==C.gameData.betTotalsForQuickBtn[C.gameData.betTotalsForQuickBtn.length-1];null===(o=this.view)||void 0===o||o.updateCurBet(t,n,i,e)},t.prototype.setBonus=function(t,e,o){var n;void 0===e&&(e=!1),void 0===o&&(o=0),p.tcLog.log("pg setBonus",t),t<0&&p.tcLog.error("value",t),null===(n=this.view)||void 0===n||n.updateBouns(t,e,o)},t.prototype.setWinCount=function(t){var e;this.curWin=t,null===(e=this.view)||void 0===e||e.updateCurWinCount(t)},t.prototype.IsQuickModel=function(){return this.bQuickModel},t.prototype.initBetData=function(){var t,e;if(null===(t=this.gameLogic)||void 0===t?void 0:t.getPayTimes){this.betTotals=[];for(var o=this.gameLogic.getBetSizes(),n=0;n<o.length;++n)for(var i=0;i<this.betTimes.length;++i){var r=w.currency.accMul(o[n],this.betTimes[i]);r=w.currency.accMul(r,(null===(e=this.gameLogic)||void 0===e?void 0:e.getPayTimes())||0),this.betTotals.includes(r)||this.betTotals.push(r)}this.betTotals.sort(function(t,e){return t-e})}else p.tcLog.error("PgGameContorlPanelLogic Does not implement interface PgGameLogicHandler")},t.prototype.setBtnSpineStatus=function(t){var e;null===(e=this.view)||void 0===e||e.setBtnSpineStatus(t)},t.prototype.checkStopAutoCondition=function(t){if(p.tcLog.info("PgGameContorlPanelLogic.checkStopAduio :"+t),!(t<0)){var e=t-this.getBetNum();this.autoModeWinAll+=e,this.autoModeWinOnce=t,(0!==this.stopAudioSpinCondition.slider1Mum&&this.autoModeWinAll/100<-this.stopAudioSpinCondition.slider1Mum||0!==this.stopAudioSpinCondition.slider2Mum&&this.autoModeWinAll/100>=this.stopAudioSpinCondition.slider2Mum||0!==this.stopAudioSpinCondition.slider3Mum&&this.autoModeWinOnce/100>=this.stopAudioSpinCondition.slider3Mum)&&(this.autoSpinNum=0,this.showBtnSpin(),cc.systemEvent.emit(s.pgGameEvent.quikStopAutoSpin))}},t.prototype.setControlBtnsStatus=function(t){var e,o;t?null===(e=this.view)||void 0===e||e.existFeatureStatus(this.autoSpinNum>0):null===(o=this.view)||void 0===o||o.startFeatureStatus(this.autoSpinNum>0)},t.prototype.changeBtnSpinStatus=function(t,e){var o;void 0===e&&(e=!0),null===(o=this.view)||void 0===o||o.setBtnSpineStatus(t,this.bQuickModel,e)},t.prototype.resetAutoData=function(){this.autoModeWinAll=0,this.autoModeWinOnce=0},t.prototype.updateBetData=function(t,e,o){if(p.tcLog.log("createBetSettingView updateBetData betSize:",t,"  betMul:",e,"  totalBet:",o),0==e||0==t){this.curBetSizeIndex=0,this.curBetMulIndex=0;for(var n=0;n<C.gameData.betSizes.length;++n)for(var i=0;i<this.betTimes.length;++i){var r=w.currency.accMul(C.gameData.betSizes[n],this.betTimes[i]);if((r=w.currency.accMul(r,C.gameData.betLines))==o){this.curBetSizeIndex=n,this.curBetMulIndex=i;break}}}else{var c=this.gameLogic.getBetSizes();this.defaultBetSize=t||c[0],this.defaultBetMul=e||this.betTimes[0],this.curBetSizeIndex=c.indexOf(this.defaultBetSize),-1==this.curBetSizeIndex&&(this.curBetSizeIndex=0),this.curBetMulIndex=this.betTimes.indexOf(this.defaultBetMul),-1==this.curBetMulIndex&&(this.curBetMulIndex=0)}this.curBetIndex=this.betTotals.indexOf(o),-1==this.curBetIndex&&(this.curBetIndex=0)},t.prototype.clear=function(){var t,e,o,n,i,r,c;this.gameLogic=void 0,null===(t=this.viewNode)||void 0===t||t.destroy(),this.view=void 0,null===(o=null===(e=this.payWalletView)||void 0===e?void 0:e.node)||void 0===o||o.destroy(),null===(i=null===(n=this.PgAutorotationView)||void 0===n?void 0:n.node)||void 0===i||i.destroy(),this.autoSpinNum=0,this.curWin=0,null===(c=null===(r=this.betSettingView)||void 0===r?void 0:r.node)||void 0===c||c.destroy(),this.bQuickModel=!1,this.curGameId=0},n([m.throttle(300)],t.prototype,"onClickBtnBonus",null),n([m.throttle(300)],t.prototype,"onClickBtnWin",null),n([m.throttle(300)],t.prototype,"onClickBtnBet",null),n([m.throttle(300)],t.prototype,"onClickBtnStartAutoMode",null),n([m.throttle(300)],t.prototype,"onClickBtnPaytable",null),n([m.throttle(300)],t.prototype,"onClickBtnRule",null),n([m.throttle(300)],t.prototype,"onClickBtnHistory",null),n([m.throttle(300)],t.prototype,"onClickBtnStopAutoMode",null),n([m.throttle(300)],t.prototype,"onClickBtnOpenSetting",null),n([m.throttle(300)],t.prototype,"onClickBtnCloseSetting",null),n([m.throttle(300)],t.prototype,"onClickBtnSetbg",null),t}();o.default=P,cc._RF.pop()},{"../../../../../script/app/env":void 0,"../../../../../script/config/config":void 0,"../../../../../script/descriptor/descriptor":void 0,"../../../../../script/event/event":void 0,"../../../../../script/framework/audio/audio":void 0,"../../../../../script/framework/i18n/i18n":void 0,"../../../../../script/framework/log/log":void 0,"../../../../../script/framework/res/res":void 0,"../../../../../script/pkg/currency":void 0,"../../../../update-v2/script/api/api-config":void 0,"../../gameCommon/script/game-loading":void 0,"../../gameCommon/script/game-toast":void 0,"../../gameCommon/script/round-tips ":void 0,"./PgAutorotation":"PgAutorotation","./PgEvent":"PgEvent","./PgGameControlPanelView":"PgGameControlPanelView","./PgGameHistoryView":"PgGameHistoryView","./PgGameRuleView":"PgGameRuleView","./PgGameWalletView":"PgGameWalletView","./pgGameBetSettingView":"pgGameBetSettingView"}],PgGameControlPanelView:[function(t,e,o){"use strict";cc._RF.push(e,"5ea22eF6XFPtL2yx7kD1R1E","PgGameControlPanelView");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c},c=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(i,r){function c(t){try{a(n.next(t))}catch(e){r(e)}}function s(t){try{a(n.throw(t))}catch(e){r(e)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(c,s)}a((n=n.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var o,n,i,r,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(t){return function(e){return a([t,e])}}function a(r){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return c.label++,{value:r[1],done:!1};case 5:c.label++,n=r[1],r=[0];continue;case 7:r=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){c=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){c.label=r[1];break}if(6===r[0]&&c.label<i[1]){c.label=i[1],i=r;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(r);break}i[2]&&c.ops.pop(),c.trys.pop();continue}r=e.call(t,c)}catch(s){r=[6,s],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../../../../ApiTemplate/script/tools/SelectGameMrg"),l=t("../../../../../script/event/event"),u=t("../../../../../script/framework/log/log"),d=t("../../../../../script/framework/res/res"),h=t("../../../../../script/framework/storage/storage"),p=t("../../../../../script/pkg/creator"),f=t("../../../../../script/pkg/currency"),g=t("./PgEvent"),y=t("./PgGameControlPanelLogic"),v=t("./btnSpineRotateAni"),m=cc._decorator,b=m.ccclass,_=(m.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.curBtnSpinStatus=y.EBtnSpineStatus.ACTIVE_NORMAL,e.bMinBet=!1,e.bMaxBet=!1,e.curShowBonus=0,e.curBonus=0,e.addBonusStep=0,e.bAutoEffectPlaying=!1,e.isHovering=!1,e.holdLastBonus=0,e.BounsObj={score:0},e}return i(e,t),e.prototype.onLoad=function(){var t,e,o=this;this.btnBonus=cc.find("nodeBonus",this.node).getComponent(cc.Button),this.btnWin=cc.find("nodeWin",this.node).getComponent(cc.Button),this.btnBet=cc.find("nodeBet",this.node).getComponent(cc.Button),this.labelCurBonus=cc.find("nodeBonus/label",this.node).getComponent(cc.Label),this.labelCurBet=cc.find("nodeBet/label",this.node).getComponent(cc.Label),this.iconBet=cc.find("nodeBet/icon",this.node),this.labelCurWin=cc.find("nodeWin/label",this.node).getComponent(cc.Label),this.nodeSetting=cc.find("nodeSetting",this.node),this.nodeSetbg=cc.find("nodeSetting/bg",this.node),this.nodeSetbg.addComponent(cc.Button),this.nodeSpine=cc.find("nodeSpine",this.node),this.btnExit=cc.find("nodeSetting/btnExit",this.node).getComponent(cc.Button),this.btnSound=cc.find("nodeSetting/btnSound",this.node).getComponent(cc.Button),this.spriteBtnSound=cc.find("nodeSetting/btnSound/Background",this.node).getComponent(cc.Sprite),this.nodeSoundOff=cc.find("nodeSoundClose",this.node),this.btnPaytable=cc.find("nodeSetting/btnPaytable",this.node).getComponent(cc.Button),this.btnRule=cc.find("nodeSetting/btnRule",this.node).getComponent(cc.Button),this.btnHistory=cc.find("nodeSetting/btnHistory",this.node).getComponent(cc.Button),this.btnCloseSetting=cc.find("nodeSetting/btnClose",this.node).getComponent(cc.Button),this.btnOpenSetting=cc.find("nodeSpine/btnOpenSetting",this.node).getComponent(cc.Button),this.btnQickMode=cc.find("nodeSpine/btnQickMode",this.node).getComponent(cc.Button),this.nodeBtnQickLight=cc.find("nodeSpine/btnQickMode/active/active",this.node),this.nodeQuickEffect=cc.find("nodeSpine/btnQickMode/turbo_yellow_rabbit",this.node),this.activeBtnQuicMode=null===(t=this.btnQickMode)||void 0===t?void 0:t.node.getChildByName("active"),this.unActiveBtnQuicMode=null===(e=this.btnQickMode)||void 0===e?void 0:e.node.getChildByName("unActive"),this.btnSubBet=cc.find("nodeSpine/btnSub",this.node).getComponent(cc.Button),this.btnAddBet=cc.find("nodeSpine/btnAdd",this.node).getComponent(cc.Button),this.btnStartAutoMode=cc.find("nodeSpine/btnAuto",this.node).getComponent(cc.Button),this.btnSpin=cc.find("btnSpine",this.node).getComponent(cc.Button),this.btnStopAutoMode=cc.find("btnAutostop",this.node).getComponent(cc.Button),this.nodeBtnStartAutoEffect=cc.find("nodeSpine/btnAuto/Automaticbutton",this.node).getComponent(sp.Skeleton),this.labelAutoCount=cc.find("btnAutostop/label",this.node).getComponent(cc.Label),this.btnSpinRotateAni=cc.find("Background/icon",this.btnSpin.node).getComponent(v.default),this.spriteBtnSpin=cc.find("Background/icon",this.btnSpin.node).getComponent(cc.Sprite),this.spriteBtnSpinNormal=cc.find("btnSpine/Background/icon/normal",this.node).getComponent(cc.Sprite),this.spriteBtnSpineRun=cc.find("btnSpine/Background/icon/run",this.node).getComponent(cc.Sprite),this.sp_btnSpin=cc.find("btnSpine/effect/anniu2",this.node).getComponent(sp.Skeleton),this.sp_btnSpinEffect=cc.find("btnSpine/effect/anniu",this.node).getComponent(sp.Skeleton),this.btnSpinHoverEffect=cc.find("btnSpine/spin",this.node).getComponent(sp.Skeleton),this.btnStopHoverEffect=cc.find("btnAutostop/spin",this.node).getComponent(sp.Skeleton),this.btnRotation=this.btnSpin.node.getComponentInChildren(v.default),this.autoBtnAutoArrow=cc.find("nodeSpine/btnAuto/btnAutoTarget/autoBtnAutoArrow",this.node),this.btnStopHoverEffect.setCompleteListener(function(){o.scheduleOnce(function(){o.playStopHoverEffect()},1)})},e.prototype.start=function(){cc.systemEvent.on(g.pgGameEvent.updateBonus,this.updateBouns,this),cc.systemEvent.on(g.pgGameEvent.updateCurBet,this.updateCurBet,this),cc.systemEvent.on(g.pgGameEvent.updateCurWinCount,this.updateCurWinCount,this)},e.prototype.onEnable=function(){this.updateNodeBtnsStatus(!0,0),this.initSoundIconStatus(),this.btnSpin.node.on(cc.Node.EventType.MOUSE_ENTER,this.onMouseEnter,this),this.btnSpin.node.on(cc.Node.EventType.MOUSE_LEAVE,this.onMouseLeave,this),this.btnStopAutoMode.node.on(cc.Node.EventType.MOUSE_ENTER,this.onMouseEnterBtnStopAuto,this),this.btnStopAutoMode.node.on(cc.Node.EventType.MOUSE_LEAVE,this.onMouseLeaveBtnStopAuto,this),cc.systemEvent.on(g.pgGameEvent.openBetPanel,this.openBetPanel,this),this.btnAddBet.node.on(cc.Node.EventType.TOUCH_START,this.onAddBetBtnTouchStart,this),this.btnAddBet.node.on(cc.Node.EventType.TOUCH_END,this.onAddBetBtnTouchEnd,this),this.btnAddBet.node.on(cc.Node.EventType.TOUCH_CANCEL,this.onAddBetBtnTouchEnd,this),this.btnSubBet.node.on(cc.Node.EventType.TOUCH_START,this.onSubBetBtnTouchStart,this),this.btnSubBet.node.on(cc.Node.EventType.TOUCH_END,this.onSubBetBtnTouchEnd,this),this.btnSubBet.node.on(cc.Node.EventType.TOUCH_CANCEL,this.onSubBetBtnTouchEnd,this),cc.systemEvent.on(g.pgGameEvent.keyboardSpaceDownEvent,this.onKeyboardSpaceDownEvent,this)},e.prototype.onDisable=function(){this.btnSpin.node.off(cc.Node.EventType.MOUSE_ENTER,this.onMouseEnter,this),this.btnSpin.node.off(cc.Node.EventType.MOUSE_LEAVE,this.onMouseLeave,this),this.btnStopAutoMode.node.off(cc.Node.EventType.MOUSE_ENTER,this.onMouseEnterBtnStopAuto,this),this.btnStopAutoMode.node.off(cc.Node.EventType.MOUSE_LEAVE,this.onMouseLeaveBtnStopAuto,this),cc.systemEvent.off(g.pgGameEvent.openBetPanel,this.openBetPanel,this),this.btnAddBet.node.off(cc.Node.EventType.TOUCH_START,this.onAddBetBtnTouchStart,this),this.btnAddBet.node.off(cc.Node.EventType.TOUCH_END,this.onAddBetBtnTouchEnd,this),this.btnAddBet.node.off(cc.Node.EventType.TOUCH_CANCEL,this.onAddBetBtnTouchEnd,this),this.btnSubBet.node.off(cc.Node.EventType.TOUCH_START,this.onSubBetBtnTouchStart,this),this.btnSubBet.node.off(cc.Node.EventType.TOUCH_END,this.onSubBetBtnTouchEnd,this),this.btnSubBet.node.off(cc.Node.EventType.TOUCH_CANCEL,this.onSubBetBtnTouchEnd,this),cc.systemEvent.off(g.pgGameEvent.keyboardSpaceDownEvent,this.onKeyboardSpaceDownEvent,this)},e.prototype.openBetPanel=function(){cc.Tween.stopAllByTarget(this.iconBet),cc.tween(this.iconBet).set({opacity:100}).delay(.1).set({opacity:255}).start()},e.prototype.onKeyboardSpaceDownEvent=function(){this.btnSpin.interactable&&this.btnSpin.node.emit("click")},e.prototype.updateBouns=function(t,e,o){var n=this;void 0===e&&(e=!1),void 0===o&&(o=0),null!=t&&(e?(u.tcLog.log(" start UpdateBonusAni",o),0==o&&this.holdLastBonus>0&&(o=this.holdLastBonus),this.holdLastBonus=t,this.labelCurBonus.string=""+f.currency.formatWithSymbol(o),cc.Tween.stopAllByTarget(this.BounsObj),this.BounsObj.score=o,cc.tween(this.BounsObj).to(.5,{score:t},{progress:function(t,e,o,i){var r=t+(e-t)*i;return n.labelCurBonus.string=""+f.currency.formatWithSymbol(r),t+(e-t)*i}}).call(function(){u.tcLog.log(" end score",t),n.labelCurBonus.string=""+f.currency.formatWithSymbol(t)}).start()):(cc.Tween.stopAllByTarget(this.BounsObj),u.tcLog.log(" end UpdateBonusAni",t),this.labelCurBonus.string=""+f.currency.formatWithSymbol(t)))},e.prototype.updateCurBet=function(t,e,o,n){void 0===n&&(n=!0),null!=t&&(this.bMaxBet=o,this.bMinBet=e,this.setBtnBetSubGray(e),this.setBtnBetAddGray(o),cc.systemEvent.emit(l.event.UPDATEBET),this.labelCurBet.string=""+f.currency.formatWithSymbol(t),n&&this.shakeCurBetLabel())},e.prototype.shakeCurBetLabel=function(){var t;cc.tween(null===(t=this.labelCurBet)||void 0===t?void 0:t.node).to(.1,{scale:1.5}).to(.25,{scale:1},{easing:cc.easing.backOut}).start()},e.prototype.updateCurWinCount=function(t){null!=t&&(this.labelCurWin.string=""+f.currency.formatWithSymbol(t))},e.prototype.bindClickBtnSetbg=function(t){var e;null===(e=this.nodeSetbg)||void 0===e||e.on("click",t,this)},e.prototype.bindClickBtnOpenSetting=function(t){var e;null===(e=this.btnOpenSetting)||void 0===e||e.node.on("click",t,this)},e.prototype.bindClickBtnCloseSetting=function(t){var e;null===(e=this.btnCloseSetting)||void 0===e||e.node.on("click",t,this)},e.prototype.bindClickBtnBonus=function(t){var e;null===(e=this.btnBonus)||void 0===e||e.node.on("click",t,this)},e.prototype.bindClickBtnWin=function(t){var e;null===(e=this.btnWin)||void 0===e||e.node.on("click",t,this)},e.prototype.bindClickBtnBet=function(t){var e;null===(e=this.btnBet)||void 0===e||e.node.on("click",t,this)},e.prototype.bindClickBtnExit=function(t){var e;null===(e=this.btnExit)||void 0===e||e.node.on("click",t,this)},e.prototype.bindClickBtnSound=function(t){var e;null===(e=this.btnSound)||void 0===e||e.node.on("click",t,this)},e.prototype.bindClickBtnPaytable=function(t){var e;null===(e=this.btnPaytable)||void 0===e||e.node.on("click",t,this)},e.prototype.bindClickBtnRule=function(t){var e;null===(e=this.btnRule)||void 0===e||e.node.on("click",t,this)},e.prototype.bindClickBtnHistory=function(t){var e;null===(e=this.btnHistory)||void 0===e||e.node.on("click",t,this)},e.prototype.bindClickBtnQickMode=function(t){var e;null===(e=this.btnQickMode)||void 0===e||e.node.on("click",t,this)},e.prototype.bindClickBtnSubBet=function(t){var e;null===(e=this.btnSubBet)||void 0===e||e.node.on("click",t,this)},e.prototype.bindClickBtnAddBet=function(t){var e;null===(e=this.btnAddBet)||void 0===e||e.node.on("click",t,this)},e.prototype.bindClickBtnStartAutoMode=function(t){var e;null===(e=this.btnStartAutoMode)||void 0===e||e.node.on("click",t,this)},e.prototype.bindClickBtnSpin=function(t){var e;null===(e=this.btnSpin)||void 0===e||e.node.on("click",t,this)},e.prototype.bindClickBtnStopAutoMode=function(t){var e;null===(e=this.btnStopAutoMode)||void 0===e||e.node.on("click",t,this)},e.prototype.onClickBtnSound=function(t){return c(this,void 0,void 0,function(){var e,o;return s(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,d.tcRes.load("PGGameRes",cc.SpriteFrame,t?"artwork/icon_sound_open":"artwork/icon_sound_close")];case 1:return e=n.sent(),this.spriteBtnSound.spriteFrame=e,[3,3];case 2:return o=n.sent(),u.tcLog.error("PgGameControlPanelView.onClickBtnSound load soundSPrite err:"+o),[3,3];case 3:return[2]}})})},e.prototype.updateNodeBtnsStatus=function(t,e){var o,n,i,r,c;void 0===e&&(e=.2);var s="on"===(null!==(o=h.tcStorage.readAny(h.tcStorage.Keys.SoundSwitch))&&void 0!==o?o:"on");this.nodeSoundOff.active=t&&!s;var a=cc.tween().to(e,{position:cc.v3(0,158,0)}),l=cc.tween().to(e,{opacity:255}),u=cc.tween().to(e,{position:cc.v3(0,0,0)}),d=cc.tween().to(e,{opacity:0}).set({active:!1});cc.Tween.stopAllByTarget(this.nodeSetting),cc.Tween.stopAllByTarget(this.nodeSpine),cc.Tween.stopAllByTarget(null===(n=this.btnSpin)||void 0===n?void 0:n.node),t?(cc.tween(this.nodeSetting).set({active:!0}).parallel(u,d).start(),cc.tween(this.nodeSpine).set({active:!0}).parallel(a,l).start(),cc.tween(null===(i=this.btnSpin)||void 0===i?void 0:i.node).set({active:!0}).to(.1,{opacity:255}).start(),null===(r=this.btnSpinRotateAni)||void 0===r||r.startRotate(4)):(cc.tween(this.nodeSetting).set({active:!0}).parallel(a,l).start(),cc.tween(this.nodeSpine).set({active:!0}).parallel(u,d).start(),cc.tween(null===(c=this.btnSpin)||void 0===c?void 0:c.node).to(.1,{opacity:0}).set({active:!1}).start())},e.prototype.updateBtnQuickModeStatus=function(t,e){this.activeBtnQuicMode&&(this.activeBtnQuicMode.active=t),e&&(this.nodeBtnQickLight.scale=.9),this.unActiveBtnQuicMode&&(this.unActiveBtnQuicMode.active=!t),e?this.nodeQuickEffect&&(this.nodeQuickEffect.active=!0):this.nodeQuickEffect&&(this.nodeQuickEffect.active=!1)},e.prototype.setBtnSpineStatus=function(t,e,o){var n,i,r,c,s,l,d,h,f,g;void 0===e&&(e=!1),void 0===o&&(o=!0),a.SelectGameMrg.getInstance().preDoTime=(new Date).getTime(),u.tcLog.log("\u66f4\u65b0spine\u6309\u94ae\u72b6\u6001: status = ",t,", unableSpinBtnSpinGray = ",o);var v,m="#F5F5F5";switch(this.curBtnSpinStatus=t,t){case y.EBtnSpineStatus.ACTIVE_NORMAL:this.spriteBtnSpin.spriteFrame=this.spriteBtnSpinNormal.spriteFrame,null===(n=this.btnSpinRotateAni)||void 0===n||n.startRotate(4),p.creatorUtils.setNodeGray(null===(i=this.btnSpinRotateAni)||void 0===i?void 0:i.node,!1),this.setBtnOpactivty(this.btnSubBet.node,this.bMinBet),this.setBtnOpactivty(this.btnAddBet.node,this.bMaxBet),this.setBtnOpactivty(this.btnStartAutoMode.node,!1),this.setBtnOpactivty(this.btnOpenSetting.node,!1),this.btnSpin.interactable=!0,this.btnAddBet.interactable=!0,this.btnSubBet.interactable=!0,this.btnStartAutoMode.interactable=!0,this.btnOpenSetting.interactable=!0,this.btnBonus.interactable=!0,this.btnBet.interactable=!0,this.btnWin.interactable=!0,m="#81FFF9",this.isHovering&&this.onMouseEnter();break;case y.EBtnSpineStatus.ACTIVE_RUN:null===(r=this.btnSpinRotateAni)||void 0===r||r.startRotate(e?.3:.4),p.creatorUtils.setNodeGray(null===(c=this.btnSpinRotateAni)||void 0===c?void 0:c.node,!1),this.spriteBtnSpin.spriteFrame=this.spriteBtnSpineRun.spriteFrame,this.setBtnOpactivty(this.btnSubBet.node,!0),this.setBtnOpactivty(this.btnAddBet.node,!0),this.setBtnOpactivty(this.btnStartAutoMode.node,!0),this.setBtnOpactivty(this.btnOpenSetting.node,!0),this.btnAddBet.interactable=!1,this.btnSubBet.interactable=!1,this.btnStartAutoMode.interactable=!1,this.btnOpenSetting.interactable=!1,this.btnWin.interactable=!1,this.btnBonus.interactable=!1,this.btnBet.interactable=!1,m="#FFFFFF",this.isHovering&&this.onMouseEnter();break;case y.EBtnSpineStatus.UNACTIVE_NORMAL:this.spriteBtnSpin.spriteFrame=this.spriteBtnSpinNormal.spriteFrame,null===(s=this.btnSpinRotateAni)||void 0===s||s.startRotate(4),p.creatorUtils.setNodeGray(null===(l=this.btnSpinRotateAni)||void 0===l?void 0:l.node,!0),this.setBtnOpactivty(this.btnSubBet.node,!0),this.setBtnOpactivty(this.btnAddBet.node,!0),this.setBtnOpactivty(this.btnStartAutoMode.node,!0),this.setBtnOpactivty(this.btnOpenSetting.node,!0),this.btnSpin.interactable=!1,this.btnAddBet.interactable=!1,this.btnSubBet.interactable=!1,this.btnStartAutoMode.interactable=!1,this.btnOpenSetting.interactable=!1,this.btnBonus.interactable=!1,this.btnBet.interactable=!1,m="#FFFFFF",this.hideBtnSpinHoverEfect(),(v=null===(d=this.btnSpin)||void 0===d?void 0:d.getComponentsInChildren(sp.Skeleton))&&v.forEach(function(t){t.clearTracks()});break;case y.EBtnSpineStatus.UNACTIVE_RUN:this.spriteBtnSpin.spriteFrame=this.spriteBtnSpineRun.spriteFrame,null===(h=this.btnSpinRotateAni)||void 0===h||h.startRotate(e?.45:.4),p.creatorUtils.setNodeGray(null===(f=this.btnSpinRotateAni)||void 0===f?void 0:f.node,o),this.setBtnOpactivty(this.btnSubBet.node,!0),this.setBtnOpactivty(this.btnAddBet.node,!0),this.setBtnOpactivty(this.btnStartAutoMode.node,!0),this.setBtnOpactivty(this.btnOpenSetting.node,!0),this.btnSpin.interactable=!1,this.btnAddBet.interactable=!1,this.btnSubBet.interactable=!1,this.btnStartAutoMode.interactable=!1,this.btnOpenSetting.interactable=!1,this.btnBonus.interactable=!1,this.btnBet.interactable=!1,m="#FFFFFF",this.hideBtnSpinHoverEfect();break;case y.EBtnSpineStatus.UNACTIVE_STOP:this.spriteBtnSpin.spriteFrame=this.spriteBtnSpinNormal.spriteFrame,p.creatorUtils.setNodeGray(null===(g=this.btnSpinRotateAni)||void 0===g?void 0:g.node,!0),this.btnRotation.stopRotate(),this.btnSpin.interactable=!1,this.btnAddBet.interactable=!1,this.btnSubBet.interactable=!1,this.btnStartAutoMode.interactable=!1,this.btnOpenSetting.interactable=!1,this.btnBonus.interactable=!1,this.btnBet.interactable=!1,this.hideBtnSpinHoverEfect()}this.updateLabelColor(m)},e.prototype.setBtnsInterable=function(){},e.prototype.setBtnBetAddGray=function(t){var e=t?70:255;this.btnAddBet.node.opacity=e},e.prototype.setBtnBetSubGray=function(t){var e=t?70:255;this.btnSubBet.node.opacity=e},e.prototype.setBtnOpactivty=function(t,e){var o=e?66:255;t==this.btnStartAutoMode.node&&1==e&&(o=30),t.opacity=o},e.prototype.updateLabelColor=function(t){void 0===t&&(t="F5F5F5"),this.labelCurBet.node.color=cc.Color.fromHEX(new cc.Color,t),this.labelCurBonus.node.color=cc.Color.fromHEX(new cc.Color,t),this.labelCurWin.node.color=cc.Color.fromHEX(new cc.Color,t)},e.prototype.setLeftAutoSpinCount=function(t){this.labelAutoCount.string=t.toString()},e.prototype.setBtnSpinStatus=function(t,e){var o;void 0===e&&(e=0),this.btnStopAutoMode.node.active=!t,this.nodeBtnStartAutoEffect.node.active=!t,t||this.bAutoEffectPlaying||(this.bAutoEffectPlaying=!0,null===(o=this.nodeBtnStartAutoEffect)||void 0===o||o.setAnimation(0,"animation",!0)),this.btnSpin.node.active=t,t?(this.setBtnSpineStatus(y.EBtnSpineStatus.ACTIVE_NORMAL),cc.Tween.stopAllByTarget(this.autoBtnAutoArrow)):(this.updateLabelColor("#F5F5F5"),this.setLeftAutoSpinCount(e),cc.tween(this.autoBtnAutoArrow).by(4,{angle:-360}).union().repeatForever().start())},e.prototype.initSoundIconStatus=function(){var t,e="on"===(null!==(t=h.tcStorage.readAny(h.tcStorage.Keys.SoundSwitch))&&void 0!==t?t:"on");this.onClickBtnSound(e)},e.prototype.playBtnSpinEffect=function(){this.sp_btnSpinEffect.setAnimation(0,"animation",!1),this.sp_btnSpin.setAnimation(0,"animation",!1)},e.prototype.startFeatureStatus=function(){this.nodeSoundOff.active=!1,this.btnSpin.node.active=!1,this.btnStopAutoMode.node.active=!1,this.nodeSpine.active=!1},e.prototype.existFeatureStatus=function(t){var e,o="on"===(null!==(e=h.tcStorage.readAny(h.tcStorage.Keys.SoundSwitch))&&void 0!==e?e:"on");this.nodeSoundOff.active=!o,!t&&(this.btnSpin.node.active=!0),t&&(this.btnStopAutoMode.node.active=!0),this.nodeSpine.active=!0},e.prototype.onMouseEnter=function(){this.isHovering=!0,this.curBtnSpinStatus!=y.EBtnSpineStatus.ACTIVE_NORMAL&&this.curBtnSpinStatus!=y.EBtnSpineStatus.ACTIVE_RUN||this.btnSpinHoverEffect.node.active||(this.btnSpinHoverEffect.node.active=!0,this.playSpinHoverEffect())},e.prototype.onMouseLeave=function(){this.isHovering=!1,this.hideBtnSpinHoverEfect()},e.prototype.onAddBetBtnTouchStart=function(){this.btnAddBet.interactable&&70!=this.btnAddBet.node.opacity&&(this.btnAddBet.node.opacity=128)},e.prototype.onAddBetBtnTouchEnd=function(){this.btnAddBet.interactable&&70!=this.btnAddBet.node.opacity&&(this.btnAddBet.node.opacity=255)},e.prototype.onSubBetBtnTouchStart=function(){this.btnSubBet.interactable&&70!=this.btnSubBet.node.opacity&&(this.btnSubBet.node.opacity=128)},e.prototype.onSubBetBtnTouchEnd=function(){this.btnSubBet.interactable&&70!=this.btnSubBet.node.opacity&&(this.btnSubBet.node.opacity=255)},e.prototype.playSpinHoverEffect=function(){var t=this;this.btnSpinHoverEffect.setAnimation(0,"animation",!1),this.unscheduleAllCallbacks(),this.scheduleOnce(function(){t.isHovering&&t.playSpinHoverEffect()},1)},e.prototype.hideBtnSpinHoverEfect=function(){this.btnSpinHoverEffect.node.active=!1},e.prototype.onMouseLeaveBtnStopAuto=function(){this.btnStopHoverEffect.node.active=!1},e.prototype.onMouseEnterBtnStopAuto=function(){this.btnStopHoverEffect.node.active=!0,this.playStopHoverEffect()},e.prototype.playStopHoverEffect=function(){this.btnStopHoverEffect.node.active&&this.btnStopHoverEffect.setAnimation(0,"animation2",!1)},r([b],e)}(cc.Component));o.default=_,cc._RF.pop()},{"../../../../../ApiTemplate/script/tools/SelectGameMrg":void 0,"../../../../../script/event/event":void 0,"../../../../../script/framework/log/log":void 0,"../../../../../script/framework/res/res":void 0,"../../../../../script/framework/storage/storage":void 0,"../../../../../script/pkg/creator":void 0,"../../../../../script/pkg/currency":void 0,"./PgEvent":"PgEvent","./PgGameControlPanelLogic":"PgGameControlPanelLogic","./btnSpineRotateAni":"btnSpineRotateAni"}],PgGameHistoryView:[function(t,e,o){"use strict";cc._RF.push(e,"fc30a98eqtMoI7zJKX9a+Vl","PgGameHistoryView");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c},c=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(i,r){function c(t){try{a(n.next(t))}catch(e){r(e)}}function s(t){try{a(n.throw(t))}catch(e){r(e)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(c,s)}a((n=n.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var o,n,i,r,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(t){return function(e){return a([t,e])}}function a(r){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return c.label++,{value:r[1],done:!1};case 5:c.label++,n=r[1],r=[0];continue;case 7:r=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){c=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){c.label=r[1];break}if(6===r[0]&&c.label<i[1]){c.label=i[1],i=r;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(r);break}i[2]&&c.ops.pop(),c.trys.pop();continue}r=e.call(t,c)}catch(s){r=[6,s],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../../../../script/config/config"),l=t("../../../../../script/framework/audio/audio"),u=t("../../../../../script/framework/log/log"),d=t("../../../../../script/framework/res/res"),h=t("../history/UIDateSelect"),p=t("../history/UIselectdate"),f=t("../../gameCommon/script/game-loading"),g=t("./PgEvent"),y=cc._decorator,v=y.ccclass,m=(y.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.onLoad=function(){var t=this;this.btnClose=cc.find("aniRoot/btn_close",this.node),this.btnClose.addComponent(cc.Button),this.btnClose.on("click",function(){t.onCloseHistoryView(),cc.systemEvent.emit(g.pgGameEvent.reset_history_view)}),cc.systemEvent.on(g.pgGameEvent.open_history_view,this.detailPageBackAction,this),cc.systemEvent.on(g.pgGameEvent.close_history_view,this.onCloseHistoryView,this),cc.systemEvent.on(g.pgGameEvent.open_his_selectdate_view,this.onOpenSelectDateView,this),cc.systemEvent.on(g.pgGameEvent.close_his_selectdate_view,this.onCloseSelectDateView,this),cc.systemEvent.on(g.pgGameEvent.open_his_dateSelect_view,this.onOpenDateSelectView,this),cc.systemEvent.on(g.pgGameEvent.close_his_dateSelect_view,this.onCloseDateSelectView,this)},e.prototype.onCloseHistoryView=function(){var t=this;cc.tween(this.node).to(.3,{position:cc.v3(0,-1440,0)}).call(function(){t.node.active=!1,window.changeTrophiesIconShow&&window.changeTrophiesIconShow(!0)}).start()},e.prototype.addContent=function(t,e,o,n){var i;return void 0===n&&(n=l.AudioClipName.CLICKBTN),c(this,void 0,void 0,function(){var n,r,c;return s(this,function(s){switch(s.label){case 0:if(this.label&&(this.label.string=e),!o||!this.nodeRuleContentParent)return[2];s.label=1;case 1:return s.trys.push([1,3,,4]),(n=a.gameHelper.getBundleName(t))?(f.gameLoadingDialog.show({duration:20}),[4,d.tcRes.load(n,cc.Prefab,o)]):(u.tcLog.error("pgGameRuleView get bundlename null"),[2]);case 2:return r=s.sent(),null===(i=this.nodeRuleContentParent)||void 0===i||i.addChild(cc.instantiate(r)),f.gameLoadingDialog.close(),[3,4];case 3:return c=s.sent(),u.tcLog.error("PgGameRuleView.error,"+c),[3,4];case 4:return[2]}})})},e.prototype.show=function(){window.changeTrophiesIconShow&&window.changeTrophiesIconShow(!1),this.node.active=!0,cc.tween(this.node).set({position:cc.v3(0,-1440,0)}).to(.3,{position:cc.v3(0,0,0)}).start()},e.prototype.detailPageBackAction=function(){this.node.active=!0},e.prototype.onOpenSelectDateView=function(){var t;return c(this,void 0,void 0,function(){var e,o,n;return s(this,function(i){switch(i.label){case 0:if(this.nodeSelectdate)return[3,4];i.label=1;case 1:return i.trys.push([1,3,,4]),f.gameLoadingDialog.show({duration:20}),[4,d.tcRes.load("PGGameRes",cc.Prefab,"prefab/history/UIselectdate")];case 2:return e=i.sent(),(o=cc.instantiate(e)).setParent(a.config.uiNode.dialog),this.nodeSelectdate=o.getComponent(p.UIselectdate),f.gameLoadingDialog.close(),[3,4];case 3:return n=i.sent(),u.tcLog.error("PgGameControlPanellogic show onClickBtnHistory error,"+n),[3,4];case 4:return null===(t=this.nodeSelectdate)||void 0===t||t.show(),[2]}})})},e.prototype.onCloseSelectDateView=function(){this.nodeSelectdate.node.active=!1},e.prototype.onOpenDateSelectView=function(){var t;return c(this,void 0,void 0,function(){var e,o,n;return s(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),f.gameLoadingDialog.show({duration:20}),[4,d.tcRes.load("PGGameRes",cc.Prefab,"prefab/history/UIDateSelect")];case 1:return e=i.sent(),(o=cc.instantiate(e)).setParent(a.config.uiNode.dialog),this.nodeDateselect=o.getComponent(h.UIDateSelect),null===(t=this.nodeDateselect)||void 0===t||t.show(),f.gameLoadingDialog.close(),[3,3];case 2:return n=i.sent(),u.tcLog.error("PgGameControlPanellogic show onClickBtnHistory error,"+n),[3,3];case 3:return[2]}})})},e.prototype.onCloseDateSelectView=function(){this.nodeDateselect.node.destroy()},r([v],e)}(cc.Component));o.default=m,cc._RF.pop()},{"../../../../../script/config/config":void 0,"../../../../../script/framework/audio/audio":void 0,"../../../../../script/framework/log/log":void 0,"../../../../../script/framework/res/res":void 0,"../../gameCommon/script/game-loading":void 0,"../history/UIDateSelect":"UIDateSelect","../history/UIselectdate":"UIselectdate","./PgEvent":"PgEvent"}],PgGameRuleView:[function(t,e,o){"use strict";cc._RF.push(e,"77a57YECqNNlatcmD9gj80W","PgGameRuleView");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c},c=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(i,r){function c(t){try{a(n.next(t))}catch(e){r(e)}}function s(t){try{a(n.throw(t))}catch(e){r(e)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(c,s)}a((n=n.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var o,n,i,r,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(t){return function(e){return a([t,e])}}function a(r){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return c.label++,{value:r[1],done:!1};case 5:c.label++,n=r[1],r=[0];continue;case 7:r=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){c=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){c.label=r[1];break}if(6===r[0]&&c.label<i[1]){c.label=i[1],i=r;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(r);break}i[2]&&c.ops.pop(),c.trys.pop();continue}r=e.call(t,c)}catch(s){r=[6,s],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../../../../script/config/config"),l=t("../../../../../script/framework/audio/audio"),u=t("../../../../../script/framework/log/log"),d=t("../../../../../script/framework/res/res"),h=t("../../gameCommon/script/game-loading"),p=cc._decorator,f=p.ccclass,g=(p.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.clickBtnSound=l.AudioClipName.CLICKBTN,e.isFirst=!0,e}return i(e,t),e.prototype.onLoad=function(){var t=this;this.body=cc.find("body",this.node),this.btnClose=cc.find("body/title/btnClose",this.node),this.nodeRuleContentParent=cc.find("body/content/view/content",this.node),this.label=cc.find("body/title/label",this.node).getComponent(cc.Label),this.scrollbar=cc.find("body/content/scrollBar",this.node),this.scrollView=cc.find("body/content",this.node).getComponent(cc.ScrollView),this.loadingNode=cc.find("body/loadingBg",this.node),this.loadtip=cc.find("body/loadingBg/loadtip",this.node),this.btnClose.on("click",function(){t.node.active=!1,window.changeTrophiesIconShow&&window.changeTrophiesIconShow(!0)})},e.prototype.addContent=function(t,e,o,n){var i;return void 0===n&&(n=l.AudioClipName.CLICKBTN),c(this,void 0,void 0,function(){var r,c,l;return s(this,function(s){switch(s.label){case 0:if(this.clickBtnSound=n,this.initScrollBar(),this.label&&(this.label.string=e),!o||!this.nodeRuleContentParent)return[2];s.label=1;case 1:return s.trys.push([1,3,,4]),(r=a.gameHelper.getBundleName(t))?(h.gameLoadingDialog.show({duration:20}),[4,d.tcRes.load(r,cc.Prefab,o)]):(u.tcLog.error("pgGameRuleView get bundlename null"),[2]);case 2:return c=s.sent(),null===(i=this.nodeRuleContentParent)||void 0===i||i.addChild(cc.instantiate(c)),h.gameLoadingDialog.close(),[3,4];case 3:return l=s.sent(),u.tcLog.error("PgGameRuleView.error,"+l),[3,4];case 4:return[2]}})})},e.prototype.initScrollBar=function(){var t,e=this;null===(t=this.scrollbar)||void 0===t||t.on("touchmove",function(t){if(e.scrollView.getMaxScrollOffset().y>0){var o=(t.getLocationY()+100)/e.node.height;e.scrollView.scrollTo(cc.v2(0,o))}},this)},e.prototype.show=function(){var t=this;window.changeTrophiesIconShow&&window.changeTrophiesIconShow(!1),this.node.active=!0,this.isFirst?(this.isFirst=!1,this.loadingNode.active=!0,this.loadtip.active=!0,this.nodeRuleContentParent.active=!1,cc.tween(this.body).set({position:cc.v3(0,-1440,0)}).to(.3,{position:cc.v3(0,0,0)}).call(function(){t.scheduleOnce(function(){cc.tween(t.loadtip).set({opacity:255}).to(.3,{opacity:0}).call(function(){t.loadtip.active=!1,t.loadingNode.active=!1,t.nodeRuleContentParent.active=!0}).start()},1)}).start()):(this.nodeRuleContentParent.active=!0,cc.tween(this.body).set({position:cc.v3(0,-1440,0)}).to(.3,{position:cc.v3(0,0,0)}).call(function(){}).start())},r([f],e)}(cc.Component));o.default=g,cc._RF.pop()},{"../../../../../script/config/config":void 0,"../../../../../script/framework/audio/audio":void 0,"../../../../../script/framework/log/log":void 0,"../../../../../script/framework/res/res":void 0,"../../gameCommon/script/game-loading":void 0}],PgGameTopNode:[function(t,e,o){"use strict";cc._RF.push(e,"d213caKeqND/bP+2+65j7eN","PgGameTopNode");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../../../../../script/framework/i18n/i18n"),s=t("../../../../../script/pkg/adapter-v2"),a=cc._decorator,l=a.ccclass,u=(a.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.onLoad=function(){this.labelGameName=cc.find("gameName",this.node).getComponent(cc.Label),this.labelTime=cc.find("time",this.node).getComponent(cc.Label),this.labelGameName.node.active=!1,this.labelTime.node.active=!1},e.prototype.onEnable=function(){var t=this;this.labelGameName.node.active=!0,this.labelTime.node.active=!0,this.node.setPosition(0,720+s.AdapterV2.getInstance().winSizeHeight-15),s.AdapterV2.getInstance().rootCanvasHeight>1442?this.node.setPosition(0,876):this.node.setPosition(0,720);var e=c.tcI18n.i18nLabel("h5_name"),o=e.substring(0,1);e=o.toUpperCase()+e.substring(1),this.labelGameName.string=e,this.schedule(function(){var e=t.toLocalTimeString(Date.now());t.labelTime.string=e},1,cc.macro.REPEAT_FOREVER,.01),this.node.getComponentsInChildren(cc.Widget).forEach(function(t){t.updateAlignment()})},e.prototype.onDisable=function(){this.unscheduleAllCallbacks()},e.prototype.toLocalTimeString=function(t){var e=new Date(t),o=e.getHours(),n=e.getMinutes(),i=e.getSeconds();return o.toString().padStart(2,"0")+": "+n.toString().padStart(2,"0")+": "+i.toString().padStart(2,"0")},r([l],e)}(cc.Component));o.default=u,cc._RF.pop()},{"../../../../../script/framework/i18n/i18n":void 0,"../../../../../script/pkg/adapter-v2":void 0}],PgGameWalletView:[function(t,e,o){"use strict";cc._RF.push(e,"c8f86HTdmVFWrcjC7INgrbl","PgGameWalletView");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../../../../../script/app/env"),s=t("../../../../../script/framework/audio/audio"),a=t("../../../../../script/pkg/currency"),l=cc._decorator,u=l.ccclass,d=(l.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isFirst=!0,e}return i(e,t),e.prototype.onLoad=function(){var t,e=this;this.btnClose=cc.find("body/btnClose",this.node),this.btnOutClose=cc.find("btnOutClose",this.node),this.body=cc.find("body",this.node),this.labelBonus=cc.find("body/wallet/label",this.node).getComponent(cc.Label),this.bodyWidget=null===(t=this.body)||void 0===t?void 0:t.getComponent(cc.Widget),this.loadingBg=cc.find("loadingBg",this.node),this.loadtip=cc.find("loadingBg/loadtip",this.node),this.mask=cc.find("mask",this.node),this.btnClose.on("click",function(){s.uAudio.getInstance().playEffect(s.AudioClipName.CLICKBTN),cc.tween(e.body).to(.3,{position:cc.v3(0,-685,0)}).call(function(){cc.tween(e.mask).to(.2,{opacity:0}).call(function(){e.node.active=!1,window.changeTrophiesIconShow&&window.changeTrophiesIconShow(!0)}).start()}).start()}),this.btnOutClose.on("click",function(){s.uAudio.getInstance().playEffect(s.AudioClipName.CLICKBTN),cc.tween(e.body).to(.3,{position:cc.v3(0,-685,0)}).call(function(){cc.tween(e.mask).to(.2,{opacity:0}).call(function(){e.node.active=!1,window.changeTrophiesIconShow&&window.changeTrophiesIconShow(!0)}).start()}).start()})},e.prototype.show=function(){var t=this;this.node.active=!0,window.changeTrophiesIconShow&&window.changeTrophiesIconShow(!1),cc.tween(this.mask).set({opacity:0}).to(.24,{opacity:128}).start(),this.isFirst?(this.isFirst=!1,this.loadingBg.active=!0,this.body.active=!1,cc.tween(this.loadingBg).set({position:cc.v3(0,-685,0)}).to(.24,{position:cc.v3(0,0,0)}).call(function(){t.scheduleOnce(function(){cc.tween(t.loadtip).set({opacity:255}).to(.24,{opacity:0}).call(function(){t.loadtip.active=!1,t.loadingBg.active=!1,t.body.active=!0,t.labelBonus&&(t.labelBonus.string=""+a.currency.formatWithSymbol(c.env.curGameData.balance))}).start()},1)}).start()):(this.loadingBg.active=!1,this.body.active=!0,this.labelBonus&&(this.labelBonus.string=""+a.currency.formatWithSymbol(c.env.curGameData.balance)),cc.tween(this.body).set({position:cc.v3(0,-685,0)}).to(.24,{position:cc.v3(0,0,0)}).start())},r([u],e)}(cc.Component));o.default=d,cc._RF.pop()},{"../../../../../script/app/env":void 0,"../../../../../script/framework/audio/audio":void 0,"../../../../../script/pkg/currency":void 0}],RecordMgr:[function(t,e,o){"use strict";cc._RF.push(e,"0f6edp4W3xP7rwOjlSpPVaZ","RecordMgr");var n=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(i,r){function c(t){try{a(n.next(t))}catch(e){r(e)}}function s(t){try{a(n.throw(t))}catch(e){r(e)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(c,s)}a((n=n.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var o,n,i,r,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(t){return function(e){return a([t,e])}}function a(r){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return c.label++,{value:r[1],done:!1};case 5:c.label++,n=r[1],r=[0];continue;case 7:r=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){c=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){c.label=r[1];break}if(6===r[0]&&c.label<i[1]){c.label=i[1],i=r;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(r);break}i[2]&&c.ops.pop(),c.trys.pop();continue}r=e.call(t,c)}catch(s){r=[6,s],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../../../../../ApiTemplate/script/net/Result"),c=t("../../../../../ApiTemplate/script/tools/SelectGameMrg"),s=t("../../../../../script/framework/log/log"),a=t("../../../../update-v2/script/api/api-config"),l=t("../script/PgEvent"),u=t("./DateUtil"),d=function(){function t(){this._filterFrom=1,this._filterTo=1,this._offset=1,this._dataCount=1,this._dataArr=[],this._allDetails={}}return t.getInstance=function(){return t._instance||(t._instance=new t),t._instance},t.delInstance=function(){t._instance&&(t._instance=null)},t.prototype.on_dtor=function(){},Object.defineProperty(t.prototype,"filterFrom",{get:function(){return this._filterFrom},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"filterTo",{get:function(){return this._filterTo},enumerable:!1,configurable:!0}),t.prototype.getDataList=function(){return this._dataArr},t.prototype.appendDatas=function(t){var e,o=t.data,n=o&&o.list||[];(e=this._dataArr).push.apply(e,n)},t.prototype.setFilter=function(t,e){this._filterFrom=t,this._filterTo=e,this._loaded=!1,this._shi_len=0,this._offset=1,this._dataCount=1,this._dataArr=[],this.isFullData=!1,cc.systemEvent.emit(l.pgGameEvent.ref_record_filter)},t.prototype.checkReqFull=function(){return this.isFullData},t.prototype.pullData=function(){var t=this;return new Promise(function(e){return n(t,void 0,void 0,function(){var t,o,n,l,d,h,p,f,g,y,v;return i(this,function(i){switch(i.label){case 0:return this.checkReqFull()?[2,e({error_code:0,data:{list:[]}})]:(t={start_time:0,end_time:0,page_size:10,page:this._offset,game_id:a.apiConfig.env.gameId,token:a.apiConfig.env.token},o=new Date(u.default.getSysTime()),n=o.getFullYear(),l=o.getMonth()+1,d=o.getDate(),u.default.getTimestamp(n,l,d,0,0,0),1==this.filterFrom?(t.start_time=0,t.end_time=0):7==this.filterFrom?(t.start_time=o.getTime()-6048e5,t.end_time=o.getTime()):(t.start_time=this.filterFrom,t.end_time=this.filterTo),t.start_time=Math.floor(t.start_time/1e3),t.end_time=Math.floor(t.end_time/1e3),[4,c.SelectGameMrg.getInstance().history(t)]);case 1:if(!(h=i.sent())||h.result!=r.Result.Success)return console.error("none:",h),[2,e(null)];if(s.tcLog.log("historyData:",h),(!h.historylist||h.historylist.length<10||0==h.historylist.length)&&(this.isFullData=!0),!h.historylist)return[2,e({error_code:0,data:{list:[],count:0,bet:0,win:0}})];for(p=10*h.total_bet,f=10*h.total_profit,g=0;g<h.historylist.length;g++)(y=h.historylist[g]).bet=10*y.bet,y.win=10*y.win;return(v={error_code:0,data:{list:[],count:h.total,bet:p,win:f}}).data.list=h.historylist,[2,e(v)]}})})})},t.prototype.pullDetail=function(t,e){var o=this;return new Promise(function(t){return n(o,void 0,void 0,function(){var o,n,l,u,d,h,p,f,g,y;return i(this,function(i){switch(i.label){case 0:return this._allDetails[e]?[2,t(this._allDetails[e])]:(o={order:e,game_id:a.apiConfig.env.gameId,token:a.apiConfig.env.token},[4,c.SelectGameMrg.getInstance().historyDetail(o)]);case 1:if(!(n=i.sent())||n.result!=r.Result.Success)return console.error("none:",n),[2,t(null)];for(l={error_code:0,data:{list:[]}},u=0;u<n.historyDetail.length;u++)d=n.historyDetail[u],h=[],(p=new Object).round_no=d.order,p.bet=10*d.bet,null!=d.leftTimes&&d.leftTimes>-1&&d.leftTimes<7?p.prize=10*d.win:p.prize=10*(d.bet+d.win),p.player_win_lose=10*d.win,p.balance=10*d.moneyAfter,p.bet_size=d.bet_size,p.bet_multiple=d.bet_mul,p.screen=d.screen,p.hits=d.hits,p.normalRoundTimes=d.normalRoundTimes,p.leftTimes=d.leftTimes,p.groupId=d.groupId,h.push(p),f={create_timestamp:n.historyDetail[0].createTime,round_list:h},l.data.list.push(f);return s.tcLog.log("historyDetail:",l),(null===(g=null==l?void 0:l.data)||void 0===g?void 0:g.list)?[2,t(null===(y=null==l?void 0:l.data)||void 0===y?void 0:y.list)]:[2]}})})})},t._instance=null,t}();o.default=d,cc._RF.pop()},{"../../../../../ApiTemplate/script/net/Result":void 0,"../../../../../ApiTemplate/script/tools/SelectGameMrg":void 0,"../../../../../script/framework/log/log":void 0,"../../../../update-v2/script/api/api-config":void 0,"../script/PgEvent":"PgEvent","./DateUtil":"DateUtil"}],SharedThemeColor:[function(t,e,o){"use strict";cc._RF.push(e,"38ebb8bWq1HqJrAQ7BO4RvD","SharedThemeColor");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0}),o.SharedThemeColor=void 0;var c=t("./UIhistory"),s=cc._decorator,a=s.ccclass,l=s.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.rendererList=[],e}return i(e,t),e.prototype.onLoad=function(){this.rendererList.forEach(function(t){t.color=c.UIhistory.themeColor})},e.prototype.start=function(){this.destroy()},r([l({type:cc.Node})],e.prototype,"rendererList",void 0),r([a],e)}(cc.Component);o.SharedThemeColor=u,cc._RF.pop()},{"./UIhistory":"UIhistory"}],StringEx:[function(t,e,o){"use strict";cc._RF.push(e,"f0c63eQELxM3qTe7jE+u+Q6","StringEx"),Object.defineProperty(o,"__esModule",{value:!0}),o.StringEx=void 0;var n=function(){function t(){}return t.padStart=function(t,e,o){return t.length>=e?t:o.repeat(Math.ceil((e-t.length)/o.length)).slice(0,e-t.length)+t},t}();o.StringEx=n,cc._RF.pop()},{}],StringUtil:[function(t,e,o){"use strict";cc._RF.push(e,"094247qMWVCeq4O7njEBD8l","StringUtil"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../../../../../script/framework/log/log"),i=t("./Globals"),r=/(%d)|(%s)/,c=/%s/,s=function(){function t(){}return t.getSufix=function(t){if(i.isEmpty(t))return"";var e=t.lastIndexOf(".");return null==e||e<=0?"":t.substring(e+1)},t.format=function(t){for(var e=[],o=1;o<arguments.length;o++)e[o-1]=arguments[o];return e.forEach(function(e,o){t=t.replace("{"+o+"}",e)}),t},t.formatStr=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var o=arguments.length;if(0===o)return"";var n=arguments[0];if(1===o)return""+n;var i="string"==typeof n&&r.test(n);if(i)for(var s=1;s<o;++s){var a=arguments[s],l="number"==typeof a?r:c;l.test(n)?n=n.replace(l,a):n+=" "+a}else for(s=1;s<o;++s)n+=" "+arguments[s];return n},t.lineStr=function(t,e){if(void 0===e&&(e=12),!t)return"";if(t.length<e)return t;for(var o="",n=0;n<t.length;n++)o+=t[n],(n+1)%e==0&&(o+="\n");return o},t.shortString=function(t){return i.isEmpty(t)?t:t.length>10?t.substring(0,9)+"...":t},t.lastCharIs=function(t,e){return!i.isEmpty(t)&&t[t.length-1]==e},t.Bytes2Str=function(t,e){void 0===e&&(e=7);for(var o="",n=0;n<t.length;n++){var i=t[n].toString(16);1==i.length&&(i="0"+i),o+=" "+i,n==e&&(o+="  ")}return o},t.utf8ArrayToString=function(t){if(i.isNil(t)||t.length<=0)return"";var e,o,n,r,c,s;for(e="",n=t.length,o=0;o<n;)switch((r=t[o++])>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:e+=String.fromCharCode(r);break;case 12:case 13:c=t[o++],e+=String.fromCharCode((31&r)<<6|63&c);break;case 14:c=t[o++],s=t[o++],e+=String.fromCharCode((15&r)<<12|(63&c)<<6|(63&s)<<0)}return e},t.stringToUTF8Bytes=function(t){for(var e=[],o=0;o<t.length;o++){var n=t.charCodeAt(o);n<128?e.push(n):n<2048?e.push(192|n>>6,128|63&n):n<55296||n>=57344?e.push(224|n>>12,128|n>>6&63,128|63&n):(o++,n=65536+((1023&n)<<10|1023&t.charCodeAt(o)),e.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|63&n))}return e},t.printLn=function(t){var e="{\n";for(var o in t)if("data"==o){for(var i in e+="data: {\n",t.data)e+="    "+i+": "+JSON.stringify(t.data[i])+"\n";e+="}\n"}else e+=o+": "+JSON.stringify(t[o])+"\n";e+="}",n.tcLog.log(e)},t}();o.default=s,cc._RF.pop()},{"../../../../../script/framework/log/log":void 0,"./Globals":"Globals"}],UIDateSelect:[function(t,e,o){"use strict";cc._RF.push(e,"46b08SC/GBMRaHAOTLH0yq9","UIDateSelect");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0}),o.UIDateSelect=void 0;var c=t("../script/PgEvent"),s=t("./BaseView"),a=t("./RecordMgr"),l=t("./shared_record"),u=t("./shared_record_custom_date"),d=cc._decorator,h=d.ccclass,p=(d.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.onLoad=function(){},e.prototype.start=function(){this.node.on(l.SharedRecordEvent.REQUEST_CUSTOM_DATE_RECORD,this.onSelectData,this);var t=this.getComponent(u.SharedRecordCustomDate);t&&t.setDate(this.node)},e.prototype.onSelectData=function(t,e){cc.systemEvent.emit(c.pgGameEvent.close_his_selectdate_view),a.default.getInstance().setFilter(t,e)},e.prototype.onDestroy=function(){cc.systemEvent.emit(c.pgGameEvent.close_his_dateSelect_view)},e.prototype.show=function(){this.node.active=!0},r([h],e)}(s.BaseView));o.UIDateSelect=p,cc._RF.pop()},{"../script/PgEvent":"PgEvent","./BaseView":"BaseView","./RecordMgr":"RecordMgr","./shared_record":"shared_record","./shared_record_custom_date":"shared_record_custom_date"}],UIDetailTip:[function(t,e,o){"use strict";cc._RF.push(e,"20ff1+an9dIsaRQp/vTQM9f","UIDetailTip");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0}),o.UIDetailTip=void 0;var c=t("../../../../../script/framework/i18n/i18n"),s=t("../../../../../script/framework/log/log"),a=t("../../../../../script/pkg/currency"),l=t("./BaseView"),u=t("./CocosUtil"),d=cc._decorator,h=d.ccclass,p=(d.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.itemScore={51:200,82:100,81:50,4:10,3:5,2:3,1:2},e}return i(e,t),e.prototype.onLoad=function(){u.default.traverseNodes(this.node,this.m_ui)},e.prototype.start=function(){u.default.addClickEvent(this.node,function(){this.node.removeFromParent()},this)},e.prototype.initData=function(t){var e=this;if(t){s.tcLog.log("UIDetailTip",t),u.default.traverseNodes(this.node,this.m_ui),this.info=t;var o=t.dataArr;this.m_ui.lb_tiptxt.getComponent(cc.Label).string=c.tcI18n.i18nLabel("History.HistoryBetSize")+" x "+c.tcI18n.i18nLabel("History.HistoryBetLevel")+" x "+c.tcI18n.i18nLabel("History.HistoryTipsPayout"),this.m_ui.lab_gongshi.getComponent(cc.Label).string=a.currency.formatNoSymbol(o.bet_size)+" x "+o.bet_multiple+" x "+this.itemScore[t.itemData.symbol],this.node.getChildByName("bg_corner4").active=!1,this.scheduleOnce(function(){e.node.getChildByName("bg_corner4").active=!0;var o=u.default.convertSpaceAR(t.item,e.node);o.set(new cc.Vec3(o.x,o.y-116,o.z)),e.node.getChildByName("bg_corner4").setPosition(o)},.06)}},r([h],e)}(l.BaseView));o.UIDetailTip=p,cc._RF.pop()},{"../../../../../script/framework/i18n/i18n":void 0,"../../../../../script/framework/log/log":void 0,"../../../../../script/pkg/currency":void 0,"./BaseView":"BaseView","./CocosUtil":"CocosUtil"}],UIHisDetail:[function(t,e,o){"use strict";cc._RF.push(e,"f5d7b2xFABLpqRKodlZYEid","UIHisDetail");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c},c=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(i,r){function c(t){try{a(n.next(t))}catch(e){r(e)}}function s(t){try{a(n.throw(t))}catch(e){r(e)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(c,s)}a((n=n.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var o,n,i,r,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(t){return function(e){return a([t,e])}}function a(r){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return c.label++,{value:r[1],done:!1};case 5:c.label++,n=r[1],r=[0];continue;case 7:r=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){c=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){c.label=r[1];break}if(6===r[0]&&c.label<i[1]){c.label=i[1],i=r;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(r);break}i[2]&&c.ops.pop(),c.trys.pop();continue}r=e.call(t,c)}catch(s){r=[6,s],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.UIHisDetail=void 0;var a=t("../../../../../script/framework/i18n/i18n"),l=t("../../../../../script/framework/log/log"),u=t("../../../../../script/pkg/currency"),d=t("../script/PgEvent"),h=t("./BaseView"),p=t("./CocosUtil"),f=t("./CompHisPage"),g=t("./DateUtil"),y=t("./RecordMgr"),v=t("./UIDetailTip"),m=t("./UIhistory"),b=cc._decorator,_=b.ccclass,S=b.property,B=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isAnim=!1,e._ddIndex=0,e._curIdx=0,e._detailData=null,e._data=null,e._expanded=!1,e._beforeData=null,e.startTouchPosition=cc.Vec2.ZERO,e.character=cc.Vec2.ZERO,e.pages=[],e._initedFL=!1,e}return i(e,t),e.prototype.onLoad=function(){p.default.traverseNodes(this.node,this.m_ui),this.m_ui.btn_pre.active=!1,this.m_ui.btn_next.active=!1,this.m_ui.expand_arrow.active=!1,this.m_ui.pan_frees.setPosition(cc.v3(0,1800,0)),this.setExpanded(!1),this.m_ui.aniRoot.opacity=1,cc.tween(this.node).delay(.5).call(function(){}).start(),this.m_ui.load_err.active=!1,this.m_ui.lb_title.color=m.UIhistory.themeColor,this.m_ui.expand_arrow.color=m.UIhistory.themeColor,this.m_ui.btn_close1.color=m.UIhistory.themeColor,this.m_ui.arrow_pre.color=m.UIhistory.themeColor,this.m_ui.arrow_next.color=m.UIhistory.themeColor},e.prototype.start=function(){var t=this;this.m_ui.detailBG.active=!1,this.m_ui.detailBG.on(cc.Node.EventType.TOUCH_END,function(){cc.systemEvent.emit(d.pgGameEvent.ui_close_hisdetail_tip),t.curcloneTip&&t.curcloneTip.isValid&&(t.curcloneTip.destroy(),t.curcloneTip=null)}),p.default.addClickEvent(this.m_ui.btn_close,function(){cc.Tween.stopAllByTarget(this.node),cc.systemEvent.emit(d.pgGameEvent.open_history_view),cc.systemEvent.emit(d.pgGameEvent.close_history_detail)},this),p.default.addClickEvent(this.m_ui.btn_pre,function(){var e=t._ddIndex;--e<0&&(e=0),t.turnPage(e)},this),p.default.addClickEvent(this.m_ui.btn_next,function(){var e=t._ddIndex;e++;var o=t.getTotalNum();e>o-1&&(e=o-1),t.turnPage(e)},this),p.default.addClickEvent(this.m_ui.btn_expand,function(){t._data.length<=1||t.setExpanded(!t._expanded)},this),p.default.addClickEvent(this.m_ui.btnClosePanFree,function(){t.setExpanded(!1)},this),p.default.addClickEvent(this.m_ui.retry,function(){return c(t,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return this.m_ui.load_err.active=!1,this.isAnim=!1,[4,this.waitAnim(!1)];case 1:return t.sent(),this.before(this._beforeData),[2]}})})},this),p.default.addClickEvent(this.m_ui.err_close,function(){cc.Tween.stopAllByTarget(t.node),cc.systemEvent.emit(d.pgGameEvent.open_history_view),cc.systemEvent.emit(d.pgGameEvent.close_history_detail)},this),cc.systemEvent.on(d.pgGameEvent.ui_show_hisdetail_tip,this.onShowDetailTip,this),cc.systemEvent.on(d.pgGameEvent.ui_close_hisdetail_tip,this.onHideDetailTip,this),this.scheduleOnce(function(){t.m_ui.aniRoot.opacity=255}),cc.systemEvent.on(d.pgGameEvent.close_history_detail,this.onCloseDetailView,this),this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this)},e.prototype.onTouchStart=function(t){this.startTouchPosition=t.getLocation()},e.prototype.onTouchMove=function(t){var e=t.getDelta();if((e.x>10||e.x<-10||e.y>10||e.y<-10)&&(this.character.x+=e.x,this.character.y+=e.y,(this.character.y>200||this.character.y<-200)&&(this.character=cc.Vec2.ZERO),this.character.x>200||this.character.x<-200)){var o=this._ddIndex;if(this.character.x>200)--o<0?(o=0,this.onCloseDetailView()):this.turnPage(o);else{o++;var n=this.getTotalNum();o>n-1?o=n-1:this.turnPage(o)}this.character=cc.Vec2.ZERO}},e.prototype.onTouchEnd=function(){this.startTouchPosition=cc.Vec2.ZERO},e.prototype.onCloseDetailView=function(){var t=this;cc.tween(this.node).to(.3,{position:cc.v3(this.node.width,0,0)}).call(function(){t.node.removeFromParent()}).start()},e.prototype.before=function(t){return c(this,void 0,void 0,function(){var e;return s(this,function(o){switch(o.label){case 0:return l.tcLog.log("selectOrder:",t),this._data=t,this._beforeData=t,this.waitAnim(!1),[4,y.default.getInstance().pullDetail(t.createTime,t.order,t.groupId)];case 1:return(e=o.sent())[0]?(this.onDetailData(e),[2]):[2]}})})},e.prototype.setExpanded=function(t){var e=this;this._expanded=t,this.m_ui.expand_arrow.scaleY=t?-1:1,t?(this.m_ui.pan_frees.active=t,cc.tween(this.m_ui.pan_frees).to(.4,{position:cc.v3(0,-59,0)}).call(function(){e.m_ui.pan_frees.getComponent(cc.Widget).enabled=!0}).start(),this.initFreeList(),this.highSelect()):cc.tween(this.m_ui.pan_frees).to(.4,{position:cc.v3(0,1800,0)}).call(function(){e.m_ui.pan_frees.active=t}).start()},e.prototype.highSelect=function(){for(var t=0;t<this.m_ui.cont_frees.children.length;t++){var e=this.m_ui.cont_frees.children[t];t==this._curIdx?(e.getChildByName("lb_free_rmn").color=m.UIhistory.themeColor,e.getChildByName("lb_free_gld").color=m.UIhistory.themeColor):(e.getChildByName("lb_free_rmn").color=cc.color(255,255,255,255),e.getChildByName("lb_free_gld").color=cc.color(255,255,255,255))}},e.prototype.onShowDetailTip=function(t,e){if(!(this.curcloneTip&&this.curcloneTip.isValid||!e)){this.m_ui.detailBG.active=!0;var o=cc.instantiate(this.detailTipPeb);o.active=!0,this.curcloneTip=o,o.getComponent(v.UIDetailTip).initData(e),t.removeAllChildren(),t.addChild(o)}},e.prototype.onHideDetailTip=function(){this.m_ui.detailBG.active=!1},e.prototype.onDetailData=function(t){if(this._curIdx=0,this._data=t,this._detailData=this._data[this._curIdx].round_list,this._detailData&&this._detailData[this._ddIndex]){this.m_ui.expand_arrow.active=this._data.length>1;var e=g.default.formatTime2(this._data[this._curIdx].create_timestamp/1e3)+" "+g.default.getGMTString();this.m_ui.lb_title_filter.getComponent(cc.Label).string=e,this.initPages(),this.selectPage(this._curIdx)}},e.prototype.initPages=function(){var t=this.m_ui.pages;this.pages.forEach(function(t){return t.destroy()}),this.pages.length=0;var e=this.getTotalNum();l.tcLog.log("initPages",e);for(var o=0;o<e;o++){var n=cc.instantiate(this.prfPage);t.addChild(n),n.setPosition(810*o,0,0),n.active=0==o,this.pages[o]=n,this.refreshPageData(o)}this.waitAnim(!0)},e.prototype.getTotalNum=function(){var t=0;return this._data.forEach(function(e){t+=e.round_list.length}),t},e.prototype.findCurIdx=function(t){for(var e=0,o=0;o<this._data.length;o++){var n=e+this._data[o].round_list.length;if(t<n)return o;e=n}return this._data.length-1},e.prototype.initFreeList=function(){var t=this;if(!this._initedFL){this._initedFL=!0;for(var e=this._data.length-1,o=function(o){var i=n.m_ui.cont_frees.children[o];i?i.getChildByName("lb_free_rmn").getComponent(cc.Label).string=a.tcI18n.i18nLabel("FortuneRabbitHistory.HistoryDetailItemPrefabFreeSpin")+": "+(o+1)+"/"+(e+1):((i=cc.instantiate(n.m_ui.cont_frees.children[0])).parent=n.m_ui.cont_frees,i.getChildByName("lb_free_rmn").getComponent(cc.Label).string=a.tcI18n.i18nLabel("FortuneRabbitHistory.HistoryDetailItemPrefabFreeSpin")+": "+(o+1)+"/"+(e+1)),l.tcLog.log("initFreeList:",o,"  ",n._data[o].round_list[0].player_win_lose);var r=n._data[o].round_list[0].player_win_lose<0?"-":"";i.getChildByName("lb_free_gld").getComponent(cc.Label).string=0==o?r+u.currency.formatWithSymbol(Math.abs(n._data[o].round_list[0].player_win_lose)):u.currency.formatWithSymbol(n._data[o].round_list[0].player_win_lose),p.default.addClickEvent(i,function(){t.selectPage(o),t.setExpanded(!1),t.highSelect()},n,o,.96)},n=this,i=0;i<this._data.length;i++)o(i)}},e.prototype.setTitleName=function(){if(this._data[this._curIdx]){var t=this._data.length-1,e=this._curIdx;this.m_ui.lb_title.getComponent(cc.Label).string=0==t?a.tcI18n.i18nLabel("History.HistoryNormalSpin"):a.tcI18n.i18nLabel("FortuneRabbitHistory.HistoryDetailItemPrefabFreeSpin")+": "+(e+1)+"/"+(t+1)}else this.m_ui.lb_title.getComponent(cc.Label).string=""},e.prototype.refreshPageData=function(t){var e=this.getDetailData(t);l.tcLog.info("refreshPageData ","  pageIdx:",t,"  _curIdx:",this._curIdx,e.data),this.pages[t].getComponent(f.CompHisPage).setData(e.data,e.isFree,e.hasNext)},e.prototype.getDetailData=function(t){for(var e=0,o=0;o<this._data.length;o++){var n=this._data[o],i=e+n.round_list.length;if(t<i)return{data:n.round_list[t-e],isFree:n.free_total_times!=n.free_remain_times,hasNext:0!=n.round_list.length};e=i}},e.prototype.turnPage=function(t){var e=this._ddIndex;this.pages.forEach(function(t){cc.Tween.stopAllByTarget(t),t.active=!1}),cc.warn("turnPage"," len:",this.pages.length,"curIdx:",e,"nextIdx:",t);var o=this.pages[e],n=this.pages[t];o.active=!0,n.active=!0;var i=o.width;t>e?(o.setPosition(0,o.position.y,o.position.z),n.setPosition(i,n.position.y,n.position.z),cc.tween(o).by(.4,{position:cc.v3(-i,0,0)},{easing:cc.easing.cubicOut}).call(function(){cc.Tween.stopAllByTarget(o),o.active=!1}).start(),cc.tween(n).by(.4,{position:cc.v3(-i,0,0)},{easing:cc.easing.cubicOut}).start()):(o.setPosition(0,o.position.y,o.position.z),n.setPosition(-i,n.position.y,n.position.z),cc.tween(o).by(.4,{position:cc.v3(i,0,0)},{easing:cc.easing.cubicOut}).call(function(){cc.Tween.stopAllByTarget(o),o.active=!1}).start(),cc.tween(n).by(.4,{position:cc.v3(i,0,0)},{easing:cc.easing.cubicOut}).start()),this._ddIndex=t,this.m_ui.btn_pre.active=0!=this._ddIndex,this.m_ui.btn_next.active=this._ddIndex!=this.getTotalNum()-1,this._curIdx=this.findCurIdx(this._ddIndex),this.setTitleName(),this.getDetailData(this._curIdx)},e.prototype.findIndexZore=function(t){for(var e=0,o=0;o<this._data.length;o++){var n=this._data[o];if(o==t)break;e+=n.round_list.length}return e},e.prototype.selectPage=function(t){this._ddIndex=this.findIndexZore(t),console.warn("selectPage",this._ddIndex,t);var e=this.pages[this._ddIndex];e&&(this.pages.forEach(function(t){cc.Tween.stopAllByTarget(t),t.active=!1}),e.active=!0,this._curIdx=t,this.m_ui.btn_pre.active=0!=this._ddIndex,this.m_ui.btn_next.active=this._ddIndex!=this.getTotalNum()-1,console.warn("\u603b\u9875\u6570",this.getTotalNum()-1,this._ddIndex),e.position=e.position.set(new cc.Vec3(0,e.position.y,e.position.z)),this.setTitleName(),this.getDetailData(this._curIdx))},e.prototype.waitAnim=function(t){var e=this;return new Promise(function(o){e.m_ui.loadtip.active=!0;var n=e.m_ui.loadtip;cc.Tween.stopAllByTarget(n),n.opacity=255,t?cc.tween(n).to(.2,{opacity:0}).call(function(){o()}).start():(n.opacity=0,cc.tween(n).to(.2,{opacity:255}).delay(.5).call(function(){o()}).start())})},r([S(cc.Prefab)],e.prototype,"prfPage",void 0),r([S(cc.Prefab)],e.prototype,"detailTipPeb",void 0),r([S(cc.Boolean)],e.prototype,"isAnim",void 0),r([_],e)}(h.BaseView);o.UIHisDetail=B,cc._RF.pop()},{"../../../../../script/framework/i18n/i18n":void 0,"../../../../../script/framework/log/log":void 0,"../../../../../script/pkg/currency":void 0,"../script/PgEvent":"PgEvent","./BaseView":"BaseView","./CocosUtil":"CocosUtil","./CompHisPage":"CompHisPage","./DateUtil":"DateUtil","./RecordMgr":"RecordMgr","./UIDetailTip":"UIDetailTip","./UIhistory":"UIhistory"}],UIhistory:[function(t,e,o){"use strict";cc._RF.push(e,"54713LNUxxE94a4/8MxcMmz","UIhistory");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c},c=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(i,r){function c(t){try{a(n.next(t))}catch(e){r(e)}}function s(t){try{a(n.throw(t))}catch(e){r(e)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(c,s)}a((n=n.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var o,n,i,r,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(t){return function(e){return a([t,e])}}function a(r){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return c.label++,{value:r[1],done:!1};case 5:c.label++,n=r[1],r=[0];continue;case 7:r=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){c=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){c.label=r[1];break}if(6===r[0]&&c.label<i[1]){c.label=i[1],i=r;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(r);break}i[2]&&c.ops.pop(),c.trys.pop();continue}r=e.call(t,c)}catch(s){r=[6,s],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.UIhistory=void 0;var a=t("../../../../../script/Game1810/script/VerifyBar"),l=t("../../../../../script/config/config"),u=t("../../../../../script/descriptor/descriptor"),d=t("../../../../../script/framework/i18n/i18n"),h=t("../../../../../script/framework/log/log"),p=t("../../../../../script/framework/res/res"),f=t("../../../../../script/pkg/currency"),g=t("../../../../update-v2/script/api/api-config"),y=t("../script/PgEvent"),v=t("./BaseView"),m=t("./CocosUtil"),b=t("./DateUtil"),_=t("./RecordMgr"),S=t("./StringUtil"),B=t("./UIHisDetail"),w=cc._decorator,C=w.ccclass,E=w.property,T=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.itemPre=null,e.fistTip=null,e.holdScrollviewPosition=cc.Vec2.ZERO,e.isFirstRequest=!0,e.isFirstOpen=!0,e}var o;return i(e,t),o=e,e.prototype.onLoad=function(){h.tcLog.log("onLoad"),m.default.traverseNodes(this.node,this.m_ui),this.m_ui.loadtipBig=cc.find("aniRoot/loadtipBig",this.node),this.m_ui.content=cc.find("aniRoot/ScrollView/view/content",this.node),this.m_ui.lb_title_filter=cc.find("aniRoot/top/lb_title_filter",this.node),this.m_ui.lb_filter=cc.find("aniRoot/bottom/Node/lb_filter",this.node),this.m_ui.load_err=cc.find("aniRoot/load_err",this.node),this.m_ui.retry=cc.find("aniRoot/load_err/retry",this.node),this.m_ui.retry.addComponent(cc.Button),this.m_ui.err_close=cc.find("aniRoot/load_err/err_close",this.node),this.m_ui.err_close.addComponent(cc.Button),this.m_ui.lb_record_cnt=cc.find("aniRoot/bottom/Node/lb_record_cnt",this.node),this.m_ui.lb_total_bet=cc.find("aniRoot/bottom/Node/lb_total_bet",this.node),this.m_ui.lb_total_profit=cc.find("aniRoot/bottom/Node/lb_total_profit",this.node),this.m_ui.lb_tip_none=cc.find("aniRoot/lb_tip_none",this.node),this.m_ui.scrollView=cc.find("aniRoot/ScrollView",this.node),this.m_ui.scrollBar=cc.find("aniRoot/ScrollView/scrollBar",this.node),this.m_ui.bottom_f=cc.find("aniRoot/bottom_f",this.node),this.m_ui.load_err.active=!1,cc.systemEvent.on(y.pgGameEvent.ref_record_filter,this.onSearchFilterChg,this),cc.systemEvent.on(y.pgGameEvent.reset_history_view,this.resetHistoryView,this),this.m_ui.ScrollView.on("scrolling",this.scrollViewEventHandler,this),this.m_ui.scrollBar.on("touchmove",this.scrollbarEventHandler,this),cc.systemEvent.on(y.pgGameEvent.open_history_view,this.detailPageBackAction,this),this.m_ui.lab_bet.getComponent(cc.Label).string=d.tcI18n.i18nLabel("History.HistoryMainPagePayout")+"("+f.currency.getSymbol()+")",this.m_ui.lab_profit.getComponent(cc.Label).string=d.tcI18n.i18nLabel("History.HistoryRecordTotalWin")+"("+f.currency.getSymbol()+")",this.m_ui.lab_timezone.getComponent(cc.Label).string=b.default.getGMTString(),g.apiConfig.isHistoryFromHtml&&(this.isFirstOpen=!1)},e.prototype.scrollViewEventHandler=function(t){if(!_.default.getInstance().isFullData){var e=t.getComponent(cc.ScrollView).content.y,o=_.default.getInstance()._shi_len,n=_.default.getInstance()._loaded;if(e>=116*(o-9)&&!n){h.tcLog.log("solly:",e," _shi_len:",o," _loaded:",n),_.default.getInstance()._loaded=!0,0==this.holdScrollviewPosition.y&&(this.holdScrollviewPosition=this.m_ui.scrollView.getPosition());var i=cc.v2(this.holdScrollviewPosition.x,this.holdScrollviewPosition.y+116);this.m_ui.scrollView.setPosition(i),this.getData()}}},e.prototype.scrollbarEventHandler=function(t){var e=this.m_ui.scrollView.getComponent(cc.ScrollView);if(e.getMaxScrollOffset().y>0){var o=t.getLocationY()/this.m_ui.scrollView.height;e.scrollTo(cc.v2(0,o))}},e.prototype.detailPageBackAction=function(){h.tcLog.info("UIhistory detailPageBackAction"),this.m_ui.PgVerify.getComponent(a.default).setIsFoled(!1)},e.prototype.start=function(){var t,e;return c(this,void 0,void 0,function(){var n=this;return s(this,function(i){switch(i.label){case 0:return h.tcLog.log("start"),[4,this.waitAnim(!1)];case 1:return i.sent(),this.fistTip.active=!1,0==o.isFristReqRecord&&(o.isFristReqRecord=!0,this.fistTip.active=!0),null===(t=this.m_ui.retry)||void 0===t||t.on("click",function(){return c(n,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return this.m_ui.load_err.active=!1,[4,this.waitAnim(!1)];case 1:return t.sent(),this.getData(),[2]}})})}),null===(e=this.m_ui.err_close)||void 0===e||e.on("click",function(){return c(n,void 0,void 0,function(){return s(this,function(){return cc.systemEvent.emit(y.pgGameEvent.close_history_view),this.isFirstRequest=!0,[2]})})}),m.default.addClickEvent(this.m_ui.btn_filter,function(){cc.systemEvent.emit(y.pgGameEvent.open_his_selectdate_view)},this),[2]}})})},e.prototype.onEnable=function(){h.tcLog.log("onEnable"),this.isFirstRequest&&(this.initList(),_.default.getInstance().setFilter(1,1)),g.apiConfig.isHistoryFromHtml=!0},e.prototype.onDestroy=function(){this.unschedule(this.getData)},e.prototype.waitAnim=function(t){var e=this;return new Promise(function(o){o(),e.m_ui.loadtipBig.active=!0,cc.Tween.stopAllByTarget(e.m_ui.loadtipBig.opacity),e.m_ui.loadtipBig.opacity=255,t?cc.tween(e.m_ui.loadtipBig).delay(.3).to(.2,{opacity:0}).call(function(){o()}).start():cc.tween(e.m_ui.loadtipBig).call(function(){o()}).start()})},e.prototype.initList=function(){this.m_ui.content.removeAllChildren()},e.prototype.onSearchFilterChg=function(){return c(this,void 0,void 0,function(){var t,e;return s(this,function(o){switch(o.label){case 0:return h.tcLog.info("onSearchFilterChg"),this.initList(),1==_.default.getInstance().filterFrom?(this.m_ui.lb_title_filter.getComponent(cc.Label).string=d.tcI18n.i18nLabel("History.HistoryCalenderToday"),this.m_ui.lb_filter.getComponent(cc.Label).string=d.tcI18n.i18nLabel("History.HistoryCalenderToday")):7==_.default.getInstance().filterFrom?(this.m_ui.lb_title_filter.getComponent(cc.Label).string=d.tcI18n.i18nLabel("History.HistoryCalenderWeek"),this.m_ui.lb_filter.getComponent(cc.Label).string=d.tcI18n.i18nLabel("History.HistoryCalenderWeek")):(t=b.default.formatDay(_.default.getInstance().filterFrom,"/"),e=b.default.formatDay(_.default.getInstance().filterTo,"/"),this.m_ui.lb_title_filter.getComponent(cc.Label).string=t+" - "+e,this.m_ui.lb_filter.getComponent(cc.Label).string=t+" - "+e),0!=_.default.getInstance()._offset?[3,2]:[4,this.waitAnim(!1)];case 1:o.sent(),o.label=2;case 2:return this.getData(),[2]}})})},e.prototype.resetHistoryView=function(){return c(this,void 0,void 0,function(){return s(this,function(){return this.isFirstRequest=!0,[2]})})},e.prototype.getData=function(){return c(this,void 0,void 0,function(){var t,e=this;return s(this,function(o){switch(o.label){case 0:return this.m_ui.loadtip_get_all.active=!0,m.default.wait(2),[4,this.refGetData()];case 1:return t=o.sent(),this.m_ui.loadtip_get_all.active=!1,cc.tween(this.m_ui.loadtipBig).to(.2,{opacity:0}).call(function(){e.isFirstRequest&&(e.isFirstRequest=!1,e.m_ui.PgVerify.getComponent(a.default).setIsFoled(!g.apiConfig.isHistoryFromHtml)),g.apiConfig.isHistoryFromHtml=!1}).start(),t&&this.onReqHistory(t),[2,t]}})})},e.prototype.refGetData=function(){return c(this,void 0,Promise,function(){var t,e,o;return s(this,function(n){switch(n.label){case 0:return[4,_.default.getInstance().pullData()];case 1:return t=n.sent(),h.tcLog.log("refGetData",t),0!=this.holdScrollviewPosition.y&&cc.tween(this.m_ui.scrollView).delay(.3).to(.35,{position:cc.v3(this.holdScrollviewPosition)}).start(),t?(e=t&&t.data&&t.data.count||0,_.default.getInstance()._dataCount=e,t&&t.data&&t.data.list?(h.tcLog.log("_offset:",_.default.getInstance()._offset),_.default.getInstance()._shi_len+=t.data.list.length,_.default.getInstance()._offset+=1,_.default.getInstance().appendDatas(t),o=_.default.getInstance().getDataList().length,h.tcLog.log("len",o),[2,t]):[2,t]):[2,null]}})})},e.prototype.onReqHistory=function(t){cc.systemEvent.emit(y.pgGameEvent.ui_req_loading_complete),this.fistTip.active=!1,_.default.getInstance()._loaded=!1,_.default.getInstance().isFullData?this.m_ui.lb_tip_get_all.active=!0:this.m_ui.lb_tip_get_all.active=!1;var e=t.data;this.m_ui.lb_record_cnt.getComponent(cc.Label).string=(e&&e.count||0)+" "+d.tcI18n.i18nLabel("History.HistoryRecords"),this.m_ui.lb_total_bet.getComponent(cc.Label).string=f.currency.formatWithSymbol(e&&e.bet||0),this.m_ui.lb_total_profit.getComponent(cc.Label).string=f.currency.formatWithSymbol(e&&e.win||0);var o=e&&e.count||0;this.m_ui.lb_tip_none.active=1==_.default.getInstance()._offset&&o<=0,1==_.default.getInstance()._offset&&o<=0&&(this.m_ui.lb_tip_get_all.active=!1);for(var n=0;n<e.list.length;n++){var i=cc.instantiate(this.itemPre);this.m_ui.content.addChild(i),i.getComponent(k)||i.addComponent(k);var r=i.getComponent(k);r&&r.setGameID(e.list[n],n)}this.isFirstOpen},e.isFristReqRecord=!1,e.themeColor=cc.color(255,178,102,255),r([E(cc.Prefab)],e.prototype,"itemPre",void 0),r([E(cc.Node)],e.prototype,"fistTip",void 0),o=r([C],e)}(v.BaseView);o.UIhistory=T;var k=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.holdIndex=0,e}return i(e,t),e.prototype.onEnable=function(){this.node.on(cc.Node.EventType.MOUSE_ENTER,this.onMouseEnter,this),this.node.on(cc.Node.EventType.MOUSE_LEAVE,this.onMouseLeave,this)},e.prototype.onDestroy=function(){h.tcLog.info("====>>>HistoryItem onDestroy holdIndex = ",this.holdIndex)},e.prototype.onMouseEnter=function(){this.node.color=cc.color(40,40,52,255)},e.prototype.onMouseLeave=function(){this.node.color=this.holdIndex%2==0&&cc.color(52,52,63,255)||cc.color(48,48,60,255)},e.prototype.setGameID=function(t,e){var o,n=this;this.holdData=t,this.holdIndex=e;var i=cc.find("conts",this.node),r=i.getChildByName("layout"),a=r.getChildByName("other");a.getChildByName("free_ra").color=T.themeColor,a.getChildByName("lucky_neko_flag").color=T.themeColor,a.getChildByName("continuous").getChildByName("icon").color=T.themeColor,i.getChildByName("lb_time").getComponent(cc.Label).string=b.default.formatTime1(t.createTime/1e3,2),r.getChildByName("lb_order").getComponent(cc.Label).string=S.default.lineStr(t.order,9),i.getChildByName("lb_bet").getComponent(cc.Label).string=f.currency.formatNoSymbol(t.bet);var u=t.win,d=i.getChildByName("lb_profit").getComponent(cc.Label);d.string=f.currency.formatNoSymbol(t.win),d.node.color=u>0&&cc.color(255,255,255,255)||cc.color(190,190,190,255),this.node.color=e%2==0&&cc.color(52,52,63,255)||cc.color(48,48,60,255),a.getChildByName("free_ra").active=t.groupId.length>0,a.getChildByName("lucky_neko_flag").active=t.isCash,a.active=t.groupId.length>0||t.isCash,null===(o=this.node)||void 0===o||o.on("click",function(){return c(n,void 0,void 0,function(){var e,o,n,i;return s(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,p.tcRes.load("PGGameRes",cc.Prefab,"prefab/history/UIHisDetail")];case 1:return e=r.sent(),(o=cc.instantiate(e)).setParent(l.config.uiNode.dialog),n=o.getComponent(B.UIHisDetail),cc.tween(o).set({position:cc.v3(o.width,0,0)}).to(.3,{position:cc.v3(0,0,0)}).start(),n&&n.before(t),[3,3];case 2:return i=r.sent(),h.tcLog.error("PgGameControlPanellogic show onClickBtnHistory error,"+i),[3,3];case 3:return[2]}})})})},e.prototype.openDetail=function(){return c(this,void 0,void 0,function(){var t,e,o,n;return s(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,p.tcRes.load("PGGameRes",cc.Prefab,"prefab/history/UIHisDetail")];case 1:return t=i.sent(),(e=cc.instantiate(t)).setParent(l.config.uiNode.dialog),o=e.getComponent(B.UIHisDetail),cc.tween(e).set({position:cc.v3(e.width,0,0)}).to(.3,{position:cc.v3(0,0,0)}).start(),o&&o.before(this.holdData),[3,3];case 2:return n=i.sent(),h.tcLog.error("PgGameControlPanellogic show onClickBtnHistory error,"+n),[3,3];case 3:return[2]}})})},r([u.throttle(300)],e.prototype,"openDetail",null),e}(cc.Component);cc._RF.pop()},{"../../../../../script/Game1810/script/VerifyBar":void 0,"../../../../../script/config/config":void 0,"../../../../../script/descriptor/descriptor":void 0,"../../../../../script/framework/i18n/i18n":void 0,"../../../../../script/framework/log/log":void 0,"../../../../../script/framework/res/res":void 0,"../../../../../script/pkg/currency":void 0,"../../../../update-v2/script/api/api-config":void 0,"../script/PgEvent":"PgEvent","./BaseView":"BaseView","./CocosUtil":"CocosUtil","./DateUtil":"DateUtil","./RecordMgr":"RecordMgr","./StringUtil":"StringUtil","./UIHisDetail":"UIHisDetail"}],UIselectdate:[function(t,e,o){"use strict";cc._RF.push(e,"343577xSFxN5Jmpt/Lca9ks","UIselectdate");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0}),o.UIselectdate=void 0;var c=t("../script/PgEvent"),s=t("./BaseView"),a=t("./CocosUtil"),l=t("./RecordMgr"),u=t("./UIhistory"),d=cc._decorator,h=d.ccclass,p=(d.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.onLoad=function(){a.default.traverseNodes(this.node,this.m_ui),a.default.setModal(this.node,!0),this.m_ui.lb_title.color=u.UIhistory.themeColor,this.m_ui.close.color=u.UIhistory.themeColor},e.prototype.start=function(){a.default.addClickEvent(this.m_ui.btn_close,function(){cc.systemEvent.emit(c.pgGameEvent.close_his_selectdate_view)},this),a.default.addClickEvent(this.m_ui.btn_today,function(){l.default.getInstance().setFilter(1,1),cc.systemEvent.emit(c.pgGameEvent.close_his_selectdate_view)},this),a.default.addClickEvent(this.m_ui.btn_7day,function(){l.default.getInstance().setFilter(7,7),cc.systemEvent.emit(c.pgGameEvent.close_his_selectdate_view)},this),a.default.addClickEvent(this.m_ui.btn_selfdef,function(){cc.systemEvent.emit(c.pgGameEvent.open_his_dateSelect_view)},this)},e.prototype.show=function(){this.node.active=!0;var t=l.default.getInstance().filterFrom;this.m_ui.lb_7day_title.color=7==t?u.UIhistory.themeColor:cc.color(175,175,175,255),this.m_ui.lb_today_title.color=1==t?u.UIhistory.themeColor:cc.color(175,175,175,255),this.m_ui.lb_selfdef_title.color=1!=t&&7!=t?u.UIhistory.themeColor:cc.color(175,175,175,255)},r([h],e)}(s.BaseView));o.UIselectdate=p,cc._RF.pop()},{"../script/PgEvent":"PgEvent","./BaseView":"BaseView","./CocosUtil":"CocosUtil","./RecordMgr":"RecordMgr","./UIhistory":"UIhistory"}],btnSpineRotateAni:[function(t,e,o){"use strict";cc._RF.push(e,"bbfd2HMQ49JHqeEaJ+CMzEr","btnSpineRotateAni");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,s=c.ccclass,a=(c.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.startRotate=function(t){void 0===t&&(t=6),cc.Tween.stopAllByTarget(this.node),cc.tween(this.node).by(t,{angle:-360}).union().repeatForever().start()},e.prototype.onDisable=function(){cc.Tween.stopAllByTarget(this.node)},e.prototype.stopRotate=function(){cc.Tween.stopAllByTarget(this.node)},r([s],e)}(cc.Component));o.default=a,cc._RF.pop()},{}],btnSpineRotateSpecialAni:[function(t,e,o){"use strict";cc._RF.push(e,"70d977/JU5LBqeYFLRRPpOH","btnSpineRotateSpecialAni");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,s=c.ccclass,a=(c.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.onEnable=function(){var t=this;cc.tween(this.node).to(.5,{angle:-360}).call(function(){t.node&&(t.node.angle=0)}).union().repeatForever().start()},r([s],e)}(cc.Component));o.default=a,cc._RF.pop()},{}],pgGameBetSettingView:[function(t,e,o){"use strict";cc._RF.push(e,"f4229yHWBBOO6V0FAsj2AR3","pgGameBetSettingView");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c},c=this&&this.__spreadArrays||function(){for(var t=0,e=0,o=arguments.length;e<o;e++)t+=arguments[e].length;var n=Array(t),i=0;for(e=0;e<o;e++)for(var r=arguments[e],c=0,s=r.length;c<s;c++,i++)n[i]=r[c];return n};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../../../../../script/app/env"),a=t("../../../../../script/framework/audio/audio"),l=t("../../../../../script/pkg/currency"),u=cc._decorator,d=u.ccclass,h=(u.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.payTimes=0,e.betSizes=[],e.betTimes=[],e.betTotals=[],e.itemHight=0,e.curBetSizeIndex=0,e.curBetTimesIndex=0,e.curBetTotalIndex=0,e.clickBtnSound=a.AudioClipName.CLICKBTN,e.isFirst=!0,e}return i(e,t),e.prototype.onLoad=function(){this.btnClose=cc.find("body/btnClose",this.node),this.body=cc.find("body",this.node),this.btnOutClose=cc.find("btnOutClose",this.node),this.labelCurBonus=cc.find("body/nodeBonus/label",this.node).getComponent(cc.Label),this.labelCurBet=cc.find("body/nodeBet/label",this.node).getComponent(cc.Label),this.labelcurWin=cc.find("body/nodeWin/label",this.node).getComponent(cc.Label),this.labelPayTimes=cc.find("body/scrollView/curSelectNote/labelBetTimes",this.node).getComponent(cc.Label),this.scrollViewBetSize=cc.find("body/scrollView/betSize",this.node).getComponent(cc.ScrollView),this.scrollViewBetTimes=cc.find("body/scrollView/betTimes",this.node).getComponent(cc.ScrollView),this.scrollViewBetTotal=cc.find("body/scrollView/betTotal",this.node).getComponent(cc.ScrollView),this.nodeBetSizeItemConatiner=cc.find("body/scrollView/betSize/view/content",this.node),this.nodeBetTimesItemConatiner=cc.find("body/scrollView/betTimes/view/content",this.node),this.nodeBetTotalItemConatiner=cc.find("body/scrollView/betTotal/view/content",this.node),this.nodelItemOtherScroll=cc.find("body/scrollView/itemSelect",this.node),this.nodeItemTotalScroll=cc.find("body/scrollView/itemTotal",this.node),this.bg=cc.find("bg",this.node),this.stopBtnBetMask=cc.find("body/stopBtnMask",this.node),this.stopBtn2Mask=cc.find("body/stopBtn2Mask",this.node),this.btnMaxBet=cc.find("body/BtnMaxBet",this.node),this.btnOk=cc.find("body/BtnOk",this.node),this.loadingBg=cc.find("loadingBg",this.node),this.loadtip=cc.find("loadingBg/loadtip",this.node),this.mask=cc.find("mask",this.node),this.itemHight=this.nodelItemOtherScroll.getContentSize().height,this.bindClickEvent()},e.prototype.bindClickEvent=function(){var t,e,o,n=this;null===(t=this.btnClose)||void 0===t||t.on("click",function(){a.uAudio.getInstance().playEffect(n.clickBtnSound),n.moveOut()}),this.btnOutClose.on("click",function(){a.uAudio.getInstance().playEffect(n.clickBtnSound),n.moveOut()}),null===(e=this.btnMaxBet)||void 0===e||e.on("click",function(){a.uAudio.getInstance().playEffect(n.clickBtnSound),n.changeBetSize(n.betSizes.length-3,.2,!1),n.changeBetTimes(n.betTimes.length-3)}),null===(o=this.btnOk)||void 0===o||o.on("click",function(){a.uAudio.getInstance().playEffect(n.clickBtnSound),n.betChangeCallback&&setTimeout(function(){n.betChangeCallback(n.curBetTotalIndex-2||0,n.curBetTimesIndex-2||0,n.curBetSizeIndex-2||0)},300),n.moveOut()})},e.prototype.moveOut=function(){var t=this;cc.tween(this.body).to(.24,{position:cc.v3(0,-922,0)}).call(function(){cc.tween(t.mask).to(.24,{opacity:0}).call(function(){t.node.active=!1,window.changeTrophiesIconShow&&window.changeTrophiesIconShow(!0)}).start()}).start()},e.prototype.init=function(t,e,o,n,i,r,s){var l,u,d,h,p,f;void 0===n&&(n=0),void 0===s&&(s=a.AudioClipName.CLICKBTN),this.betSizes=t,this.betTimes=e,this.betTotals=new(Array.bind.apply(Array,c([void 0],o))),this.clickBtnSound=s,(l=this.betSizes).push.apply(l,[0,-1]),(u=this.betSizes).unshift.apply(u,[-1,0]),(d=this.betTimes).push.apply(d,[0,-1]),(h=this.betTimes).unshift.apply(h,[-1,0]),(p=this.betTotals).push.apply(p,[0,-1]),(f=this.betTotals).unshift.apply(f,[-1,0]),this.payTimes=n||10,this.labelPayTimes.string=this.payTimes.toString(),this.showBetSizeItems(i),this.showBetTimesItems(r),this.showBetTotalBetItems(),this.bindEvent()},e.prototype.setBetCallback=function(t){this.betChangeCallback=t},e.prototype.bindEvent=function(){var t,e,o,n,i,r;null===(t=this.scrollViewBetSize)||void 0===t||t.node.on("scroll-ended",this.onScorllViewBetSizeScrollEnd,this),null===(e=this.scrollViewBetTimes)||void 0===e||e.node.on("scroll-ended",this.onScorllViewBetTimesScrollEnd,this),null===(o=this.scrollViewBetTotal)||void 0===o||o.node.on("scroll-ended",this.onScorllViewBetTotalScrollEnd,this),null===(n=this.scrollViewBetSize)||void 0===n||n.node.on("scrolling",this.onSelecttingBetValue,this),null===(i=this.scrollViewBetTimes)||void 0===i||i.node.on("scrolling",this.onSelecttingBetValue,this),null===(r=this.scrollViewBetTotal)||void 0===r||r.node.on("scrolling",this.onSelecttingBetValue,this)},e.prototype.show=function(t,e,o,n){var i=this;this.node.active=!0,window.changeTrophiesIconShow&&window.changeTrophiesIconShow(!1),this.curBetSizeIndex=this.betSizes.indexOf(o),this.curBetSizeIndex<2&&(this.curBetSizeIndex=2),this.curBetTimesIndex=this.betTimes.indexOf(n),this.curBetTimesIndex<2&&(this.curBetTimesIndex=2),cc.tween(this.mask).set({opacity:0}).to(.24,{opacity:128}).start(),this.isFirst?(this.isFirst=!1,this.loadingBg.active=!0,this.body.opacity=0,this.bg.opacity=0,cc.tween(this.loadingBg).set({position:cc.v3(0,-922,0)}).to(.24,{position:cc.v3(0,-22,0)}).call(function(){i.scheduleOnce(function(){cc.tween(i.loadtip).set({opacity:255}).to(.24,{opacity:0}).call(function(){i.loadtip.active=!1,i.body.position=cc.v3(0,-22,0),cc.tween(i.body).to(.24,{opacity:255}).call(function(){i.loadingBg.active=!1}).start()}).start()},1)}).start(),this.initScrollViews(t),this.labelCurBonus.string=l.currency.formatWithSymbol(s.env.curGameData.balance),this.labelCurBet.string=l.currency.formatWithSymbol(t),this.labelcurWin.string=l.currency.formatWithSymbol(e)):(this.loadingBg.active=!1,cc.tween(this.bg).set({position:cc.v3(0,-922,0),opacity:255}).to(.24,{position:cc.v3(0,-22,0)}).start(),cc.tween(this.body).set({position:cc.v3(0,-922,0),opacity:0}).to(.24,{position:cc.v3(0,-22,0)}).to(.24,{opacity:255}).call(function(){i.bg.opacity=0}).start(),this.initScrollViews(t),this.labelCurBonus.string=l.currency.formatWithSymbol(s.env.curGameData.balance),this.labelCurBet.string=l.currency.formatWithSymbol(t),this.labelcurWin.string=l.currency.formatWithSymbol(e))},e.prototype.showBetSizeItems=function(t){var e=this;this.betSizes.forEach(function(t,o){var n=cc.instantiate(e.nodelItemOtherScroll);n.active=!0,n.setParent(e.nodeBetSizeItemConatiner),n.getComponent(cc.Label).string=t<0?"  ":0==t?"-":l.currency.formatWithSymbol(t),n.on("click",function(){o>1&&o<e.betSizes.length-2&&(e.checkStopBtnBetMaskStatus(!0),e.onClickToChangeBetSize(o))},e)});var o=this.betSizes.indexOf(t);o<2&&(o=2),this.changeBetSize(o)},e.prototype.showBetTimesItems=function(t){var e=this;this.betTimes.forEach(function(t,o){var n=cc.instantiate(e.nodelItemOtherScroll);n.active=!0,n.setParent(e.nodeBetTimesItemConatiner),n.getComponent(cc.Label).string=t<0?"  ":0==t?"-":t.toString(),n.on("click",function(){o>1&&o<e.betTimes.length-2&&(e.checkStopBtnBetMaskStatus(!0),e.onClickToChangeBetTimes(o))},e)});var o=this.betTimes.indexOf(t);o<2&&(o=2),this.changeBetTimes(o)},e.prototype.showBetTotalBetItems=function(){var t=this;this.betTotals.forEach(function(e,o){var n=cc.instantiate(t.nodeItemTotalScroll);n.active=!0,n.setParent(t.nodeBetTotalItemConatiner),n.getComponent(cc.Label).string=e<0?" ":0==e?"-":l.currency.formatWithSymbol(e),n.on("click",function(){o>1&&o<t.betTotals.length-2&&(t.checkStopBtnBetMaskStatus(!0),t.onClickToChangeBetTotal(o))},t)})},e.prototype.onClickToChangeBetSize=function(t,e){void 0===e&&(e=.2),a.uAudio.getInstance().playEffect(this.clickBtnSound),this.changeBetSize(t)},e.prototype.changeBetSize=function(t,e,o){var n=this;void 0===e&&(e=.2),void 0===o&&(o=!0),this.curBetSizeIndex=t,this.nodeBetSizeItemConatiner.stopAllActions(),cc.tween(this.nodeBetSizeItemConatiner).to(e,{position:cc.v3(0,(t-2)*this.itemHight,0)}).call(function(){o?n.upateBetTotalByBetSizeAndTimes():n.checkStopBtnBetMaskStatus(!1)}).start()},e.prototype.onClickToChangeBetTimes=function(t,e){void 0===e&&(e=.2),a.uAudio.getInstance().playEffect(this.clickBtnSound),this.changeBetTimes(t)},e.prototype.changeBetTimes=function(t,e,o){var n=this;void 0===e&&(e=.2),void 0===o&&(o=!0),this.curBetTimesIndex=t,this.nodeBetTimesItemConatiner.stopAllActions(),cc.tween(this.nodeBetTimesItemConatiner).to(e,{position:cc.v3(0,(t-2)*this.itemHight,0)}).call(function(){o?n.upateBetTotalByBetSizeAndTimes():n.checkStopBtnBetMaskStatus(!1)}).start()},e.prototype.onClickToChangeBetTotal=function(t,e){void 0===e&&(e=.2),a.uAudio.getInstance().playEffect(this.clickBtnSound),this.changeBetTotal(t,e)},e.prototype.changeBetTotal=function(t,e,o){var n=this;void 0===e&&(e=.2),void 0===o&&(o=!0),this.curBetTotalIndex=t,this.btnMaxBet.getComponent(cc.Button).interactable=t!=this.betTotals.length-3,this.btnMaxBet.opacity=t!=this.betTotals.length-3?255:128,cc.tween(this.nodeBetTotalItemConatiner).to(e,{position:cc.v3(0,(t-2)*this.itemHight,0)}).call(function(){o?n.changeBetSizeAndTimesScrollView(t):n.checkStopBtnBetMaskStatus(!1)}).start()},e.prototype.upateBetTotalByBetSizeAndTimes=function(t){void 0===t&&(t=.2);var e=l.currency.accMul(this.betSizes[this.curBetSizeIndex],this.betTimes[this.curBetTimesIndex]);e=l.currency.accMul(e,this.payTimes);var o=this.betSizes[this.curBetSizeIndex]*this.betTimes[this.curBetTimesIndex]*this.payTimes,n=Number.parseFloat(o.toFixed(2)),i=this.betTotals.indexOf(n);i<2&&(i=2),i!=this.curBetTotalIndex&&this.changeBetTotal(i,t,!1)},e.prototype.onScorllViewBetSizeScrollEnd=function(){var t,e=(null===(t=this.scrollViewBetSize)||void 0===t?void 0:t.getContentPosition())||cc.v2(0,0),o=Math.floor(e.y/this.itemHight)+2;o=Math.max(2,o),o=Math.min(this.betSizes.length-2,o),this.checkStopBtnBetMaskStatus(this.curBetSizeIndex!=o),this.changeBetSize(o)},e.prototype.onScorllViewBetTimesScrollEnd=function(){var t,e=(null===(t=this.scrollViewBetTimes)||void 0===t?void 0:t.getContentPosition())||cc.v2(0,0),o=Math.floor(e.y/this.itemHight)+2;o=Math.max(2,o),o=Math.min(this.betTimes.length-2,o),this.checkStopBtnBetMaskStatus(this.curBetTimesIndex!=o),this.changeBetTimes(o)},e.prototype.onScorllViewBetTotalScrollEnd=function(){var t,e=(null===(t=this.scrollViewBetTotal)||void 0===t?void 0:t.getContentPosition())||cc.v2(0,0),o=Math.floor(e.y/this.itemHight)+2;o=Math.max(2,o),o=Math.min(this.betTotals.length-2,o),this.checkStopBtnBetMaskStatus(this.curBetTotalIndex!=o),this.changeBetTotal(o)},e.prototype.changeBetSizeAndTimesScrollView=function(t){for(var e=-1,o=-1,n=2;n<this.betSizes.length-2;++n)for(var i=2;i<this.betTimes.length-2;++i){var r=l.currency.accMul(this.betSizes[n],this.betTimes[i]);if((r=l.currency.accMul(r,this.payTimes))==this.betTotals[t]){e=n,o=i;break}}this.curBetSizeIndex!=e&&e>-1&&this.changeBetSize(e,.2,!1),this.curBetTimesIndex!=o&&o>-1&&this.changeBetTimes(o,.2,!1)},e.prototype.initScrollViews=function(t){var e=l.currency.accMul(this.betSizes[this.curBetSizeIndex],this.betTimes[this.curBetTimesIndex]);if((e=l.currency.accMul(e,this.payTimes))==t)return this.changeBetSize(this.curBetSizeIndex,0,!1),this.changeBetTimes(this.curBetTimesIndex,0,!1),void this.upateBetTotalByBetSizeAndTimes(0);for(var o=!1,n=2;n<this.betSizes.length-2&&!o;++n)for(var i=2;i<this.betTimes.length-2;++i){var r=l.currency.accMul(this.betSizes[n],this.betTimes[i]);if((r=l.currency.accMul(r,this.payTimes))==t){this.curBetSizeIndex=n,this.curBetTimesIndex=i,o=!0;break}}this.curBetSizeIndex<2&&(this.curBetSizeIndex=2),this.curBetTimesIndex<2&&(this.curBetTimesIndex=2),this.changeBetSize(this.curBetSizeIndex,0,!1),this.changeBetTimes(this.curBetTimesIndex,0,!1),this.upateBetTotalByBetSizeAndTimes(0)},e.prototype.onSelecttingBetValue=function(){this.checkStopBtnBetMaskStatus(!0)},e.prototype.checkStopBtnBetMaskStatus=function(t){this.stopBtnBetMask.active=t,this.stopBtn2Mask.active=t,this.btnClose.getComponent(cc.Button).interactable=!t,this.btnClose.opacity=t?128:255},r([d],e)}(cc.Component));o.default=h,cc._RF.pop()},{"../../../../../script/app/env":void 0,"../../../../../script/framework/audio/audio":void 0,"../../../../../script/pkg/currency":void 0}],recorddetail:[function(t,e,o){"use strict";cc._RF.push(e,"9d65bHrsE1JLqNm6GIjjl2F","recorddetail"),Object.defineProperty(o,"__esModule",{value:!0}),o.TItemtype=void 0,function(t){t[t.ITEM_TYPE_NIL=0]="ITEM_TYPE_NIL",t[t.ITEM_TYPE_WILD=1]="ITEM_TYPE_WILD",t[t.ITEM_TYPE_SCATTER=2]="ITEM_TYPE_SCATTER",t[t.ITEM_TYPE_H1=3]="ITEM_TYPE_H1",t[t.ITEM_TYPE_H2=4]="ITEM_TYPE_H2",t[t.ITEM_TYPE_H3=5]="ITEM_TYPE_H3",t[t.ITEM_TYPE_H4=6]="ITEM_TYPE_H4",t[t.ITEM_TYPE_A=7]="ITEM_TYPE_A",t[t.ITEM_TYPE_K=8]="ITEM_TYPE_K",t[t.ITEM_TYPE_Q=9]="ITEM_TYPE_Q",t[t.ITEM_TYPE_J=10]="ITEM_TYPE_J",t[t.ITEM_TYPE_10=11]="ITEM_TYPE_10",t[t.GOLD_MOD=16]="GOLD_MOD",t[t.ITEM_TYPE_H1_GOLD=19]="ITEM_TYPE_H1_GOLD",t[t.ITEM_TYPE_H2_GOLD=20]="ITEM_TYPE_H2_GOLD",t[t.ITEM_TYPE_H3_GOLD=21]="ITEM_TYPE_H3_GOLD",t[t.ITEM_TYPE_H4_GOLD=22]="ITEM_TYPE_H4_GOLD",t[t.ITEM_TYPE_A_GOLD=23]="ITEM_TYPE_A_GOLD",t[t.ITEM_TYPE_K_GOLD=24]="ITEM_TYPE_K_GOLD",t[t.ITEM_TYPE_Q_GOLD=25]="ITEM_TYPE_Q_GOLD",t[t.ITEM_TYPE_J_GOLD=26]="ITEM_TYPE_J_GOLD",t[t.ITEM_TYPE_10_GOLD=27]="ITEM_TYPE_10_GOLD"}(o.TItemtype||(o.TItemtype={})),cc._RF.pop()},{}],shared_config:[function(t,e,o){"use strict";cc._RF.push(e,"2bcd1MFnPhJD4fzahDPBgg3","shared_config"),Object.defineProperty(o,"__esModule",{value:!0}),o.SharedConfig=o.SCORE_MULTIPLE=void 0;var n=t("./MoneyUtils");o.SCORE_MULTIPLE=1e4;var i=function(){function t(){}return t.ScoreFormat=function(t){return n.MoneyUtil.Format(t/o.SCORE_MULTIPLE)},t.SetThemeColor=function(e){t.THEME_COLOR=e,Object.freeze(t.THEME_COLOR)},t}();o.SharedConfig=i,window.SharedConfig=i,cc._RF.pop()},{"./MoneyUtils":"MoneyUtils"}],shared_record_custom_date:[function(t,e,o){"use strict";cc._RF.push(e,"134f9blyQlLiaENIVSoPbpY","shared_record_custom_date");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0}),o.SharedRecordCustomDate=void 0;var c=t("../../../../../script/pkg/adapter-v2"),s=t("./shared_record"),a=t("./shared_record/DateEx"),l=t("./shared_record/shared_record_custom_select_list"),u=cc._decorator,d=u.ccclass,h=u.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.selectList=null,e.nowDate=null,e.record=null,e}var o;return i(e,t),o=e,e.getInstance=function(){return this.instance||(this.instance=new o),this.instance},e.prototype.onLoad=function(){var t=new Date;this.nowDate={year:t.getFullYear(),month:t.getMonth()+1,day:t.getDate()}},e.prototype.start=function(){this.lbStartYear.string=""+this.nowDate.year,this.lbStartMonth.string=""+this.nowDate.month,this.lbStartDay.string=""+this.nowDate.day,this.lbEndYear.string=""+this.nowDate.year,this.lbEndMonth.string=""+this.nowDate.month,this.lbEndDay.string=""+this.nowDate.day},e.prototype.setDate=function(t){this.record=t},e.prototype.onBtnSuccess=function(){var t=this.getStartDate(),e=this.getEndDate(),o=a.DateEx.getZeroTimestamp(t.year,t.month-1,t.day),n=a.DateEx.getZeroTimestamp(e.year,e.month-1,e.day);n+=86399e3,this.node.destroy(),this.record.emit(s.SharedRecordEvent.REQUEST_CUSTOM_DATE_RECORD,o,n,s.SelectDateType.CUSTOM)},e.prototype.onBtnBack=function(){this.node.destroy()},e.prototype.onBtnStartYear=function(){for(var t=this,e=[],o=this.getMonthsAgo().year;o<=this.nowDate.year;o++)e.push(o);var n=this.getStartDate().year;this.getSelectList(this.btnStartYear.node,e,n,function(e){if(n!=e){if(t.lbStartYear.string=""+e,t.nowDate.year>e)t.lbStartYear.string=""+e,t.lbStartMonth.string=""+((new Date).getMonth()+1-3+12),t.lbStartDay.string=""+new Date(e,Number(t.lbStartMonth.string),0).getDate();else{var o=new Date;t.lbStartYear.string=""+o.getFullYear(),t.lbStartMonth.string=""+(o.getMonth()+1),t.lbStartDay.string=""+o.getDate()}t.updateEndTime(t.getStartDate())}})},e.prototype.onBtnStartMonth=function(){for(var t=this,e=this.getMonthsAgo(),o=this.getStartDate(),n=o.year,i=o.month,r=[],c=0;c<=3;c++){var s=e.month+c;if(e.year<n){if(s<=12)continue;r.push(s-12)}else{if(s>12)break;r.push(s)}}this.getSelectList(this.btnStartMonth.node,r,i,function(e){i!=e&&(t.lbStartMonth.string=""+e,n<t.nowDate.year||t.nowDate.month>e?t.lbStartDay.string=""+a.DateEx.getMonthDay(n,e):t.lbStartDay.string=""+t.nowDate.day,t.updateEndTime(t.getStartDate()))})},e.prototype.onBtnStartDay=function(){var t,e=this,o=this.getStartDate(),n=o.year,i=o.month,r=o.day,c=1;if(n==this.nowDate.year&&i==this.nowDate.month)t=this.nowDate.day;else{t=a.DateEx.getMonthDay(n,i);var s=this.getMonthsAgo();s.year==n&&s.month==i&&(c=Math.max(c,s.day))}for(var l=[],u=c;u<=t;u++)l.push(u);this.getSelectList(this.btnStartDay.node,l,r,function(t){r!=t&&(e.lbStartDay.string=""+t,e.updateEndTime(e.getStartDate()))})},e.prototype.onBtnEndYear=function(){for(var t=this,e=[],o=this.getMonthsAgo().year;o<=this.nowDate.year;o++)e.push(o);var n=this.getEndDate().year;this.getSelectList(this.btnEndYear.node,e,n,function(e){if(n!=e){if(t.lbEndYear.string=""+e,t.nowDate.year>e)t.lbEndYear.string=""+e,t.lbEndMonth.string=""+((new Date).getMonth()+1-3+12),t.lbEndDay.string=""+new Date(e,Number(t.lbEndMonth.string),0).getDate();else{var o=new Date;t.lbEndYear.string=""+o.getFullYear(),t.lbEndMonth.string=""+(o.getMonth()+1),t.lbEndDay.string=""+o.getDate()}t.updateStartTime(t.getEndDate())}})},e.prototype.onBtnEndMonth=function(){var t=this;console.warn("btnendmonth");for(var e=this.getMonthsAgo(),o=this.getEndDate(),n=o.year,i=o.month,r=[],c=0;c<=3;c++){var s=e.month+c;if(e.year<n){if(s<=12)continue;r.push(s-12)}else{if(s>12)break;r.push(s)}}this.getSelectList(this.btnEndMonth.node,r,i,function(e){console.warn("month",i,e),i!=e&&(console.warn("this.nowDate.month",t.nowDate.month),t.lbEndMonth.string=""+e,n<t.nowDate.year||t.nowDate.month>e?t.lbEndDay.string=""+a.DateEx.getMonthDay(n,e):t.lbEndDay.string=""+t.nowDate.day,t.updateStartTime(t.getEndDate()))})},e.prototype.onBtnEndDay=function(){var t,e=this,o=this.getEndDate(),n=o.year,i=o.month,r=o.day,c=1;if(n==this.nowDate.year&&i==this.nowDate.month)t=this.nowDate.day;else{t=a.DateEx.getMonthDay(n,i);var s=this.getMonthsAgo();s.year==n&&s.month==i&&(c=Math.max(c,s.day))}for(var l=[],u=c;u<=t;u++)l.push(u);this.getSelectList(this.btnEndDay.node,l,r,function(t){r!=t&&(e.lbEndDay.string=""+t,e.updateStartTime(e.getEndDate()))})},e.prototype.getStartDate=function(){return{year:Number(this.lbStartYear.getComponent(cc.Label).string),month:Number(this.lbStartMonth.getComponent(cc.Label).string),day:Number(this.lbStartDay.getComponent(cc.Label).string)}},e.prototype.getEndDate=function(){return{year:Number(this.lbEndYear.getComponent(cc.Label).string),month:Number(this.lbEndMonth.getComponent(cc.Label).string),day:Number(this.lbEndDay.getComponent(cc.Label).string)}},e.prototype.updateStartTime=function(t){var e=new Date(t.year,t.month-1,t.day).getTime(),o=e-5184e5,n=this.getMonthsAgo(),i=new Date(n.year,n.month-1,n.day);o<i.getTime()&&(o=i.getTime());var r=this.getStartDate(),c=r.year,s=r.month,a=r.day,l=new Date(c,s-1,a).getTime();if(!(l>=o&&l<=e)){var u=new Date(o);u.getFullYear()!=c&&(this.lbStartYear.string=""+u.getFullYear()),u.getMonth()+1!=s&&(this.lbStartMonth.string=""+(u.getMonth()+1)),u.getDate()!=a&&(this.lbStartDay.string=""+u.getDate())}},e.prototype.updateEndTime=function(t){var e=new Date(t.year,t.month-1,t.day).getTime(),o=e+5184e5,n=new Date(this.nowDate.year,this.nowDate.month-1,this.nowDate.day);o>n.getTime()&&(o=n.getTime());var i=this.getEndDate(),r=i.year,c=i.month,s=i.day,a=new Date(r,c-1,s).getTime();if(!(a>=e&&a<=o)){var l=new Date(o);l.getFullYear()!=r&&(this.lbEndYear.string=""+l.getFullYear()),console.warn("\u66f4\u65b0\u7ed3\u675f\u65f6\u95f4",l.getMonth()+1,c,t),l.getMonth()+1!=c&&(this.lbEndMonth.string=""+(l.getMonth()+1)),l.getDate()!=s&&(this.lbEndDay.string=""+l.getDate())}},e.prototype.getMonthsAgo=function(){var t=Object.assign({},this.nowDate),e=a.DateEx.getMonthsAgo(this.nowDate.year,this.nowDate.month-1,3),o=e.year,n=e.month;t.year=o,t.month=n+1;var i=a.DateEx.getMonthDay(o,n);return t.day=Math.min(t.day,i),t},e.prototype.getSelectList=function(t,e,o,n){if(!cc.isValid(this.selectList)){var i=cc.instantiate(this.recordCustomSelectList);i.active=!0,this.ndSelectList.active=!0,i.parent=this.ndSelectList,this.selectList=i.getComponent(l.SharedRecordCustomSelectList)}if(this.selectList.getTarget()!=t){this.selectList.mystart();var r,s=t;r=c.AdapterV2.getInstance().winSizeHeight>1440?s.convertToWorldSpaceAR(new cc.Vec3(.5*(this.ndSelectList.width-s.width),.5*(this.ndSelectList.height-s.height)-217)):s.convertToWorldSpaceAR(new cc.Vec3(.5*(this.ndSelectList.width-s.width),.5*(this.ndSelectList.height-s.height))),this.selectList.setPosition(r),this.selectList.setTarget(t),this.selectList.setData(e,o),this.selectList.setCallback(n)}else this.selectList.destroySelf()},e.prototype.onBtnCheckSelectList=function(){cc.isValid(this.selectList)&&(this.selectList.destroySelf(),this.selectList=null)},r([h({type:cc.Button})],e.prototype,"btnStartYear",void 0),r([h({type:cc.Button})],e.prototype,"btnStartMonth",void 0),r([h({type:cc.Button})],e.prototype,"btnStartDay",void 0),r([h({type:cc.Button})],e.prototype,"btnEndYear",void 0),r([h({type:cc.Button})],e.prototype,"btnEndMonth",void 0),r([h({type:cc.Button})],e.prototype,"btnEndDay",void 0),r([h({type:cc.Label})],e.prototype,"lbStartYear",void 0),r([h({type:cc.Label})],e.prototype,"lbStartMonth",void 0),r([h({type:cc.Label})],e.prototype,"lbStartDay",void 0),r([h({type:cc.Label})],e.prototype,"lbEndYear",void 0),r([h({type:cc.Label})],e.prototype,"lbEndMonth",void 0),r([h({type:cc.Label})],e.prototype,"lbEndDay",void 0),r([h({type:cc.Node})],e.prototype,"ndSelectList",void 0),r([h({type:cc.Prefab})],e.prototype,"recordCustomSelectList",void 0),o=r([d],e)}(cc.Component);o.SharedRecordCustomDate=p,cc._RF.pop()},{"../../../../../script/pkg/adapter-v2":void 0,"./shared_record":"shared_record","./shared_record/DateEx":"DateEx","./shared_record/shared_record_custom_select_list":"shared_record_custom_select_list"}],shared_record_custom_select_list:[function(t,e,o){"use strict";cc._RF.push(e,"18b69QGHWZB06FfbYFyPCO7","shared_record_custom_select_list");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0}),o.SharedRecordCustomSelectList=void 0;var c=t("../../../../../../script/framework/log/log"),s=t("./NodeEx"),a=t("./shared_record_date_item"),l=cc._decorator,u=l.ccclass,d=l.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.selectData=null,e}return i(e,t),e.prototype.onLoad=function(){c.tcLog.log("SelectList onLoad:")},e.prototype.mystart=function(){var t=this;c.tcLog.log("SelectList start:");var e=this.ndContent;this.maxSize=new cc.Size(e.width,330),this.scrollBar.node.on(cc.Node.EventType.TOUCH_MOVE,function(e){var o=e.getLocation(),n=t.scrollBar.node.convertToNodeSpaceAR(cc.v3(o.x,o.y,0)),i=t.scrollBar.node.getChildByName("bar").getContentSize(),r=t.scrollBar.node.getContentSize();-n.y>r.height-i.height/2?n.y=-r.height+i.height/2:-n.y<i.height/2&&(n.y=-i.height/2);var c=(-n.y-i.height/2)/(r.height-i.height);t.svContent.scrollTo(cc.v2(0,1-c))})},e.prototype.onDestroy=function(){this.closeCallback&&this.closeCallback(this.selectData)},e.prototype.getTarget=function(){return this.target},e.prototype.getSelectData=function(){return this.selectData},e.prototype.setData=function(t,e){this.szData=t,this.selectData=e,this.reflush()},e.prototype.setCallback=function(t){this.closeCallback=t},e.prototype.setPosition=function(t){this.ndContent.position=s.NodeEx.getLocalPosition(this.node,t)},e.prototype.setTarget=function(t){this.target=t},e.prototype.destroySelf=function(){this.node.destroy()},e.prototype.reflush=function(){var t=this;this.content.node.removeAllChildren();for(var e=null,o=0,n=this.szData.length;o<n;o++){var i=cc.instantiate(this.recordDateItem);i.parent=this.content.node;var r=i.getComponent(a.SharedRecordDateItem);r.setString(""+this.szData[o]),r.setCallback(this.onClickDateItem.bind(this,this.szData[o])),this.selectData==this.szData[o]&&(e=r)}this.content.updateLayout();var c=this.ndContent,s=this.content,l=Math.min(s.node.height,this.maxSize.height);c.height=l,this.scrollBar.node.active=s.node.height>this.maxSize.height,this.content.getComponent(cc.Widget).updateAlignment(),this.scrollBar.node.active&&null!=e&&this.scheduleOnce(function(){t.scrollTo(e.node)},0)},e.prototype.scrollTo=function(t){var e=t,o=e.convertToWorldSpaceAR(new cc.Vec3(0,-.5*e.height)),n=this.content.node.convertToNodeSpaceAR(o),i=-1*this.maxSize.height;if(!(0>=n.y&&n.y>=i)){var r=i-n.y;this.svContent.scrollToOffset(new cc.Vec2(0,r))}},e.prototype.onClickDateItem=function(t){this.selectData=t,this.destroySelf()},r([d({type:cc.Node})],e.prototype,"ndContent",void 0),r([d({type:cc.Layout})],e.prototype,"content",void 0),r([d({type:cc.Scrollbar})],e.prototype,"scrollBar",void 0),r([d({type:cc.ScrollView})],e.prototype,"svContent",void 0),r([d({type:cc.Prefab})],e.prototype,"recordDateItem",void 0),r([u],e)}(cc.Component);o.SharedRecordCustomSelectList=h,cc._RF.pop()},{"../../../../../../script/framework/log/log":void 0,"./NodeEx":"NodeEx","./shared_record_date_item":"shared_record_date_item"}],shared_record_date_item:[function(t,e,o){"use strict";cc._RF.push(e,"523c1mg1WxBp49mVc1aLzvT","shared_record_date_item");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0}),o.SharedRecordDateItem=void 0;var c=cc._decorator,s=c.ccclass,a=c.property,l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.onLoad=function(){},e.prototype.setCallback=function(t){this.callback=t},e.prototype.setString=function(t){this.lbDate.string=t},e.prototype.onClick=function(){this.callback()},r([a({type:cc.Label})],e.prototype,"lbDate",void 0),r([a({type:cc.Button})],e.prototype,"self",void 0),r([s],e)}(cc.Component);o.SharedRecordDateItem=l,cc._RF.pop()},{}],shared_record:[function(t,e,o){"use strict";cc._RF.push(e,"3a9afayLn9H5ZIxrGcKEYK5","shared_record");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0}),o.SharedRecord=o.SelectDateType=o.SharedRecordEvent=void 0;var c=cc._decorator,s=c.ccclass;c.property,function(t){t.CLOSE_RECORD="CLOSE_RECORD",t.OPEN_RECORD_DATE_TYPE="OPEN_RECORD_DATE_TYPE",t.OPEN_RECORD_CUSTOM_DATE="OPEN_RECORD_CUSTOM_DATE",t.REQUEST_CUSTOM_DATE_RECORD="REQUEST_CUSTOM_DATE_RECORD",t.OPEN_RECORD_ROUND_DETAIL_LIST="OPEN_RECORD_ROUND_DETAIL_LIST",t.REQUEST_REMAINING_DATA="REQUEST_REMAINING_DATA"}(o.SharedRecordEvent||(o.SharedRecordEvent={})),function(t){t[t.TODAY=0]="TODAY",t[t.LAST_WEEK=1]="LAST_WEEK",t[t.CUSTOM=2]="CUSTOM"}(o.SelectDateType||(o.SelectDateType={}));var a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.onLoad=function(){},e.prototype.start=function(){},r([s],e)}(cc.Component);o.SharedRecord=a,cc._RF.pop()},{}]},{},["AThemeColor","AdaptScreen","BaseView","BlockComp","CHandler","CocosUtil","CommonUtil","CompDissItem","CompHisPage","DateUtil","Globals","HisLineAward","MoneyUtil","RecordMgr","SharedThemeColor","StringUtil","UIDateSelect","UIDetailTip","UIHisDetail","UIhistory","UIselectdate","recorddetail","shared_record","DateEx","MoneyUtils","NodeEx","StringEx","shared_config","shared_record_custom_select_list","shared_record_date_item","shared_record_custom_date","PgAutorotation","PgEvent","PgGameControlPanelLogic","PgGameControlPanelView","PgGameHistoryView","PgGameRuleView","PgGameTopNode","PgGameWalletView","btnSpineRotateAni","btnSpineRotateSpecialAni","pgGameBetSettingView"]);