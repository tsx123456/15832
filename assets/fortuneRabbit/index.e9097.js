window.__require=function t(e,n,i){function o(a,s){if(!n[a]){if(!e[a]){var l=a.split("/");if(l=l[l.length-1],!e[l]){var c="function"==typeof __require&&__require;if(!s&&c)return c(l,!0);if(r)return r(l,!0);throw new Error("Cannot find module '"+a+"'")}a=l}var u=n[a]={exports:{}};e[a][0].call(u.exports,function(t){return o(e[a][1][t]||t)},u,u.exports,t,e,n,i)}return n[a].exports}for(var r="function"==typeof __require&&__require,a=0;a<i.length;a++)o(i[a]);return o}({BigWinEmitter:[function(t,e,n){"use strict";cc._RF.push(e,"43c486gIINEQLrRIggXcH94","BigWinEmitter");var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,n,a):o(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,l=a.property,c=function(){},u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.prefab=null,e.animName="",e.countPerSecond=10,e.instantaneousMaxCount=100,e.minScale=.9,e.maxScale=1.1,e.minSpeed=1,e.maxSpeed=3,e.playOnLoad=!1,e.nodePool=new cc.NodePool,e.nodeInfoSet=new Set,e.recycleNodeInfoList=[],e.isPlay=!1,e.time=0,e.firstEnable=!0,e.maxPoolSize=50,e}return o(e,t),e.prototype.onEnable=function(){this.firstEnable&&(this.firstEnable=!1,this.playOnLoad&&this.play())},e.prototype.createNode=function(){return this.nodePool.size()?this.nodePool.get():cc.instantiate(this.prefab)},e.prototype.play=function(){this.isPlay=!0},e.prototype.emitNode=function(){if(!(this.nodeInfoSet.size>this.instantaneousMaxCount)){var t=this.createNode(),e=new c;e.node=t;var n=cc.Vec2.RIGHT;n=(n=n.rotateSelf(Math.random()*Math.PI*2)).mulSelf(Math.random()*(this.maxSpeed-this.minSpeed)+this.minSpeed),e.velocity=n,this.nodeInfoSet.add(e),t.scale=Math.random()*(this.maxScale-this.minScale)+this.minScale,t.position=cc.Vec3.ZERO,t.parent=this.node;var i=t.getComponent(cc.Animation);i&&i.play(this.animName)}},e.prototype.recycleNode=function(t){this.nodePool.size()<=this.maxPoolSize?this.nodePool.put(t):t.destroy()},e.prototype.deleteNodeInfo=function(t){this.nodeInfoSet.delete(t),this.recycleNode(t.node)},e.prototype.isOutsideRange=function(t,e,n){return t<e||t>n},e.prototype.isOutsideParent=function(t){var e=t.width*Math.abs(t.scaleX),n=-e*t.anchorX,i=e*(1-t.anchorX),o=t.height*Math.abs(t.scaleY),r=-o*t.anchorY,a=o*(1-t.anchorY),s=cc.v2(t.x,t.y),l=cc.v2(n,a).rotateSelf(t.angle).add(s),c=cc.v2(n,r).rotateSelf(t.angle).add(s),u=cc.v2(i,a).rotateSelf(t.angle).add(s),b=cc.v2(i,r).rotateSelf(t.angle).add(s),f=this.node.x-this.node.width*this.node.anchorX,p=this.node.x+this.node.width*(1-this.node.anchorX),h=this.node.y-this.node.height*this.node.anchorY,d=this.node.y+this.node.height*(1-this.node.anchorY);return this.isOutsideRange(l.x,f,p)&&this.isOutsideRange(c.x,f,p)&&this.isOutsideRange(u.x,f,p)&&this.isOutsideRange(b.x,f,p)||this.isOutsideRange(l.y,h,d)&&this.isOutsideRange(c.y,h,d)&&this.isOutsideRange(u.y,h,d)&&this.isOutsideRange(b.y,h,d)},e.prototype.update=function(t){if(this.nodeInfoSet.size){for(var e=this.nodeInfoSet.entries(),n=e.next();!n.done;n=e.next()){var i=n.value[1],o=i.node,r=o.position,a=i.velocity.mul(t);o.position=r.add(cc.v3(a.x,a.y,0)),this.isOutsideParent(o)&&this.recycleNodeInfoList.push(i)}if(this.recycleNodeInfoList.length){for(var s=0;s<this.recycleNodeInfoList.length;s++)this.deleteNodeInfo(this.recycleNodeInfoList[s]);this.recycleNodeInfoList.splice(0)}}this.isPlay&&(this.time+=t,this.time>=1/this.countPerSecond&&(this.time=0,this.emitNode()))},e.prototype.stop=function(t){void 0===t&&(t=!1),this.isPlay=!1,t&&this.clear()},e.prototype.clear=function(){if(this.nodeInfoSet.size){for(var t=this.nodeInfoSet.entries(),e=t.next();!e.done;e=t.next()){var n=e.value[1];this.recycleNode(n.node)}this.nodeInfoSet.clear()}},r([l(cc.Prefab)],e.prototype,"prefab",void 0),r([l(cc.String)],e.prototype,"animName",void 0),r([l(cc.Integer)],e.prototype,"countPerSecond",void 0),r([l(cc.Integer)],e.prototype,"instantaneousMaxCount",void 0),r([l(cc.Float)],e.prototype,"minScale",void 0),r([l(cc.Float)],e.prototype,"maxScale",void 0),r([l(cc.Float)],e.prototype,"minSpeed",void 0),r([l(cc.Float)],e.prototype,"maxSpeed",void 0),r([l(cc.Boolean)],e.prototype,"playOnLoad",void 0),r([s],e)}(cc.Component);n.default=u,cc._RF.pop()},{}],Game1810Scroll:[function(t,e,n){"use strict";cc._RF.push(e,"aa7c7QSsoxMnquPqzs2skLB","Game1810Scroll");var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,n,a):o(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../../common/gameCommon/script/BaseComponent"),s=function(t){this.data=t},l=function(){function t(){this.head=new s(null),this.tail=new s(null),this.head.prev=null,this.head.next=this.tail,this.tail.prev=this.head,this.tail.next=null,this.size=0,this.nodePool=[]}return t.prototype.count=function(){return this.size},t.prototype.empty=function(){return 0==this.size},t.prototype.first=function(){return this.head.next},t.prototype.last=function(){return this.tail.prev},t.prototype.isHead=function(t){return t==this.head},t.prototype.isTail=function(t){return t==this.tail},t.prototype.getListNode=function(t){if(this.nodePool.length>0){var e=this.nodePool.pop();return e.data=t,e}return new s(t)},t.prototype.insertBefore=function(t,e){var n=this.getListNode(t);return n.prev=e.prev,n.next=e,e.prev.next=n,e.prev=n,++this.size,n},t.prototype.insertAfter=function(t,e){var n=this.getListNode(t);return n.prev=e,n.next=e.next,e.next.prev=n,e.next=n,++this.size,n},t.prototype.insertAsLast=function(t){return this.insertBefore(t,this.tail)},t.prototype.insertAsFirst=function(t){return this.insertAfter(t,this.head)},t.prototype.recycleListNode=function(t){t.prev=null,t.next=null,t.data=null,this.nodePool.push(t)},t.prototype.remove=function(t){t.prev.next=t.next,t.next.prev=t.prev,this.recycleListNode(t),--this.size},t.prototype.removeFirst=function(){this.remove(this.first())},t.prototype.removeLast=function(){this.remove(this.last())},t}(),c=cc._decorator,u=c.ccclass,b=c.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.symbolPrefab=null,e}var n;return o(e,t),n=e,e.prototype.OnLoad=function(){this.JS_Name=n.name},e.prototype.init=function(t){this.colNum=t,this.nodePool=new cc.NodePool,this.symbolList=[],this.scrollTotalTimeList=[],this.scrollTimeList=[],this.scrollTotalDistanceList=[],this.scrollDistanceList=[],this.scrollEaseList=[],this.needScrollList=[],this.needScrollForeverList=[],this.scrollForeverSpeedList=[];for(var e=0;e<this.colNum;e++)this.symbolList.push(new l),this.scrollTimeList.push(0),this.scrollTotalTimeList.push(0),this.scrollDistanceList.push(0),this.scrollEaseList.push(null),this.scrollTotalDistanceList.push(0),this.needScrollList.push(!1),this.needScrollForeverList.push(!1),this.scrollForeverSpeedList.push(0);this.curFrameScrollFinishColList=[]},e.prototype.getSymbolNode=function(){var t=this.nodePool.get();return t||(t=cc.instantiate(this.symbolPrefab)),t},e.prototype.putSymbolNode=function(t){t.active=!0,this.nodePool.put(t)},e.prototype.updateColSymbolsByCount=function(t,e,n){if(void 0===n&&(n=0),n<0)throw new Error("downwardOffset must be nonnegative:"+n);for(var i=0,o=this.colPosX(t),r=-this.node.height/2-n,a=this.symbolList[t],s=a.first();!a.isTail(s)&&i<e;){var l=s.data;this.onUpdateSymbol(t,i,l),l.position=cc.v3(o,r+l.height/2,0),r+=l.height,s=s.next,i++}if(a.isTail(s))for(;i<e;)l=this.getSymbolNode(),this.onUpdateSymbol(t,i,l),l.position=cc.v3(o,r+l.height/2,0),r+=l.height,l.parent=this.node,a.insertAsLast(l),i++;else for(;!a.isTail(s);){this.putSymbolNode(s.data);var c=s.next;a.remove(s),s=c}},e.prototype.updateColSymbols=function(t,e){if(void 0===e&&(e=0),e<0)throw new Error("downwardOffset must be nonnegative:"+e);for(var n=0,i=this.colPosX(t),o=-this.node.height/2-e,r=this.node.height/2,a=this.symbolList[t],s=a.first();!a.isTail(s)&&o<r;){var l=s.data;this.onUpdateSymbol(t,n,l),l.position=cc.v3(i,o+l.height/2,0),o+=l.height,s=s.next,n++}if(a.isTail(s))for(;o<r;)l=this.getSymbolNode(),this.onUpdateSymbol(t,n,l),l.position=cc.v3(i,o+l.height/2,0),o+=l.height,l.parent=this.node,a.insertAsLast(l),n++;else for(;!a.isTail(s);){this.putSymbolNode(s.data);var c=s.next;a.remove(s),s=c}},e.prototype.scroll=function(t,e,n,i){if(void 0===i&&(i=null),e<0)throw new Error("time must be nonnegative:"+e);this.stopForeverScroll(t),this.scrollTimeList[t]=0,this.scrollTotalTimeList[t]=e,this.scrollDistanceList[t]=0,this.scrollTotalDistanceList[t]=n,this.scrollEaseList[t]=i,this.needScrollList[t]=!0},e.prototype.stopScroll=function(t){this.needScrollList[t]=!1,this.scrollTimeList[t]=0,this.scrollTotalTimeList[t]=0,this.scrollDistanceList[t]=0,this.scrollEaseList[t]=null,this.scrollTotalDistanceList[t]=0},e.prototype.scrollForever=function(t,e){this.stopScroll(t),this.needScrollForeverList[t]=!0,this.scrollForeverSpeedList[t]=e},e.prototype.stopForeverScroll=function(t){this.needScrollForeverList[t]=!1,this.scrollForeverSpeedList[t]=0},e.prototype.createSymbol=function(){var t=this.nodePool.get();return t||(t=cc.instantiate(this.symbolPrefab)),t},e.prototype.colPosX=function(t){return-this.node.width/2+(t+.5)*this.symbolPrefab.data.width},e.prototype.cyclicScroll=function(t){for(var e=this.symbolList[t],n=-this.node.height/2,i=this.colPosX(t);;){var o=e.first().data;if((c=o.y-o.height/2)<=n)break;var r=this.createSymbol();this.onSymbolAppear(t,r),r.position=cc.v3(i,c-r.height/2,0),r.parent=this.node,e.insertAsFirst(r)}for(var a=this.node.height/2;;){var s=e.last().data;if((l=s.y+s.height/2)>=a)break;r=this.createSymbol(),this.onSymbolAppear(t,r),r.position=cc.v3(i,l+r.height/2,0),r.parent=this.node,e.insertAsLast(r)}for(;!e.empty();){var l;if((l=(r=e.first().data).y+r.height/2)>=n)break;e.removeFirst(),this.onSymbolRecycle(r),this.putSymbolNode(r)}for(;!e.empty();){var c;if((c=(r=e.last().data).y-r.height/2)<=a)break;e.removeLast(),this.onSymbolRecycle(r),this.putSymbolNode(r)}},e.prototype.update=function(t){t=Math.min(t,.02);for(var e=0;e<this.colNum;e++)if(this.needScrollList[e]){this.scrollTimeList[e]+=t;var n=Math.min(this.scrollTimeList[e]/this.scrollTotalTimeList[e],1);this.scrollEaseList[e]&&(n=this.scrollEaseList[e].easing(n));var i=this.scrollTotalDistanceList[e]*n,o=i-this.scrollDistanceList[e];this.scrollDistanceList[e]=i;for(var r=(a=this.symbolList[e]).first();!a.isTail(r);)(s=r.data).position=s.position.add(cc.v3(0,o,0)),r=r.next;this.scrollTimeList[e]>=this.scrollTotalTimeList[e]&&(this.stopScroll(e),this.curFrameScrollFinishColList.push(e)),this.cyclicScroll(e)}else if(this.needScrollForeverList[e]){var a;for(o=this.scrollForeverSpeedList[e]*t,r=(a=this.symbolList[e]).first();!a.isTail(r);){var s;(s=r.data).position=s.position.add(cc.v3(0,o,0)),r=r.next}this.cyclicScroll(e)}for(e=0;e<this.curFrameScrollFinishColList.length;e++)this.onColScrollFinish(this.curFrameScrollFinishColList[e]);this.curFrameScrollFinishColList.splice(0)},e.prototype.lastSymbolUpperBoundOffset=function(t){var e=this.symbolList[t].last().data,n=this.node.height/2;return e.y+e.height/2-n},e.prototype.hideSymbols=function(t){this.stopScroll(t),this.stopForeverScroll(t);for(var e=this.symbolList[t],n=e.first();!e.isTail(n);)n.data.active=!1,n=n.next},e.prototype.showColSymbols=function(t){for(var e=this.symbolList[t],n=e.first();!e.isTail(n);)n.data.active=!0,n=n.next},e.prototype.traversalColSymbols=function(t,e){for(var n=this.symbolList[t],i=n.first();!n.isTail(i);)e(i.data),i=i.next},e.prototype.symbolCount=function(t){return this.symbolList[t].count()},e.prototype.getSymbol=function(t,e){for(var n=this.symbolList[t].first();e>0;)n=n.next,e--;return n.data},r([b(cc.Prefab)],e.prototype,"symbolPrefab",void 0),n=r([u],e)}(a.default);n.default=f,cc._RF.pop()},{"../../common/gameCommon/script/BaseComponent":void 0}],RuleView:[function(t,e,n){"use strict";cc._RF.push(e,"eaf75W7QutKxbMOvlLGte2G","RuleView");var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,n,a):o(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../../../../script/framework/i18n/i18n"),s=t("../../../../script/pkg/currency"),l=t("../../../update-v2/script/api/api-config"),c=cc._decorator,u=c.ccclass,b=c.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.betSizeLab=null,e.currencyLab=null,e}return o(e,t),e.prototype.onLoad=function(){var t=l.gameData.betSizes,e=s.currency.formatNoSymbol(t[0]),n=s.currency.formatNoSymbol(t[t.length-1]);this.betSizeLab.string=a.tcI18n.i18nLabel("FortuneRabbitRules.GeneralRules2",e,n),this.currencyLab.string=a.tcI18n.i18nLabel("CommonRulesShared.InGameCurrency",s.currency.getSymbol())},r([b(cc.Label)],e.prototype,"betSizeLab",void 0),r([b(cc.Label)],e.prototype,"currencyLab",void 0),r([u],e)}(cc.Component);n.default=f,cc._RF.pop()},{"../../../../script/framework/i18n/i18n":void 0,"../../../../script/pkg/currency":void 0,"../../../update-v2/script/api/api-config":void 0}],TestScroll:[function(t,e,n){"use strict";cc._RF.push(e,"96febY2YAlJNKUZpQRxe/QR","TestScroll");var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,n,a):o(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=t("./Game1810Scroll"),s=cc._decorator,l=s.ccclass,c=s.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.label=null,e.text="hello",e.symbolColList=[],e.m_nTestState=0,e.m_index=0,e}return o(e,t),e.prototype.start=function(){for(var t=this,e=function(e){var i=n.symbolColList[e],o=e;i.onUpdateSymbol=function(e,n,i){t.onUpdateSymbol(o,n,i)},i.onSymbolAppear=function(e,n){t.onSymbolAppear(o,n)},i.onSymbolRecycle=function(e){t.onSymbolRecycle(e)},i.onColScrollFinish=function(){t.onColScrollFinish(o)},i.init(1)},n=this,i=0;i<this.symbolColList.length;i++)e(i);this.symbolColList[0].updateColSymbolsByCount(0,4),this.symbolColList[0].scrollForever(0,-1e3),setTimeout(function(){var e=t.symbolColList[0].lastSymbolUpperBoundOffset(0);t.symbolColList[0].scroll(0,(e+564+50)/1e3,-e-564-50)},1e3),this.rabbitSkeletionOld=cc.find("old",this.node).getComponent(sp.Skeleton),this.rabbitSkeletionOld.setAnimation(0,"idle4",!0),this.rabbitSkeletionNew=cc.find("new",this.node).getComponent(sp.Skeleton),this.rabbitSkeletionNew.setAnimation(0,"idle3",!0),this.rabbitSkeletionNew.setAnimation(2,"vfx_collect_fx2_to_3",!1),this.rabbitSkeletionNew.setTrackCompleteListener(1,function(){t.rabbitSkeletionNew.clearTrack(2)})},e.prototype.onUpdateSymbol=function(t,e){console.log("onUpdateSymbol idx:",e)},e.prototype.onSymbolAppear=function(){this.m_index++},e.prototype.onSymbolRecycle=function(){},e.prototype.onColScrollFinish=function(){0==this.m_nTestState?(this.symbolColList[0].scroll(0,.2,50,cc.easeSineInOut()),this.m_nTestState=1):this.m_nTestState=0},r([c(cc.Label)],e.prototype,"label",void 0),r([c],e.prototype,"text",void 0),r([c([a.default])],e.prototype,"symbolColList",void 0),r([l],e)}(cc.Component);n.default=u,cc._RF.pop()},{"./Game1810Scroll":"Game1810Scroll"}],"fortune-rabbit-anim":[function(t,e,n){"use strict";cc._RF.push(e,"75478ettNpOArAwh1g8MFdA","fortune-rabbit-anim");var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,n,a):o(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))(function(o,r){function a(t){try{l(i.next(t))}catch(e){r(e)}}function s(t){try{l(i.throw(t))}catch(e){r(e)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}l((i=i.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var n,i,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(t){return function(e){return l([t,e])}}function l(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,i=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(s){r=[6,s],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.FortuneRabbitAnimAlert=n.FortuneRabbitAnim=void 0;var l=t("../../../../script/config/cmd"),c=t("../../../../script/config/config"),u=t("../../../../script/framework/audio/audio"),b=t("../../../../script/framework/log/log"),f=t("../../../../script/framework/res/res"),p=t("../../../../script/pkg/currency"),h=t("../../../update-v2/script/fortune-rabbit-define"),d=t("../../common/PGGameRes/history/BaseView"),m=t("../../common/PGGameRes/history/CocosUtil"),g=t("./fortune-rabbit-logic"),y=t("./fortune-rabbit-table"),v=cc._decorator,w=v.ccclass,S=(v.property,h.FortuneRabbitDefine.soundNames.bg_bigwin,h.FortuneRabbitDefine.soundNames.bg_bigwin,h.FortuneRabbitDefine.soundNames.bg_bigwin,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.numCount=0,e.betAmount=0,e.winTotal=0,e.curWinLevel=-1,e.winLevel=0,e.maxLevel=0,e.canJumpToLastStage=!1,e.isAniOver=!1,e.bDelayStage=!1,e.winLevels=y.FortuneRabbitTable.tabelInfo.winLevel,e.winAddCost=[7,8,13],e.curStep=0,e.minStep=0,e.timeDur=.06,e.bgWinName=[["win_big_in1","win_big_in2"],["win_huge_in1","win_huge_in2"],["win_super_in1","win_super_in2"]],e}return o(e,t),e.prototype.onLoad=function(){var t=this;this.body=cc.find("body",this.node),this.num_bg=cc.find("skeletion/num_bg",this.body),this.labelWinCount=cc.find("body/labelWin",this.node).getComponent(cc.Label),this.BGlight=cc.find("win",this.body).getComponent(sp.Skeleton),this.rabbitSkeletion=cc.find("body/skeletion",this.node).getComponent(sp.Skeleton),m.default.traverseNodes(this.node,this.m_ui),this.m_ui.big_win.opacity=0,this.m_ui.mega_win.opacity=0,this.m_ui.super_mega_win.opacity=0,this.mask=cc.find("mask",this.node),this.mask.on("click",function(){t.canJumpToLastStage&&(t.isAniOver?t.scheduleOnce(function(){t.exist()},.5):t.bDelayStage||t.numCount<t.winTotal&&(t.bDelayStage=!0,t.scheduleOnce(function(){t.numCount=t.winTotal,t.labelWinCount.string=p.currency.formatWithSymbol(t.numCount),t.aniOver();for(var e=0,n=0;n<t.winLevels.length;++n)t.winLevel>=t.winLevels[n]&&(e=n);t.curWinLevel<e&&t.changeWinLevel(e)},.5)))})},e.prototype.exist=function(){var t=this;this.node&&(c.gameHelper.stopAllEffects(),this.num_bg.active=!1,this.unscheduleAllCallbacks(),cc.tween(this.body).to(.3,{opacity:0}).call(function(){visualViewport,cc.systemEvent.emit(g.FortuneRabbitLogic.EventBigWinOver),t.node&&t.node.destroy()}).start())},e.prototype.show=function(t,e,n){return a(this,void 0,void 0,function(){var i,o=this;return s(this,function(){for(b.tcLog.info("---showMaxWin,betAmount:"+t+"  winCoin:"+e+"  betSize:"+n),this.minStep=n/3,this.canJumpToLastStage=!1,this.scheduleOnce(function(){o.canJumpToLastStage=!0},1),this.numCount=0,this.betAmount=t,this.winTotal=e,y.FortuneRabbitTable.tabelInfo.musicName=h.FortuneRabbitDefine.soundNames.bg_bigwin,u.uAudio.getInstance().playMusic(h.FortuneRabbitDefine.soundNames.bg_bigwin),u.uAudio.getInstance().playEffect(h.FortuneRabbitDefine.soundNames.bg_bigwin_cheer),this.rabbitSkeletion.node.active=!0,this.BGlight.node.active=!0,this.winLevel=Math.floor(this.winTotal/this.betAmount),i=0;i<this.winLevels.length;++i)this.winLevel>=this.winLevels[i]&&(this.maxLevel=i);return this.curWinLevel=0,this.changeWinLevel(this.curWinLevel),[2]})})},e.prototype.actionSchedule=function(){this.numCount<this.winTotal?(this.numCount+=this.curStep,this.numCount>this.winTotal&&(this.numCount=this.winTotal),this.labelWinCount.string=p.currency.formatWithSymbol(this.numCount),1==this.curWinLevel&&this.numCount>=this.betAmount*this.winLevels[2]?(this.curWinLevel=2,this.changeWinLevel(this.curWinLevel)):0==this.curWinLevel&&this.numCount>=this.betAmount*this.winLevels[1]?(this.curWinLevel=1,this.changeWinLevel(this.curWinLevel)):-1==this.curWinLevel&&(this.curWinLevel=0,this.changeWinLevel(this.curWinLevel))):this.aniOver()},e.prototype.updateStep=function(t){var e=0;0==t?(e=Math.ceil(this.winLevels[1]*this.betAmount/Math.floor(140)),this.timeDur=.05):1==t?(e=Math.ceil((this.winLevels[2]-this.winLevels[1])*this.betAmount/Math.floor(175)),this.timeDur=.04):(e=Math.ceil((this.winTotal-this.winLevels[2]*this.betAmount)/Math.floor(7/.03)),this.timeDur=.03),this.maxLevel==t?this.curStep=Math.max(e,this.minStep):this.curStep=e},e.prototype.aniOver=function(){var t,e=this;this.unscheduleAllCallbacks(),this.isAniOver=!0,this.bDelayStage=!1,u.uAudio.getInstance().stopMusic(),y.FortuneRabbitTable.tabelInfo.musicName=h.FortuneRabbitDefine.soundNames.bg_music,u.uAudio.getInstance().playMusic(h.FortuneRabbitDefine.soundNames.bg_music),u.uAudio.getInstance().playEffect(h.FortuneRabbitDefine.soundNames.bg_bigwin_end),cc.tween(null===(t=this.labelWinCount)||void 0===t?void 0:t.node).delay(0).to(.2,{scale:1.2}).to(.15,{scale:1}).start(),this.scheduleOnce(function(){var t;null===(t=e.rabbitSkeletion)||void 0===t||t.setCompleteListener(function(){}),e.exist()},5)},e.prototype.changeWinLevel=function(t){var e,n,i;return a(this,void 0,void 0,function(){var o=this;return s(this,function(){return this.updateStep(t),null===(e=this.rabbitSkeletion)||void 0===e||e.setAnimation(0,"j"+(t+1)+"_start",!1),null===(n=this.BGlight)||void 0===n||n.setAnimation(0,this.bgWinName[t][0],!1),this.num_bg.active=!0,0==t?(this.m_ui.big_win.opacity=255,this.m_ui.mega_win.opacity=0,this.m_ui.super_mega_win.opacity=0,cc.tween(this.m_ui.big_win).to(.5,{opacity:255}).start()):1==t?(this.m_ui.big_win.opacity=0,this.m_ui.mega_win.opacity=255,this.m_ui.super_mega_win.opacity=0):2==t&&(this.m_ui.big_win.opacity=0,this.m_ui.mega_win.opacity=0,this.m_ui.super_mega_win.opacity=255),null===(i=this.rabbitSkeletion)||void 0===i||i.setCompleteListener(function(){var e,n;null===(e=o.rabbitSkeletion)||void 0===e||e.setAnimation(0,"j"+(t+1)+"_circulate",!0),null===(n=o.BGlight)||void 0===n||n.setAnimation(0,o.bgWinName[t][1],!0)}),this.unschedule(this.actionSchedule),this.schedule(this.actionSchedule,this.timeDur,cc.macro.REPEAT_FOREVER),[2]})})},r([w],e)}(d.BaseView));n.FortuneRabbitAnim=S,function(t){var e;t.clear=function(){e=void 0},t.show=function(){return a(this,void 0,void 0,function(){var t,n;return s(this,function(i){switch(i.label){case 0:return e?[3,2]:[4,f.tcRes.load(c.gameHelper.getBundleName(l.cmd.SERVER_TYPE_FORTUNE_RABBIT),cc.Prefab,"prefab/fortune-rabbit-bigWin")];case 1:if(!(t=i.sent()))return[2];e=t,i.label=2;case 2:return(n=cc.instantiate(e)).name="FortuneRabbitAnimAlert",n.setParent(c.config.uiNode.dialog),n.setPosition(cc.Vec3.ZERO),[2,n.addComponent(S)]}})})}}(n.FortuneRabbitAnimAlert||(n.FortuneRabbitAnimAlert={})),cc._RF.pop()},{"../../../../script/config/cmd":void 0,"../../../../script/config/config":void 0,"../../../../script/framework/audio/audio":void 0,"../../../../script/framework/log/log":void 0,"../../../../script/framework/res/res":void 0,"../../../../script/pkg/currency":void 0,"../../../update-v2/script/fortune-rabbit-define":void 0,"../../common/PGGameRes/history/BaseView":void 0,"../../common/PGGameRes/history/CocosUtil":void 0,"./fortune-rabbit-logic":"fortune-rabbit-logic","./fortune-rabbit-table":"fortune-rabbit-table"}],"fortune-rabbit-award-layer":[function(t,e,n){"use strict";cc._RF.push(e,"17faasQ7KRLOb0YA7L0mzOd","fortune-rabbit-award-layer");var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,n,a):o(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))(function(o,r){function a(t){try{l(i.next(t))}catch(e){r(e)}}function s(t){try{l(i.throw(t))}catch(e){r(e)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}l((i=i.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var n,i,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(t){return function(e){return l([t,e])}}function l(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,i=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(s){r=[6,s],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.FortuneRabbitAwardLayer=void 0;var l=t("../../../../script/config/cmd"),c=t("../../../../script/config/config"),u=t("../../../../script/framework/audio/audio"),b=t("../../../../script/framework/log/log"),f=t("../../../../script/framework/res/res"),p=t("../../../../script/pkg/currency"),h=t("../../../update-v2/script/fortune-rabbit-define"),d=t("./fortune-rabbit-res"),m=t("./fortune-rabbit-table"),g=cc._decorator,y=g.ccclass,v=(g.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.body=null,e.cellMasksNode=null,e.lines=[],e.cellItems=[],e.coinBoxs=[],e.aniIsPlayed=!1,e.holdShowSpineNode=[],e.itemTipPosX=[-355,-133,-55],e.itemTipPosMiddle=[305-37.393,74.607,-118.393,-268-37.393],e.itemTipPosOther=[151.607,-36.393,-224.393],e}return o(e,t),e.prototype.onLoad=function(){var t,e=this;this.body=cc.find("body",this.node),this.cellMasksNode=cc.find("cellMasks",this.node),this.linesNode=cc.find("lines",this.node),this.labelOnlineWin=cc.find("labelWin/labelWin",this.node).getComponent(cc.Label),this.itemTip=cc.find("itemTip",this.node),this.cellTipMasks=cc.find("cellTipMasks",this.node),this.itemSkeletion=cc.find("itemTip/itemSkeletion",this.node).getComponent(sp.Skeleton);for(var n=0;n<10;++n)this.lines.push(cc.find("lines/"+(n+1),this.node));null===(t=this.body)||void 0===t||t.children.forEach(function(t,n){e.cellItems[n]=t}),this.itemTip.on("click",function(){m.FortuneRabbitTable.tabelInfo.bWin||e.setMaskActive(!1),u.uAudio.getInstance().playEffect(h.FortuneRabbitDefine.soundNames.click),e.itemTip.active=!1,e.setCellTipMaskActive(!1)},this)},e.prototype.reset=function(t){void 0===t&&(t=!1),this.setMaskActive(!1),this.hideAward(),this.aniIsPlayed=!1},e.prototype.hideAward=function(){this.unscheduleAllCallbacks(),this.hideCells(),this.setMaskActive(!1),this.labelOnlineWin.node.parent.active=!1,cc.Tween.stopAllByTarget(this.linesNode),this.lines.forEach(function(t){t.active=!1})},e.prototype.setMaskActive=function(t){this.cellMasksNode.active=t},e.prototype.setCellTipMaskActive=function(t){var e=this;t?(this.cellTipMasks.active=!0,cc.tween(this.cellTipMasks).set({opacity:0}).to(.35,{opacity:190}).start()):cc.tween(this.cellTipMasks).to(.35,{opacity:0}).call(function(){e.cellTipMasks.active=!1}).start()},e.prototype.hideCells=function(){this.holdShowSpineNode.forEach(function(t){cc.systemEvent.emit(h.FortuneRabbitDefine.events.hiddenAnimationLayerHitCellsNode,t)}),this.holdShowSpineNode=[],this.cellItems.forEach(function(t){t.children.forEach(function(t){t.children.forEach(function(t){if(t.active=!1,"itemEffect"==t.name)cc.Tween.stopAllByTarget(t),t.children.forEach(function(t){t.active=!1});else if("spine"==t.name){var e=t.getComponentInChildren(cc.Label);e&&(e.node.active=!1)}})})})},e.prototype.setData=function(t,e,n,i){var o,r=this;void 0===n&&(n=1),void 0===i&&(i=0),this.reset(),t.length>0&&this.setMaskActive(!0),b.tcLog.info("FortuneRabbitWardlayer  setData type:"+n+",winCount:"+i),this.showLine(e||[]),2==n&&(this.labelOnlineWin.node.parent.setParent(null===(o=this.cellItems[t[1].x])||void 0===o?void 0:o.children[t[1].y]),this.labelOnlineWin.node.parent.setPosition(cc.v3(0,-50,0)),this.labelOnlineWin.node.parent.active=!0,this.labelOnlineWin.string=p.currency.formatWithSymbol(i)),t.forEach(function(t){var e=m.FortuneRabbitTable.tabelInfo.screen[t.x][t.y];r.showFlight(t,e.itemId),r.showItemSkeletion(t)}),setTimeout(function(){r.aniIsPlayed=!0},1e3)},e.prototype.showLine=function(t){var e=this;this.lines&&0!=this.lines.length&&cc.tween(this.linesNode).set({opacity:0}).call(function(){t.forEach(function(t){e.lines[t-1].active=!0})}).to(0,{opacity:255}).start()},e.prototype.setWinAmount=function(t,e,n){var i,o=n[2],r=this.coinBoxs[o.y];b.tcLog.info("setWinAmount  coinbox\uff1a"+r+"   amount:"+t),r&&(r.active=!0,(null===(i=cc.find("ATTACHED_NODE_TREE/ATTACHED_NODE:root/ATTACHED_NODE:line-win/label",r))||void 0===i?void 0:i.getComponent(cc.Label)).string=p.currency.formatWithSymbol(t),r.getComponent(sp.Skeleton).setAnimation(0,"animation",!1))},e.prototype.showFlight=function(t,e){var n,i,o=this,r=null===(i=null===(n=this.cellItems[t.x])||void 0===n?void 0:n.children[t.y])||void 0===i?void 0:i.getChildByName("itemEffect");r&&(this.scheduleOnce(function(){r.active=!0,r.children.forEach(function(t){"bg"==t.name?(t.opacity=0,t.active=!0):t.active=!0});var t=r.getChildByName("backGroundCircleAni").getComponent(cc.Animation);t.on(cc.Animation.EventType.FINISHED,function(){t.node.active=!1}),t.play();var n=r.getChildByName("starEffect").getComponent(cc.Animation);n.on(cc.Animation.EventType.FINISHED,function(){n.node.active=!1}),n.play();var i=r.getChildByName("backFrameAni");cc.tween(i).set({active:!0,scale:0,opacity:255}).to(1,{scale:.7,opacity:80}).union().repeatForever().start();var o=r.getChildByName("itemShadow").getComponent(cc.Sprite),a=r.getChildByName("itemShadow2");o.node.scale=.8,a.active=!1;var s="";switch(e){case 1:s="ps_vfx_a_carrot_add";break;case 2:s="ps_vfx_a_firecracker_add";break;case 3:s="ps_vfx_a_coin_add";break;case 4:s="ps_vfx_a_angpao_add";break;case 9:s="ps_vfx_a_cash_add",o.node.scale=1,a.active=!0;break;case 51:s="ps_vfx_a_wild_add";break;case 81:s="ps_vfx_a_pouch_add";break;case 82:s="ps_vfx_a_ingot_add"}f.tcRes.load(c.gameHelper.getBundleName(l.cmd.SERVER_TYPE_FORTUNE_RABBIT),cc.SpriteAtlas,"artwork/atlas/46ffed50-f8e9-4b2d-9fc1-c512adc64a66.68606").then(function(t){o.spriteFrame=t.getSpriteFrame(s)})},.08*t.x),this.scheduleOnce(function(){var e,n,i=null===(n=null===(e=o.cellItems[t.x])||void 0===e?void 0:e.children[t.y])||void 0===n?void 0:n.getChildByName("itemEffect");i&&(o.scheduleOnce(function(){i.getChildByName("bg").opacity=255}),cc.systemEvent.emit(h.FortuneRabbitDefine.events.showAnimationLayerHitCellsNode,t))},.08*t.x+.15))},e.prototype.showItemSkeletion=function(t){var e,n,i=this,o=m.FortuneRabbitTable.tabelInfo.screen[t.x],r=this.cellItems[t.x],a=o[t.y],s=a.itemId;if(s){var l=null===(n=null===(e=null==r?void 0:r.children[t.y])||void 0===e?void 0:e.getChildByName("spine"))||void 0===n?void 0:n.getComponent(sp.Skeleton);if(l){l.setCompleteListener(function(t){t&&"idle"==t.animation.name?l.setAnimation(0,"spawn",!1):t&&"spawn"==t.animation.name&&51==a.itemId&&l.setAnimation(0,"idle",!1)});var c=cc.Vec3.ZERO;switch(s){case 81:c=cc.v3(0,19.5);break;case 3:c=cc.v3(-18,-8);break;case 2:c=cc.v3(-5,0)}l.node.setPosition(c),this.scheduleOnce(function(){var e=d.FortuneRabbitRes.getItemSkeletionData(s);if(l.skeletonData&&l.skeletonData.name==(null==e?void 0:e.name)||(l.skeletonData=e),l.node.active=!0,l.timeScale=1,51==s)l.setAnimation(0,"spawn",!1);else if(9==s){var n=l.node.getComponentInChildren(cc.Label);i.aniIsPlayed||(l.timeScale=.75,l.setAnimation(0,"2",!1),n&&a.value&&cc.tween(n.node).to(.17,{scale:1.1}).to(.17,{scale:1}).start()),n&&a.value&&(n.node.active=!0,i.setBallItemValue(n,a.value))}else l.setAnimation(0,"win",!0),l.premultipliedAlpha=!0;i.holdShowSpineNode.push(t)},.08*t.x)}}},e.prototype.shake=function(t){var e,n=null===(e=this.cellItems[t.x].children[t.y])||void 0===e?void 0:e.getChildByName("sprite");n&&(n.stopAllActions(),cc.tween(n).to(.69,{scale:1.08}).to(.69,{scale:.98}).to(.69,{scale:1.08}).to(.69,{scale:1}).union().repeat(2).start())},e.prototype.showItemTip=function(t,e){var n,i,o,r;if(!m.FortuneRabbitTable.tabelInfo.bRolling&&this.cellItems[t].children[e]){var a=m.FortuneRabbitTable.tabelInfo.screen[t][e];if(0!=a.itemId){this.setMaskActive(!0),this.itemTip.active=!0,this.setCellTipMaskActive(!0),this.itemTip.setContentSize(cc.size(9==a.itemId?486:410,215));var s=h.FortuneRabbitDefine.itemScore,l=null===(n=this.itemTip)||void 0===n?void 0:n.getChildByName("labelBall");l.active=9==a.itemId,l.setPosition(0==t||1==t?341:140,0,0),9==a.itemId?this.itemTip.width=494:this.itemTip.width=400;var c=null===(i=this.itemTip)||void 0===i?void 0:i.getChildByName("node");c.active=9!=a.itemId;var u=null==c?void 0:c.getChildByName("score").getComponent(cc.Label),f=a.itemId;s[f]&&(u.string=""+s[f]);var p=d.FortuneRabbitRes.getItemSkeletionData(a.itemId);this.itemSkeletion.skeletonData&&this.itemSkeletion.skeletonData.name==(null==p?void 0:p.name)||(this.itemSkeletion.skeletonData=p),c.setPosition(0==t||1==t?268:60,0,0),this.itemTip.setParent(this.node.parent);var g=2==t?9==a.itemId?-121:-50:this.itemTipPosX[t];null===(o=this.itemTip)||void 0===o||o.setPosition(g,0==t||2==t?this.itemTipPosOther[e]:this.itemTipPosMiddle[e]),51==a.itemId?this.itemTip.height=252:82==a.itemId||(81==a.itemId?this.itemTip.height=249:(this.itemSkeletion.node.scale=1,this.itemTip.height=235));var y=this.cellItems[t].children[e].convertToWorldSpaceAR(cc.Vec3.ZERO),v=this.itemTip.convertToNodeSpaceAR(y),w=cc.Vec3.ZERO;switch(9==a.itemId?(w.y=10,m.FortuneRabbitTable.tabelInfo.bBallWin?this.itemSkeletion.setAnimation(0,"2",!1):this.itemSkeletion.setAnimation(0,"1",!0)):51==a.itemId?this.itemSkeletion.setAnimation(0,"spawn",!1):(a.itemId,this.itemSkeletion.setAnimation(0,"spawn",!1)),b.tcLog.log("tip itemId:",a.itemId),a.itemId){case 81:w.y=19.5;break;case 3:w=cc.v3(-5,5);break;case 4:case 1:w.y=10}this.itemSkeletion.node.setPosition(v.add(w));var S=null===(r=this.itemSkeletion.node)||void 0===r?void 0:r.getComponentInChildren(cc.Label);S.node.active=9==a.itemId,this.setBallItemValue(S,a.value)}}},e.prototype.hideItemTip=function(){this.setMaskActive(!1),this.itemTip.active=!1,this.cellTipMasks.active=!1},e.prototype.setBallItemValue=function(t,e){return a(this,void 0,void 0,function(){var n,i,o,r,a;return s(this,function(s){switch(s.label){case 0:return n="font1",(i=p.currency.accDiv(10*e,m.FortuneRabbitTable.tabelInfo.curBet))>=10&&i<50?n="font3":i>=50&&(n="font4"),[4,f.tcRes.load(c.gameHelper.getBundleName(l.cmd.SERVER_TYPE_FORTUNE_RABBIT),cc.Font,"artwork/font/"+n)];case 1:return o=s.sent(),t.font=o,t.node.opacity=255,r=2,e.toString().length>=2&&(r=0),a=p.currency.format(10*e,!0,!1,r,!0),t.string=""+a,[2]}})})},e.prototype.playCollectBallScore=function(t,e){var n=this,i=0,o=0;m.FortuneRabbitTable.tabelInfo.screen.forEach(function(r,l){r.forEach(function(r,c){return a(n,void 0,void 0,function(){var n,a,b,f,p,d;return s(this,function(){if(9==r.itemId){if(!(n=this.cellItems[l].children[c]))return[2];o++,a=cc.find("spine/itemAddedValue",n),b=cc.instantiate(a),a.opacity=128,f=a.convertToWorldSpaceAR(cc.Vec3.ZERO),p=t.convertToNodeSpaceAR(f),b.setParent(t),b.setPosition(p),b.active=!0,d=0==l?p.x+100:2==l?p.x-100:p.x,cc.tween(b).delay(.3*o).bezierTo(.3,cc.v2(d,p.y),cc.v2(d,p.y-100),cc.v2(0,-118)).call(function(){i++,u.uAudio.getInstance().playEffect(h.FortuneRabbitDefine.soundNames["bonus_drop"+i]),b.destroy(),e&&e(10*r.value)}).start()}return[2]})})})})},r([y],e)}(cc.Component));n.FortuneRabbitAwardLayer=v,cc._RF.pop()},{"../../../../script/config/cmd":void 0,"../../../../script/config/config":void 0,"../../../../script/framework/audio/audio":void 0,"../../../../script/framework/log/log":void 0,"../../../../script/framework/res/res":void 0,"../../../../script/pkg/currency":void 0,"../../../update-v2/script/fortune-rabbit-define":void 0,"./fortune-rabbit-res":"fortune-rabbit-res","./fortune-rabbit-table":"fortune-rabbit-table"}],"fortune-rabbit-cell-item":[function(t,e,n){"use strict";cc._RF.push(e,"2aa0dIH99FAsZ3l8hHW2E3n","fortune-rabbit-cell-item");var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,n,a):o(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))(function(o,r){function a(t){try{l(i.next(t))}catch(e){r(e)}}function s(t){try{l(i.throw(t))}catch(e){r(e)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}l((i=i.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var n,i,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(t){return function(e){return l([t,e])}}function l(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,i=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(s){r=[6,s],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.FortuneRabbitCellItem=n.EaseStateType=void 0;var l,c=t("../../../../script/config/cmd"),u=t("../../../../script/config/config"),b=t("../../../../script/framework/audio/audio"),f=t("../../../../script/framework/res/res"),p=t("../../../../script/pkg/currency"),h=t("../../../update-v2/script/fortune-rabbit-define"),d=t("./fortune-rabbit-res"),m=t("./fortune-rabbit-table"),g=t("./Game1810Scroll"),y=cc._decorator,v=y.ccclass,w=(y.property,188);(function(t){t[t.EaseStateNULL=-1]="EaseStateNULL",t[t.BeginState=0]="BeginState",t[t.BeginStateEnd=1]="BeginStateEnd",t[t.ScrollState=2]="ScrollState",t[t.ScrollEndState=3]="ScrollEndState"})(l=n.EaseStateType||(n.EaseStateType={}));var S=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.items=[],e.grounpId=0,e.itemIndex=0,e.stopNow=!1,e.view=null,e.addCricle=0,e.beginPosY=0,e.bQuickMode=!1,e.bTrriger=!1,e.m_nIndex=0,e.m_nSpeed=3e3,e.m_nQuickSpeed=5900,e.m_nShowSpeed=2580,e.m_endEaseState=l.BeginState,e.m_enEaseDistance=40,e.m_endEaseTime=.15,e.m_groupLenth=752,e.m_beginIndex=0,e.m_beginRandNumber=-1,e}return o(e,t),e.prototype.onLoad=function(){var t=this;cc.systemEvent.on(h.FortuneRabbitDefine.events.stopRoll,this.onItem0Stopped,this),cc.systemEvent.on(h.FortuneRabbitDefine.events.hiddenAnimationLayerHitCellsNode,this.onHiddenAnimationLayerHitCellsNode,this),cc.systemEvent.on(h.FortuneRabbitDefine.events.showAnimationLayerHitCellsNode,this.onShowAnimationLayerHitCellsNode,this),this.m_symbolCol=this.node.getComponent(g.default);var e=this.m_symbolCol;this.m_nIndex=0,e.onUpdateSymbol=function(e,n,i){t.onUpdateSymbol(e,n,i)},e.onSymbolAppear=function(e,n){t.onSymbolAppear(e,n)},e.onSymbolRecycle=function(){},e.onColScrollFinish=function(e){t.onColScrollFinish(e)},e.init(1)},e.prototype.start=function(){this.m_symbolCol.updateColSymbolsByCount(0,4),this.m_symbolCol.node.position=cc.v3(this.m_symbolCol.node.position.x,this.m_symbolCol.node.position.y+this.m_symbolCol.node.getContentSize().height/2,this.m_symbolCol.node.position.z)},e.prototype.onUpdateSymbol=function(t,e,n){this.setItemSPriteByIdx(e,n)},e.prototype.setItemSPriteByIdx=function(t,e){var n=this,i=m.FortuneRabbitTable.tabelInfo.screen[this.grounpId];this.setSizeMode(cc.Sprite.SizeMode.TRIMMED);var o=i[3-t];e.off("click"),e.on("click",function(){n.onClickItem(3-t)},this),e.opacity=255,e.zIndex=3-t;var r=e.getChildByName("sprite"),a=e.getChildByName("wild"),s=e.getChildByName("value").getComponent(cc.Label);if(s.node.active=!1,a.active=0!=o.itemId,r.active=0==o.itemId,0==o.itemId)this.setItemSprite(e,0);else{var l=a.getComponent(sp.Skeleton);l.skeletonData=d.FortuneRabbitRes.getItemSkeletionData(o.itemId),51==o.itemId?(l.premultipliedAlpha=!0,setTimeout(function(){l.setAnimation(0,"idle",!0)},0)):9==o.itemId?(l.setAnimation(0,"1",!1),o.value&&(s.node.active=!0,this.setBallItemValue(s,o.value))):82==o.itemId&&(l.premultipliedAlpha=!0);var c=cc.Vec3.ZERO;switch(o.itemId){case 81:c=cc.v3(0,19.5);break;case 3:c=cc.v3(0,-8);break;case 2:c=cc.v3(-5,0)}a.setPosition(c)}},e.prototype.updateRandowItemValue=function(){for(;;){var t=m.FortuneRabbitTable.getPatternRandomItem(this.bTrriger);this.m_beginRandNumber=t;break}},e.prototype.setRandomItemValue=function(t){this.m_beginIndex>2?(this.m_beginIndex=0,this.updateRandowItemValue()):0==this.m_beginIndex&&this.updateRandowItemValue(),this.m_beginIndex=this.m_beginIndex+1;var e=this.m_beginRandNumber;this.setSizeMode(cc.Sprite.SizeMode.RAW);var n=t.getChildByName("wild"),i=(t.getChildByName("sprite"),t.getChildByName("value"));n.active=!1,i.active=9==e;var o=[.5,1,2,5,10,20,50,500],r=o[Math.floor(Math.random()*o.length)]*m.FortuneRabbitTable.tabelInfo.curBet;r/=10,9==e&&this.setBallItemValue(i.getComponent(cc.Label),r),this.setItemSprite(t,9==e?9:10*e)},e.prototype.onSymbolAppear=function(t,e){this.stopNow&&this.m_nIndex<4?(this.setItemSPriteByIdx(this.m_nIndex,e),this.m_nIndex=this.m_nIndex+1,this.m_nIndex>3&&(this.m_nIndex=0)):this.setRandomItemValue(e)},e.prototype.onColScrollFinish=function(){switch(this.m_nIndex=0,this.m_endEaseState){case l.BeginState:this.bQuickMode,this.m_symbolCol.scroll(0,.1,-100),this.m_endEaseState=l.BeginStateEnd;break;case l.BeginStateEnd:this.bQuickMode?(this.m_symbolCol.scrollForever(0,-this.m_nQuickSpeed),this.m_endEaseState=l.ScrollEndState):(this.m_symbolCol.scrollForever(0,-this.m_nSpeed),this.m_endEaseState=l.ScrollState),cc.systemEvent.emit(h.FortuneRabbitDefine.events.scrollForever,this.grounpId);break;case l.ScrollState:b.uAudio.getInstance().playEffect(this.bQuickMode?h.FortuneRabbitDefine.soundNames.reel_stop1:h.FortuneRabbitDefine.soundNames.reel_stop),this.m_symbolCol.scroll(0,this.m_endEaseTime,this.m_enEaseDistance),this.m_endEaseState=l.ScrollEndState;break;case l.ScrollEndState:this.m_endEaseState=l.BeginState,this.onRollEnd()}},e.prototype.setData=function(t){this.bQuickMode=t.bQuickMode,this.bTrriger=t.bTrigger,this.setItemsOpacity(!0)},e.prototype.setView=function(t){this.view=t},e.prototype.init=function(t,e){return this.grounpId=t,this.itemIndex=e,this.resetPosition(),this},e.prototype.resetPosition=function(){this.beginPosY=1==this.grounpId?0:-w;var t=0==this.itemIndex?this.beginPosY:752+this.beginPosY+0;this.node.setPosition(0,t)},e.prototype.getCellId=function(){return this.grounpId},e.prototype.getItemId=function(){return this.itemIndex},e.prototype.setItemsActive=function(){1!=this.itemIndex&&this.setItemsOpacity(!0)},e.prototype.resetData=function(){this.addCricle=0,this.bQuickMode=!1,this.setBallValueNodeOpacity(255)},e.prototype.getItem0Cricle=function(){return(this.bQuickMode?1:m.FortuneRabbitTable.tabelInfo.circle)+this.addCricle-1},e.prototype.startRoll=function(){this.node.active=!0,this.unscheduleAllCallbacks(),b.uAudio.getInstance().playEffect(h.FortuneRabbitDefine.soundNames.reel,null,!0),this.m_endEaseState=l.BeginState,this.bQuickMode,this.m_symbolCol.scroll(0,.1,20,cc.easeSineIn())},e.prototype.onRollEndCurCircle=function(){if(this.stopNow){var t=this.m_symbolCol.lastSymbolUpperBoundOffset(0);this.bQuickMode?this.stopQuickly():this.m_symbolCol.scroll(0,(t+this.m_groupLenth+this.m_enEaseDistance)/this.m_nShowSpeed,-t-this.m_groupLenth-this.m_enEaseDistance)}},e.prototype.stopRoll=function(){this.stopNow=!0,this.m_nIndex=0,this.onRollEndCurCircle()},e.prototype.stopQuickly=function(){this.unscheduleAllCallbacks(),this.m_endEaseState=l.EaseStateNULL,this.m_symbolCol.stopForeverScroll(0),this.m_symbolCol.stopScroll(0),this.onRollEnd()},e.prototype.onItem0Stopped=function(t){0!=this.itemIndex&&this.grounpId==t&&(this.resetData(),this.stopNow=!0)},e.prototype.onHiddenAnimationLayerHitCellsNode=function(t){t.x==this.grounpId&&(this.m_symbolCol.getSymbol(0,3-t.y).opacity=255)},e.prototype.onShowAnimationLayerHitCellsNode=function(t){t.x==this.grounpId&&(this.m_symbolCol.getSymbol(0,3-t.y).opacity=0)},e.prototype.startFeatureRoll=function(){this.bTrriger=!0},e.prototype.setSizeMode=function(t){this.items.forEach(function(e){var n,i=null===(n=e.getChildByName("sprite"))||void 0===n?void 0:n.getComponent(cc.Sprite);i&&(i.sizeMode=t)})},e.prototype.setItemsOpacity=function(t){this.m_symbolCol.traversalColSymbols(0,function(e){var n=e.getChildByName("sprite");n&&(n.opacity=t?255:0)})},e.prototype.setBallValueNodeOpacity=function(t){void 0===t&&(t=255),this.m_symbolCol.traversalColSymbols(0,function(e){e.getChildByName("value").opacity=t})},e.prototype.setItemSPrite=function(){var t=this,e=m.FortuneRabbitTable.tabelInfo.screen[this.grounpId];this.setSizeMode(cc.Sprite.SizeMode.TRIMMED);var n=3;this.m_symbolCol.traversalColSymbols(0,function(i){var o=e[n],r=i.getChildByName("sprite"),a=i.getChildByName("wild"),s=i.getChildByName("value").getComponent(cc.Label);if(s.node.active=!1,a.active=0!=o.itemId,r.active=0==o.itemId,0==o.itemId)t.setItemSprite(i,0);else{var l=a.getComponent(sp.Skeleton);l.skeletonData=d.FortuneRabbitRes.getItemSkeletionData(o.itemId),51==o.itemId?(l.premultipliedAlpha=!0,l.setAnimation(0,"idle",!0)):9==o.itemId?(l.setAnimation(0,"1",!1),o.value&&(s.node.active=!0,t.setBallItemValue(s,o.value))):(82==o.itemId&&(l.premultipliedAlpha=!0),l.setAnimation(0,"spawn",!1));var c=cc.Vec3.ZERO;switch(o.itemId){case 81:c=cc.v3(0,19.5);break;case 3:c=cc.v3(0,-8);break;case 2:c=cc.v3(-5,0)}a.setPosition(c),n-=1}}),e.forEach(function(){})},e.prototype.getItemNode=function(t){return this.items[t]},e.prototype.setItemSprite=function(t,e){var n=d.FortuneRabbitRes.getItemIconById(e);if(n){var i=t.getChildByName("sprite");i&&(i.active=!0,i.getComponent(cc.Sprite).spriteFrame=n,i.scale=9==e||0==e?1:1.95)}else console.warn("spriteframe not found:"+e)},e.prototype.setBallItemValue=function(t,e){return a(this,void 0,void 0,function(){var n,i,o,r,a;return s(this,function(s){switch(s.label){case 0:return n="font1",(i=p.currency.accDiv(10*e,m.FortuneRabbitTable.tabelInfo.curBet))>=10&&i<50?n="font3":i>=50&&(n="font4"),[4,f.tcRes.load(u.gameHelper.getBundleName(c.cmd.SERVER_TYPE_FORTUNE_RABBIT),cc.Font,"artwork/font/"+n)];case 1:return o=s.sent(),t.font=o,r=2,e.toString().length>=2&&(r=0),a=p.currency.format(10*e,!0,!1,r,!0),t.string=""+a,[2]}})})},e.prototype.onClickItem=function(t){cc.systemEvent.emit(h.FortuneRabbitDefine.events.showItemTip,{cellId:this.grounpId,itemIndex:t})},e.prototype.hideItem=function(t){1!=this.itemIndex&&this.grounpId==t.x&&this.setItemsOpacity(!1,t.y)},e.prototype.onRollEnd=function(){var t=this;this.bTrriger=!1,this.stopNow=!1,this.resetData(),setTimeout(function(){t.m_symbolCol.updateColSymbolsByCount(0,4),m.FortuneRabbitTable.tabelInfo.rollendCount++;var e=3;t.m_symbolCol.traversalColSymbols(0,function(n){if(e>=0){var i=m.FortuneRabbitTable.tabelInfo.screen[t.grounpId][e];null!=i&&(9==i.itemId?!m.FortuneRabbitTable.tabelInfo.bTrigger&&t.playWildCollect(n):t.playRollEndAni(i.itemId,n)),e-=1}}),cc.systemEvent.emit(h.FortuneRabbitDefine.events.FortuneRabbitCellEndRoll,t.grounpId)},.1)},e.prototype.playRollEndAni=function(t,e){var n=e.getChildByName("wild").getComponent(sp.Skeleton);n.timeScale=1,51==t?(b.uAudio.getInstance().playEffect(h.FortuneRabbitDefine.soundNames.wild_show),n.setAnimation(0,"idle",!0)):9==t?(b.uAudio.getInstance().playEffect(h.FortuneRabbitDefine.soundNames.win1),n.setAnimation(0,"2",!1)):n.setAnimation(0,"spawn",!1)},e.prototype.playWildCollect=function(t){if(!m.FortuneRabbitTable.tabelInfo.bBallWin){var e=t;cc.systemEvent.emit(h.FortuneRabbitDefine.events.wildShow,e)}},r([v],e)}(cc.Component);n.FortuneRabbitCellItem=S,cc._RF.pop()},{"../../../../script/config/cmd":void 0,"../../../../script/config/config":void 0,"../../../../script/framework/audio/audio":void 0,"../../../../script/framework/res/res":void 0,"../../../../script/pkg/currency":void 0,"../../../update-v2/script/fortune-rabbit-define":void 0,"./Game1810Scroll":"Game1810Scroll","./fortune-rabbit-res":"fortune-rabbit-res","./fortune-rabbit-table":"fortune-rabbit-table"}],"fortune-rabbit-coins":[function(t,e,n){"use strict";cc._RF.push(e,"383d6JEeWVCG698jVWtum1V","fortune-rabbit-coins");var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,n,a):o(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,l=(a.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.initial_velocity=cc.v2(0,0),e.acceleration=cc.v2(0,-2500),e._initial_position=cc.v2(0,-20),e._emiting=!1,e._time=0,e}return o(e,t),e.prototype.onLoad=function(){this._initial_position.x=this.node.x,this._initial_position.y=this.node.y},e.prototype.emitCoin=function(){this._initial_position.x=this.node.x,this._initial_position.y=this.node.y,this._time=0,this._emiting=!0},e.prototype.resetCoin=function(){this._emiting=!1,this._time=0},e.prototype.start=function(){},e.prototype.update=function(t){this._emiting&&(this._time+=t,this.node.x=this._initial_position.x+this.initial_velocity.x*this._time+this.acceleration.x*this._time*this._time/2,this.node.y=this._initial_position.y+this.initial_velocity.y*this._time+this.acceleration.y*this._time*this._time/2,this.node.y<-1e3&&(this._emiting=!1))},r([s],e)}(cc.Component));n.default=l,cc._RF.pop()},{}],"fortune-rabbit-logic":[function(t,e,n){"use strict";cc._RF.push(e,"5fc39x4UL1L95E5Qo2b9mCr","fortune-rabbit-logic");var i=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))(function(o,r){function a(t){try{l(i.next(t))}catch(e){r(e)}}function s(t){try{l(i.throw(t))}catch(e){r(e)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}l((i=i.apply(t,e||[])).next())})},o=this&&this.__generator||function(t,e){var n,i,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(t){return function(e){return l([t,e])}}function l(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,i=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(s){r=[6,s],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.FortuneRabbitLogic=n.lines=void 0;var r=t("./protocol/slot_fortune_rabbit"),a=t("../../../../script/config/cmd"),s=t("../../../../script/event/event"),l=t("../../../../script/framework/audio/audio"),c=t("../../../../script/framework/log/log"),u=t("../../../../script/app/env"),b=t("./fortune-rabbit-view"),f=t("./fortune-rabbit-sender"),p=t("./fortune-rabbit-table"),h=t("./fortune-rabbit-res"),d=t("./fortune-rabbit-anim"),m=t("../../common/PGGameRes/script/PgGameControlPanelLogic"),g=t("../../common/PGGameRes/script/PgEvent"),y=t("../../../update-v2/script/api/api-config"),v=t("../../../../script/pkg/currency"),w=t("../../common/PGGameRes/history/CocosUtil"),S=t("../../../../ApiTemplate/script/tools/SelectGameMrg"),T=t("../../../../script/framework/res/res"),_=t("../../../update-v2/script/api/api-tip-manage"),I=t("../../../update-v2/script/fortune-rabbit-define");n.lines={1:[0,0,0],2:[0,1,0],3:[0,1,1],4:[1,1,0],5:[1,1,1],6:[1,2,1],7:[1,2,2],8:[2,2,1],9:[2,2,2],10:[2,3,2]};var R=function(){function t(e){var i,o,r=this;if(this.viewNode=e,this.curChipIndex=u.env.curGameData.betIndex,this.winnerInfo=[],this.winLevel=[],this.isFreespin=!1,this.awardAnimCount=0,this.taskQueue=[],this.sendHeartBeatIntervalId=0,this.totalWinCoin=0,this.rabbitWin=0,this.winTimes=0,this.taskLineTimer=-1,this.waitingShowBallCollectEffect=!1,this.enterFeatur=!1,this.ballCardNodeArray=[],this.holdIsBFreeTotalWin=!1,this.haveSendSpinRequest=!1,this.bIsHasSendSpineRequest=!1,this.bQuickStop=!1,this.windowTimeoutID=0,this.isStarted=!1,this.setTimeNoen=0,this.setTimeNum=0,this.setTimeConf=0,this.isWishCount=0,this.isfailSpin=!1,this.testCount=0,c.tcLog.log("FortuneRabbitLogic constructor"),this.view=null==e?void 0:e.addComponent(b.FortuneRabbitView),this.view){this.view.init(this),this.controlPanelLogic=new m.default(a.cmd.SERVER_TYPE_FORTUNE_RABBIT,this),this.controlPanelLogic.init(),this.initEvent(),f.FortuneRabbitSender.reqRoomInfo(),this.view.lateUpdate=this.update.bind(this),cc.systemEvent.on(t.EventBigWinOver,this.AnimAlertOver,this);var s=[];y.apiConfig.holdInitParam.win_info.forEach(function(t){var e={lineId:t.line,symbol:t.awards,pos:n.lines[t.line],win:10*t.win};s.push(e)});var l={tData:{tState:400,playNum:0,maxPlayers:1,tableid:139624,gameid:y.apiConfig.holdInitParam.game_id,owner:y.apiConfig.holdInitParam.user_id,level:1,betIndex:0,mutipleIndex:0,baseBet:80,bet:400,order:y.apiConfig.holdInitParam.order_no},tableResult:{money:10*y.apiConfig.holdInitParam.end_gold,screen:y.apiConfig.holdInitParam.props,trigger:1==y.apiConfig.holdInitParam.type?0:1,bet:y.apiConfig.holdInitParam.bet_size*y.apiConfig.holdInitParam.bet_mul*100,betSize:10*y.apiConfig.holdInitParam.bet_size,betMul:y.apiConfig.holdInitParam.bet_mul,balance:10*y.apiConfig.holdInitParam.end_gold,leftTimes:null!==(i=y.apiConfig.holdInitParam.frees.left_times)&&void 0!==i?i:-1,priseTrigger:y.apiConfig.holdInitParam.money.length>4,rabbitWin:null!==(o=10*y.apiConfig.holdInitParam.rabbit_win)&&void 0!==o?o:0,isWish:0,totalWin:10*y.apiConfig.holdInitParam.total_win,hits:s}};this.loginOverHandel(l),cc.systemEvent.emit("showTop"),window.addEventListener("customEventFromHTML",this.startShowGameView.bind(this)),window.addEventListener("HistoryEventFromHTML",this.historyEventFromHTML.bind(this)),_.ApiTipManage.getInstance().isTest,cc.systemEvent.on("endGame",function(t){r.onSpinRps(t)},this)}}return t.prototype.loginOverHandel=function(t){return i(this,void 0,void 0,function(){return o(this,function(){return this.isStarted?[2]:(this.isStarted=!0,c.tcLog.log("loginOverHande..."),T.tcRes.load("tip-v2",cc.Prefab,"prefab/tips_bottom"),T.tcRes.load("tip-v2",cc.Prefab,"prefab/tips_code"),T.tcRes.load("tip-v2",cc.Prefab,"prefab/tips"),t&&t.tableResult?(cc.systemEvent.emit(s.event.loadGameResOver),this.handlerTableInfo(t.tableResult),[2]):(cc.systemEvent.emit(s.event.getServerConfirm),[2]))})})},t.prototype.initEvent=function(){var t;cc.systemEvent.on(s.event.reconnectGame,this.reconnect,this),cc.systemEvent.on(I.FortuneRabbitDefine.events.FortuneRabbitCellEndRoll,this.onOneCellEndRoll,this),cc.systemEvent.on(I.FortuneRabbitDefine.events.wildShow,this.wildShow,this),cc.systemEvent.on(g.pgGameEvent.clickSpin,this.onBtnClickSpin,this),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this),cc.systemEvent.on(g.pgGameEvent.startAutoSpin,this.onStartAutoSpin,this),cc.systemEvent.on(g.pgGameEvent.quikStopAutoSpin,this.onStopAutoSpin,this),cc.systemEvent.on(I.FortuneRabbitDefine.events.showItemTip,this.showItemTip,this),cc.systemEvent.on(I.FortuneRabbitDefine.events.hideItem,this.hideItem,this),cc.systemEvent.on(I.FortuneRabbitDefine.events.cellStartRoll,this.onCellStartRoll,this),cc.systemEvent.on(null===s.event||void 0===s.event?void 0:s.event.showGameView,this.startShowGameView,this),cc.systemEvent.on(I.FortuneRabbitDefine.events.updateWinCount,this.updateWinCount,this),cc.systemEvent.on(s.event.UPDATEBET,this.betChagned,this),cc.systemEvent.on(s.event.reqSpinFail,this.onReqSpinFail,this),null===(t=this.view)||void 0===t||t.bindClickTableEvent(this.quickStop.bind(this))},t.prototype.reconnect=function(){var t;null===(t=this.view)||void 0===t||t.unscheduleAllCallbacks(),f.FortuneRabbitSender.reqRoomInfo()},t.prototype.onCellStartRoll=function(){},t.prototype.updateWinCount=function(){this.controlPanelLogic.setWinCount(this.totalWinCoin)},t.prototype.onKeyDown=function(t){t.keyCode==cc.macro.KEY.space&&cc.systemEvent.emit(g.pgGameEvent.keyboardSpaceDownEvent)},t.prototype.onBtnClickSpin=function(){c.tcLog.log("isAnimEnd:",p.FortuneRabbitTable.tabelInfo.isAnimEnd,"   bWinScoreRuning:",p.FortuneRabbitTable.tabelInfo.bWinScoreRuning,"   bTrigger:",p.FortuneRabbitTable.tabelInfo.bTrigger,"   rollLeftCountForTrigger:",p.FortuneRabbitTable.tabelInfo.rollLeftCountForTrigger),!u.env.application.ServerError||p.FortuneRabbitTable.tabelInfo.isAnimEnd?this.quickStop(void 0,!1)||p.FortuneRabbitTable.tabelInfo.isAnimEnd&&!p.FortuneRabbitTable.tabelInfo.bWinScoreRuning&&(p.FortuneRabbitTable.tabelInfo.bTrigger&&p.FortuneRabbitTable.tabelInfo.rollLeftCountForTrigger>0||(l.uAudio.getInstance().playEffect(I.FortuneRabbitDefine.soundNames.spin),p.FortuneRabbitTable.tabelInfo.bTrigger&&(p.FortuneRabbitTable.tabelInfo.wildCount=0),this.haveSendSpinRequest=!0,p.FortuneRabbitTable.tabelInfo.startRollTime=(new Date).getTime(),S.SelectGameMrg.getInstance().preDoTime=(new Date).getTime(),this.startSpin())):cc.systemEvent.emit(s.event.getEncodeConfirm,!0)},t.prototype.quickStop=function(t,e){var n,i;void 0===e&&(e=!0);var o=p.FortuneRabbitTable.tabelInfo.bRolling,r=p.FortuneRabbitTable.tabelInfo.bTrigger;if(!(!o||r||this.haveSendSpinRequest||(null===(n=this.controlPanelLogic)||void 0===n?void 0:n.IsQuickModel())||0!=this.controlPanelLogic.getSpinNum()))return p.FortuneRabbitTable.tabelInfo.bRolling=!1,cc.systemEvent.emit(s.event.BTNSPIN_STATUS_CHANGE,m.EBtnSpineStatus.UNACTIVE_RUN),this.view.setIsStopQuickly(t,e),this.bQuickStop=!1,!0;!o||r||(null===(i=this.controlPanelLogic)||void 0===i?void 0:i.IsQuickModel())||0!=this.controlPanelLogic.getSpinNum()||(this.bQuickStop=!0,cc.systemEvent.emit(s.event.BTNSPIN_STATUS_CHANGE,m.EBtnSpineStatus.UNACTIVE_RUN))},t.prototype.onReqSpinFail=function(t,e,n){c.tcLog.info("onReqSpinFail "),this.retryTimes<5?(this.retryTimes++,cc.systemEvent.emit(s.event.reqTipTryconnect,this.retryTimes),this.view.scheduleOnce(function(){S.SelectGameMrg.getInstance().preDoTime=(new Date).getTime(),S.SelectGameMrg.getInstance().spin(t,e,n)},0)):(cc.systemEvent.emit(s.event.reqTipTryFail,t,e,n),this.retryTimes=0)},t.prototype.startSpin=function(){var t,e,n,i,o,r,a,l,c,b=this;if(p.FortuneRabbitTable.tabelInfo.featureData=[],p.FortuneRabbitTable.tabelInfo.bBallWin=!1,this.retryTimes=0,p.FortuneRabbitTable.tabelInfo.bTrigger&&p.FortuneRabbitTable.tabelInfo.rollLeftCountForTrigger>0)f.FortuneRabbitSender.reqSpin((null===(t=this.controlPanelLogic)||void 0===t?void 0:t.getBetNum())||0,!0,this.controlPanelLogic.getBetSize(),this.controlPanelLogic.getBetLevel());else{var h=(null===(e=this.controlPanelLogic)||void 0===e?void 0:e.getBetNum())||0;if(p.FortuneRabbitTable.tabelInfo.bTrigger&&(p.FortuneRabbitTable.tabelInfo.bTrigger=!1,p.FortuneRabbitTable.tabelInfo.rollLeftCountForTrigger=-1,p.FortuneRabbitTable.setFirstScreen(),null===(n=this.view)||void 0===n||n.hideFortuneRabbitNode(3)),this.waitingShowBallCollectEffect=!1,null===(i=this.view)||void 0===i||i.startRoll(function(){}),p.FortuneRabbitTable.tabelInfo.bRolling=!0,h<=u.env.curGameData.balance&&f.FortuneRabbitSender.reqSpin(h,!1,this.controlPanelLogic.getBetSize(),this.controlPanelLogic.getBetLevel()),cc.systemEvent.emit(s.event.BTNSPIN_STATUS_CHANGE,this.controlPanelLogic.IsQuickModel()?m.EBtnSpineStatus.UNACTIVE_RUN:m.EBtnSpineStatus.ACTIVE_RUN),this.taskQueue=[],null===(o=this.view)||void 0===o||o.reset(),null===(a=null===(r=this.view)||void 0===r?void 0:r.awardLayer)||void 0===a||a.reset(),null===(l=this.view)||void 0===l||l.unschedule(this.startPlayOnline),null===(c=this.controlPanelLogic)||void 0===c||c.setWinCount(0),h>u.env.curGameData.balance)return this.setTimeNoen&&clearTimeout(this.setTimeNoen),this.setTimeNum&&clearTimeout(this.setTimeNum),this.setTimeConf&&clearTimeout(this.setTimeConf),void(this.setTimeNoen=setTimeout(function(){var t;b.controlPanelLogic.setSpinNumFun(0),null===(t=b.view)||void 0===t||t.stopRoll(),S.SelectGameMrg.getInstance().preDoTime=(new Date).getTime(),cc.systemEvent.emit(s.event.banlanceNoEnough,function(){S.SelectGameMrg.getInstance().preDoTime=(new Date).getTime(),cc.systemEvent.emit(s.event.BTNSPIN_STATUS_CHANGE,m.EBtnSpineStatus.ACTIVE_NORMAL)})},3e3))}},t.prototype.onStartAutoSpin=function(){var t;null===(t=this.controlPanelLogic)||void 0===t||t.resetAutoData(),this.totalWinCoin=0,this.checkIsAutoStart()},t.prototype.onStopAutoSpin=function(){this.windowTimeoutID>0&&(window.clearTimeout(this.windowTimeoutID),this.windowTimeoutID=0)},t.prototype.getWinnerInfo=function(){return this.winnerInfo},t.prototype.bQuickMode=function(){var t;return null===(t=this.controlPanelLogic)||void 0===t?void 0:t.IsQuickModel()},t.prototype.clearAllCache=function(){var t;h.FortuneRabbitRes.clearCache(),null===d.FortuneRabbitAnimAlert||void 0===d.FortuneRabbitAnimAlert||d.FortuneRabbitAnimAlert.clear(),null===(t=this.controlPanelLogic)||void 0===t||t.clear()},t.prototype.onOneCellEndRoll=function(){var t;3==p.FortuneRabbitTable.tabelInfo.rollendCount&&(l.uAudio.getInstance().stopEffect(I.FortuneRabbitDefine.soundNames.reel),p.FortuneRabbitTable.tabelInfo.rollendCount=0,p.FortuneRabbitTable.tabelInfo.bWish=!1,this.listenerRollEnd(),null===(t=this.view)||void 0===t||t.cancelCheckIsStopQuickly())},t.prototype.listenerRollEnd=function(){var t=this;if(c.tcLog.info("---roll End---,screen:"+JSON.stringify(p.FortuneRabbitTable.tabelInfo.screen)),!p.FortuneRabbitTable.tabelInfo.isRollEnd)if(p.FortuneRabbitTable.tabelInfo.isRollEnd=!0,this.ballCardNodeArray.length>0&&(this.ballCardNodeArray.forEach(function(e){t.checkWildShow(e)}),this.ballCardNodeArray=[]),p.FortuneRabbitTable.tabelInfo.bTrigger)this.onFortuenRollEnd();else{var e=0,n=p.FortuneRabbitTable.tabelInfo.featureData;p.FortuneRabbitTable.tabelInfo.featureData=[],(n&&n.length>0||p.FortuneRabbitTable.tabelInfo.bWish)&&(e=500),setTimeout(function(){t.gameOver()},e)}},t.prototype.onFortuenRollEnd=function(){var t,e;return i(this,void 0,void 0,function(){var n,a,s,l,u,b=this;return o(this,function(f){switch(f.label){case 0:if(n=p.FortuneRabbitTable.tabelInfo.featureData,p.FortuneRabbitTable.tabelInfo.featureData=[],n&&n.length>=5){for(a=new r.slot_fortune_rabbit.SpinResp,s=0;s<4;++s)for(l=0;l<3;++l)a.screen.push({id:p.FortuneRabbitTable.tabelInfo.screen[l][s].itemId});this.checkBallHits(a),this.winnerInfo=a.hits,this.taskAllLineAnim(),null===(t=this.view)||void 0===t||t.scheduleOnce(function(){var t;null===(t=b.view)||void 0===t||t.playCollectBallScore()},1)}return u=0,p.FortuneRabbitTable.tabelInfo.screen.forEach(function(t){t.forEach(function(t){return i(b,void 0,void 0,function(){return o(this,function(){return 9==t.itemId&&u++,[2]})})})}),u>=5?[4,w.default.wait(2+.3*(u+1))]:[3,2];case 1:return f.sent(),[3,4];case 2:return[4,w.default.wait(1)];case 3:f.sent(),f.label=4;case 4:return c.tcLog.log("\u7ee7\u7eed\u4e0b\u4e00\u6b21\u6447\u5956",p.FortuneRabbitTable.tabelInfo.bTrigger,p.FortuneRabbitTable.tabelInfo.rollLeftCountForTrigger,u),p.FortuneRabbitTable.tabelInfo.bTrigger&&p.FortuneRabbitTable.tabelInfo.rollLeftCountForTrigger>0?(this.winnerInfo=[],this.startSpin()):(c.tcLog.log("else ",this.totalWinCoin,this.winTimes),p.FortuneRabbitTable.tabelInfo.bTrigger?this.gameOver():null===(e=this.view)||void 0===e||e.showWinNote(this.totalWinCoin,this.winTimes,!0,!0,!0,function(){b.gameOver()})),[2]}})})},t.prototype.gameOver=function(){var t,e,n,i,o;null===(t=this.view)||void 0===t||t.getControlPanelNodeCheck(),c.tcLog.log("gameOve..."),this.isfailSpin&&(c.tcLog.log("isfailSpin  setBonus...",u.env.curGameData.balance),this.controlPanelLogic.setBonus(u.env.curGameData.balance)),p.FortuneRabbitTable.tabelInfo.bRolling=!1,null===(e=this.view)||void 0===e||e.setBtnTableActive(!1),null===(i=null===(n=this.view)||void 0===n?void 0:n.awardLayer)||void 0===i||i.reset(),this.bIsHasSendSpineRequest&&this.addTask(this.taskBigWinAnim.bind(this),null),this.addTask(this.taskLineAnim.bind(this),null),null===(o=this.view)||void 0===o||o.scheduleOnce(function(){p.FortuneRabbitTable.tabelInfo.task=!0},this.waitingShowBallCollectEffect?.15:0)},t.prototype.wildShow=function(t){this.waitingShowBallCollectEffect=!0,cc.systemEvent.emit(s.event.BTNSPIN_STATUS_CHANGE,m.EBtnSpineStatus.UNACTIVE_STOP),this.ballCardNodeArray.push(t)},t.prototype.checkIsAutoStart=function(){var t,e=this;c.tcLog.info("checkIsAutoStart","bRolling:",p.FortuneRabbitTable.tabelInfo.bRolling,"getSpinNum:",this.controlPanelLogic.getSpinNum(),"checkBalance:",u.env.curGameData.balance),p.FortuneRabbitTable.tabelInfo.bRolling||(c.tcLog.info("checkIsAutoStart  isAnimEnd num = "+this.controlPanelLogic.getSpinNum()),p.FortuneRabbitTable.tabelInfo.isAnimEnd=!0,this.controlPanelLogic.getSpinNum()>0&&this.checkBalance()?this.windowTimeoutID=window.setTimeout(function(){e.controlPanelLogic.getSpinNum()>0&&(e.startSpin(),e.controlPanelLogic.showAutoSpin())},0==this.windowTimeoutID?100:(null===(t=this.controlPanelLogic)||void 0===t?void 0:t.IsQuickModel())?290:350):(cc.systemEvent.emit(s.event.BTNSPIN_STATUS_CHANGE,m.EBtnSpineStatus.ACTIVE_NORMAL),p.FortuneRabbitTable.tabelInfo.rollLeftCountForTrigger<=0&&this.controlPanelLogic.showBtnSpin()))},t.prototype.checkBalance=function(){var t=this.controlPanelLogic.getBetNum();return!(u.env.curGameData.balance<t&&(this.controlPanelLogic.setSpinNumFun(0),1))},t.prototype.changeMusic=function(t){c.tcLog.info("change music: "+t+" ,FortuneRabbitTable.tabelInfo.musicName = "+p.FortuneRabbitTable.tabelInfo.musicName),p.FortuneRabbitTable.tabelInfo.musicName!=t&&(l.uAudio.getInstance().playMusic(t),p.FortuneRabbitTable.tabelInfo.musicName=t)},t.prototype.initTable=function(t){var e,n,i;void 0===t&&(t=!1),this.holdIsBFreeTotalWin=t,null===(e=this.view)||void 0===e||e.initCellsItem(),this.totalWinCoin>0&&(null===(n=this.view)||void 0===n||n.showWinNote(this.totalWinCoin,this.winTimes,!1,t,!1)),this.controlPanelLogic.setBonus(u.env.curGameData.balance),this.checkIsAutoStart(),null===(i=this.view)||void 0===i||i.initTableView()},t.prototype.taskBigWinAnim=function(){var t,e;return i(this,void 0,void 0,function(){var n,r,a,l,c=this;return o(this,function(){return(n=(null===(t=this.controlPanelLogic)||void 0===t?void 0:t.getBetNum())||0)&&0!=this.totalWinCoin?(r=this.totalWinCoin/n,a=p.FortuneRabbitTable.tabelInfo.winLevel[0],r<a?(p.FortuneRabbitTable.tabelInfo.task=!0,[2]):(l=0,cc.systemEvent.emit(s.event.BTNSPIN_STATUS_CHANGE,m.EBtnSpineStatus.UNACTIVE_STOP),p.FortuneRabbitTable.tabelInfo.bTrigger||(this.taskAllLineAnim(),l=1),null===(e=this.view)||void 0===e||e.scheduleOnce(function(){return i(c,void 0,void 0,function(){var t,e;return o(this,function(n){switch(n.label){case 0:return S.SelectGameMrg.getInstance().preDoTime=(new Date).getTime(),[4,d.FortuneRabbitAnimAlert.show()];case 1:return null==(t=n.sent())||t.show((null===(e=this.controlPanelLogic)||void 0===e?void 0:e.getBetNum())||0,this.totalWinCoin,this.controlPanelLogic.getBetSize()),[2]}})})},l),[2])):(p.FortuneRabbitTable.tabelInfo.task=!0,[2])})})},t.prototype.AnimAlertOver=function(){var t;c.tcLog.log("AnimAlertOve...",this.totalWinCoin,this.winTimes),null===(t=this.view)||void 0===t||t.scheduleOnce(function(){p.FortuneRabbitTable.tabelInfo.task=!0,l.uAudio.getInstance().playEffect(I.FortuneRabbitDefine.soundNames.bonus_freeend)},1.5)},t.prototype.taskAllLineAnim=function(){var t,e,n=this,i=[],o=[],r=this.getWinnerInfo();if(null==r||r.forEach(function(t){var e,r=null===(e=n.view)||void 0===e?void 0:e.getPoint(t);r&&(i=i.concat(r)),t.lineId>0&&o.push(t.lineId||0)}),0==(i=this.view.pintUnique(i)).length)return null===(t=this.view)||void 0===t||t.unscheduleAllCallbacks(),void(p.FortuneRabbitTable.tabelInfo.task=!0);null===(e=this.view)||void 0===e||e.showAllLineInfo(i,o)},t.prototype.taskLineAnim=function(t){var e,n,r,a,b;return i(this,void 0,void 0,function(){var i,f,h,d,g;return o(this,function(){return this.changeMusic(I.FortuneRabbitDefine.soundNames.bg_music),this.controlPanelLogic.setWinCount(this.totalWinCoin),p.FortuneRabbitTable.tabelInfo.bTrigger&&(null===(e=this.view)||void 0===e||e.hideFortuneRabbitNode(2)),c.tcLog.info("FortuneRabbitTable.tabelInfo.bTrigger = ",p.FortuneRabbitTable.tabelInfo.bTrigger,",this.totalWinCoin = ",this.totalWinCoin,",FortuneRabbitTable.tabelInfo.rollLeftCountForTrigger = ",p.FortuneRabbitTable.tabelInfo.rollLeftCountForTrigger),p.FortuneRabbitTable.tabelInfo.bTrigger&&this.totalWinCoin>0&&p.FortuneRabbitTable.tabelInfo.rollLeftCountForTrigger>0?(this.controlPanelLogic.setBonus(u.env.curGameData.balance,!0,p.FortuneRabbitTable.tabelInfo.lastBonus),p.FortuneRabbitTable.tabelInfo.task=!0,c.tcLog.info("taskLineAnim  totalWinCoin > 0 isAnimEnd"),p.FortuneRabbitTable.tabelInfo.isAnimEnd=!0,[2]):(i=this.getWinnerInfo())&&0!=i.length?(f=(null===(n=this.controlPanelLogic)||void 0===n?void 0:n.getBetNum())||0,h=this.totalWinCoin/f,d=p.FortuneRabbitTable.tabelInfo.winLevel[0],this.controlPanelLogic.setBonus(u.env.curGameData.balance,!0,p.FortuneRabbitTable.tabelInfo.lastBonus),null===(r=this.view)||void 0===r||r.showWinNote(this.totalWinCoin,this.winTimes,!0,0==p.FortuneRabbitTable.tabelInfo.rollLeftCountForTrigger),this.winTimes<p.FortuneRabbitTable.tabelInfo.winLevel[0]?(g=Math.floor(4*Math.random()+1),l.uAudio.getInstance().playEffect(I.FortuneRabbitDefine.soundNames["rabbit_win"+g])):l.uAudio.getInstance().playEffect(I.FortuneRabbitDefine.soundNames.rabbit_win5),h>=d&&(p.FortuneRabbitTable.tabelInfo.bWinScoreRuning=!1,c.tcLog.info("==>>>>>>>>>> bWinScoreRuning = ",p.FortuneRabbitTable.tabelInfo.bWinScoreRuning,",taskLineAnim => if (betTimes >= bigWinlevel)")),null===(a=this.view)||void 0===a||a.showCongratilationLabelEffect(),this.awardAnimCount=null!=t?t:null===(b=this.winnerInfo)||void 0===b?void 0:b.length,cc.systemEvent.emit(s.event.BTNSPIN_STATUS_CHANGE,m.EBtnSpineStatus.UNACTIVE_STOP),c.tcLog.info("taskLineAnim  isAnimEnd"),p.FortuneRabbitTable.tabelInfo.isAnimEnd=!0,this.startPlayOnline(),[2]):(p.FortuneRabbitTable.tabelInfo.task=!0,0==this.controlPanelLogic.getSpinNum()&&this.controlPanelLogic.showBtnSpin(),c.tcLog.info("taskLineAnim  !winnerInfo isAnimEnd"),p.FortuneRabbitTable.tabelInfo.isAnimEnd=!0,p.FortuneRabbitTable.tabelInfo.bTrigger&&this.totalWinCoin>0&&0==p.FortuneRabbitTable.tabelInfo.rollLeftCountForTrigger&&this.controlPanelLogic.setBonus(u.env.curGameData.balance,!0,p.FortuneRabbitTable.tabelInfo.lastBonus),[2])})})},t.prototype.startPlayOnline=function(){var t,e,n,i,o;if(this.view.scheduleOnce(this.startPlayOnline.bind(this),0==this.controlPanelLogic.getSpinNum()?1.9:1.2),this.awardAnimCount==(null===(t=this.winnerInfo)||void 0===t?void 0:t.length))this.playAllLine(),p.FortuneRabbitTable.tabelInfo.bBallWin&&(this.awardAnimCount=0,0==this.controlPanelLogic.getSpinNum()&&cc.systemEvent.emit(s.event.BTNSPIN_STATUS_CHANGE,m.EBtnSpineStatus.ACTIVE_NORMAL));else{var r=this.winnerInfo&&this.winnerInfo[this.awardAnimCount%(null===(e=this.winnerInfo)||void 0===e?void 0:e.length)];if(!r)return null===(n=this.view)||void 0===n||n.unscheduleAllCallbacks(),void(p.FortuneRabbitTable.tabelInfo.task=!0);if(0==this.controlPanelLogic.getSpinNum()){if(p.FortuneRabbitTable.tabelInfo.bBallWin)return this.playAllLine(),void cc.systemEvent.emit(s.event.BTNSPIN_STATUS_CHANGE,m.EBtnSpineStatus.ACTIVE_NORMAL);null===(i=this.view)||void 0===i||i.showOneLineInfo(r),this.awardAnimCount++,this.controlPanelLogic.showBtnSpin(),cc.systemEvent.emit(s.event.BTNSPIN_STATUS_CHANGE,m.EBtnSpineStatus.ACTIVE_NORMAL)}else null===(o=this.view)||void 0===o||o.unscheduleAllCallbacks(),p.FortuneRabbitTable.tabelInfo.task=!0}},t.prototype.playAllLine=function(){this.awardAnimCount=0,this.taskAllLineAnim()},t.prototype.bAutoMode=function(){return this.controlPanelLogic.getSpinNum()>0},t.prototype.setBonus=function(t,e){this.controlPanelLogic.setBonus(t,e,p.FortuneRabbitTable.tabelInfo.lastBonus)},t.prototype.taskReset=function(){this.totalWinCoin=0},t.prototype.addTask=function(t,e){var n={data:e,callback:t};this.taskQueue.push(n)},t.prototype.handlerTableInfo=function(t){var e,n,i,o,a,s,l,b,f,h,d,m,g,w,S,T,_,I,R,L,C,F,k,N,A,E,O;window.updateProgress&&window.updateProgress(1,4),c.tcLog.log("handlerTableInf...",t);var P=r.slot_fortune_rabbit.GameGetTableInfoResp.decode(new Uint8Array);if(P.self=new r.slot_fortune_rabbit.User,P.desc=new r.slot_fortune_rabbit.FortuneRabbitSlotLevelDesc,P.self.userId=y.apiConfig.env.userId,P.self.balance=10*t.money,P.desc.gameType=y.apiConfig.env.gameId,P.winLevel=null!==(e=y.apiConfig.holdInitParam.gameChip.multiple)&&void 0!==e?e:[5,15,35],P.lastScreen=new r.slot_fortune_rabbit.LastScreen,t.screen){for(c.tcLog.info("====>>>> data.screen not null data.bet = ",t.bet),y.gameData.betSizes[t.betIndex?t.betIndex:0],y.gameData.betLevels[t.mutipleIndex?t.mutipleIndex:0],P.lastScreen.win=t.totalWin?10*t.totalWin:0,P.lastScreen.betSize=t.betSize?10*t.betSize:0,P.lastScreen.betMul=t.betMul?t.betMul:0,P.lastScreen.amount=t.bet?10*t.bet:0,P.lastScreen.hits=t.hits?t.hits:[],P.lastScreen.leftTimes=t.leftTimes?t.leftTimes:0,P.lastScreen.feature=!!t.feature,P.lastScreen.rabbitWin=t.rabbitWin?10*t.rabbitWin:0,M=0;M<12;M++)x=new r.slot_fortune_rabbit.Symbol,P.lastScreen.screen[M]=x,P.lastScreen.screen[M].id=t.screen[M].id,t.screen[M].multi&&(P.lastScreen.screen[M].multi=v.currency.accDiv(t.screen[M].multi*t.bet,10));if(P.lastScreen.hits&&P.lastScreen.hits.length>0)for(M=0;M<P.lastScreen.hits.length;M++){var B=P.lastScreen.hits[M];B.win=10*B.win;var W=B.lineId;B.pos=p.FortuneRabbitTable.lines[W]}}else{P.lastScreen.win=0,P.lastScreen.betSize=y.gameData.betSizes[0],P.lastScreen.betMul=y.gameData.betLevels[1],P.lastScreen.amount=P.lastScreen.betSize*P.lastScreen.betMul*10,P.lastScreen.hits=[],P.lastScreen.leftTimes=-1,P.lastScreen.feature=!1,P.lastScreen.rabbitWin=0;for(var M=0;M<12;M++){var x=new r.slot_fortune_rabbit.Symbol;1==M?(x.id=9,x.multi=500*P.lastScreen.amount/10,c.tcLog.info("idData.multi = ",x.multi,"msg.lastScreen.amount = ",P.lastScreen.amount)):4==M?(x.id=9,x.multi=2*P.lastScreen.amount):7==M?(x.id=9,x.multi=v.currency.accMul(P.lastScreen.amount,.5)):10==M?(x.id=9,x.multi=v.currency.accMul(P.lastScreen.amount,.05)):x.id=6==M||8==M?51:82,P.lastScreen.screen.push(x)}this.controlPanelLogic.updateBetData(null===(n=P.lastScreen)||void 0===n?void 0:n.betSize,null===(i=P.lastScreen)||void 0===i?void 0:i.betMul,null===(o=P.lastScreen)||void 0===o?void 0:o.amount),null===(a=this.controlPanelLogic)||void 0===a||a.setBetNum(null===(s=this.controlPanelLogic)||void 0===s?void 0:s.getBetNum())}c.tcLog.info(" handlerTableInfo:"+JSON.stringify(P)),p.FortuneRabbitTable.tabelInfo.bRolling=!1,p.FortuneRabbitTable.tabelInfo.bWin=(P.lastScreen.win||0)>0,this.taskQueue=[],this.winnerInfo=null===(l=P.lastScreen)||void 0===l?void 0:l.hits,this.totalWinCoin=(null===(b=P.lastScreen)||void 0===b?void 0:b.rabbitWin)||(null===(f=P.lastScreen)||void 0===f?void 0:f.win),u.env.curGameData.balance=null===(h=P.self)||void 0===h?void 0:h.balance,u.env.user.userId=null===(d=P.self)||void 0===d?void 0:d.userId,p.FortuneRabbitTable.tabelInfo.type=null===(m=P.desc)||void 0===m?void 0:m.gameType,p.FortuneRabbitTable.tabelInfo.winLevel=P.winLevel,p.FortuneRabbitTable.tabelInfo.runScoreLevels=P.winLevel.length>0?[5,P.winLevel[0]]:[5,20],this.winLevel=P.winLevel,this.winTimes=Math.floor((null===(g=P.lastScreen)||void 0===g?void 0:g.win)/(null===(w=P.lastScreen)||void 0===w?void 0:w.amount)),this.controlPanelLogic.updateBetData(null===(S=P.lastScreen)||void 0===S?void 0:S.betSize,null===(T=P.lastScreen)||void 0===T?void 0:T.betMul,null===(_=P.lastScreen)||void 0===_?void 0:_.amount);var D=this.controlPanelLogic.getBetNum();if(c.tcLog.info("\u4e0b\u6ce8 bet = ",D),p.FortuneRabbitTable.tabelInfo.curBet=D,p.FortuneRabbitTable.tabelInfo.bBallWin=t.priseTrigger,p.FortuneRabbitTable.tabelInfo.bBallWin){var G=r.slot_fortune_rabbit.SpinResp.decode(new Uint8Array);G.screen=P.lastScreen.screen,G.hits=P.lastScreen.hits,this.checkBallHits(G),this.winnerInfo=G.hits}var j=!1;null===(I=P.lastScreen)||void 0===I||I.screen.forEach(function(t){j||(j=null!=t.id&&9!=t.id&&0!=t.id)}),P.lastScreen.screen[9].id=j?1:0,P.lastScreen.screen[11].id=j?1:0,(null===(R=P.lastScreen)||void 0===R?void 0:R.screen)?p.FortuneRabbitTable.setScreen(null===(L=P.lastScreen)||void 0===L?void 0:L.screen,(null===(C=P.lastScreen)||void 0===C?void 0:C.amount)||D):p.FortuneRabbitTable.setFirstScreen(),this.checkFeatureMode(P,null===(F=P.lastScreen)||void 0===F?void 0:F.screen,!j,null===(k=P.lastScreen)||void 0===k?void 0:k.leftTimes),this.initTable((null===(N=P.lastScreen)||void 0===N?void 0:N.rabbitWin)>0&&-1==(null===(A=P.lastScreen)||void 0===A?void 0:A.leftTimes)),null===(E=this.controlPanelLogic)||void 0===E||E.setBetNum(null===(O=this.controlPanelLogic)||void 0===O?void 0:O.getBetNum())},t.prototype.failSpinRps=function(){var t={screen:[{id:81},{id:4},{id:3},{id:81},{id:4},{id:3},{id:81},{id:4},{id:3},{id:0},{id:4},{id:0}],trigger:0,bet:this.controlPanelLogic.getBetNum()/10,balance:u.env.curGameData.balance/10,leftTimes:-1,priseTrigger:0,rabbitWin:0,isWish:0,totalWin:0};c.tcLog.info("failSpinRps msg:"+JSON.stringify(t)),this.isfailSpin=!0,this.onSpinRps(t)},t.prototype.onSpinRps=function(t){var e,n,a,s,l,b;return i(this,void 0,void 0,function(){var i,f,h,d,m;return o(this,function(){for(c.tcLog.log("onSpinRp... data = ",t),this.isfailSpin=!1,this.bIsHasSendSpineRequest=!0,clearTimeout(this.setTimeNum),clearTimeout(this.setTimeConf),S.SelectGameMrg.getInstance().preDoTime=(new Date).getTime(),(i=r.slot_fortune_rabbit.SpinResp.decode(new Uint8Array)).screen=[],f=0;f<12;f++)i.screen[f]={id:t.screen[f].id},t.screen[f].multi&&(i.screen[f].multi=v.currency.accDiv(t.screen[f].multi*t.bet,10));if(i.bet=t.bet?10*t.bet:0,i.balance=t.balance?10*t.balance:0,t.leftTimes>-1?i.leftTimes=t.leftTimes:i.leftTimes=-1,i.rabbitWin=10*t.rabbitWin,t.totalWin?i.totalWin=v.currency.accMul(t.totalWin,10):i.totalWin=0,this.holdIsBFreeTotalWin=0==t.leftTimes&&t.trigger&&t.totalWin>0,this.isWishCount++,0==t.trigger&&this.isWishCount>=20?(this.isWishCount=0,i.isWish=!0):i.isWish=!1,1==t.trigger?(i.isWish=!0,i.trigger=!0):i.trigger=!1,i.priseTrigger=!!t.priseTrigger,p.FortuneRabbitTable.tabelInfo.bBallWin=!0,i.hits=t.hits?t.hits:[],i.hits&&i.hits.length>0)for(f=0;f<i.hits.length;f++)(h=i.hits[f]).win=10*h.win,d=h.lineId,h.pos=p.FortuneRabbitTable.lines[d];return i.screen[9].id=-1==i.leftTimes?1:0,i.screen[11].id=-1==i.leftTimes?1:0,this.totalWinCoin=i.leftTimes<0?i.totalWin:i.rabbitWin,this.winTimes=Math.floor(this.totalWinCoin/i.bet),p.FortuneRabbitTable.tabelInfo.bWish=i.isWish,p.FortuneRabbitTable.tabelInfo.rollendCount=0,p.FortuneRabbitTable.tabelInfo.isQuickModel=(null===(e=this.controlPanelLogic)||void 0===e?void 0:e.IsQuickModel())||!1,this.checkFeatureMode(i,i.screen,i.leftTimes>-1,i.leftTimes),c.tcLog.info("onSpinRps data msg:"+JSON.stringify(i)),p.FortuneRabbitTable.setScreen(i.screen||[],this.controlPanelLogic.getBetNum()),i.leftTimes>-1&&i.leftTimes<7?(u.env.curGameData.balance=i.balance||0,null===(n=this.view)||void 0===n||n.startFortuneRoll()):(p.FortuneRabbitTable.tabelInfo.lastBonus=u.env.curGameData.balance-i.bet,this.controlPanelLogic.setBonus(p.FortuneRabbitTable.tabelInfo.lastBonus),u.env.curGameData.balance=i.balance||0,i.priseTrigger&&this.checkBallHits(i),this.winnerInfo=i.hits,this.taskQueue=[],this.winTimes=Math.floor(this.totalWinCoin/i.bet),p.FortuneRabbitTable.tabelInfo.bBallWin=i.priseTrigger,(m=this.controlPanelLogic.getSpinNum())>0&&(m--,this.controlPanelLogic.setSpinNumFun(m,this.totalWinCoin),this.controlPanelLogic.showAutoSpin()),this.haveSendSpinRequest=!1,this.bQuickStop&&this.quickStop(void 0,!1),this.awardAnimCount=0,null===(s=null===(a=this.view)||void 0===a?void 0:a.awardLayer)||void 0===s||s.reset(),null===(l=this.view)||void 0===l||l.resetAllAwardInfo(),p.FortuneRabbitTable.tabelInfo.rollendCount=0,p.FortuneRabbitTable.tabelInfo.bWin=(i.totalWin||0)>0,null===(b=this.view)||void 0===b||b.setIsGetData()),[2]})})},t.prototype.checkBallHits=function(t){var e;t.screen.forEach(function(n,i){var o=i%3,a=Math.floor(i/3);0==o&&((e=new r.slot_fortune_rabbit.Hit).pos=[],e.lineId=-1,t.hits.push(e)),9==n.id?e.pos.push(a):e.pos.push(-1)}),p.FortuneRabbitTable.tabelInfo.bTrigger?l.uAudio.getInstance().playEffect(I.FortuneRabbitDefine.soundNames.bon_win):l.uAudio.getInstance().playEffect(I.FortuneRabbitDefine.soundNames.bonus5_jackpot)},t.prototype.checkFeatureMode=function(t,e,n,i){p.FortuneRabbitTable.tabelInfo.rollLeftCountForTrigger=i,e.forEach(function(t){9==t.id&&p.FortuneRabbitTable.tabelInfo.featureData.push(t.multi)}),p.FortuneRabbitTable.tabelInfo.bTrigger=n},t.prototype.handlerGetCellsMatrixConfig=function(t){var e=r.slot_fortune_rabbit.GameConfigResp.decode(t),n=JSON.parse(e.config);if(n.PayLines)for(var i in n.PayLines)I.FortuneRabbitDefine.PayLines.set(i,n.PayLines[i]);c.tcLog.info("handlerRoomConfig:"+JSON.stringify(I.FortuneRabbitDefine.cellsMatrix),n)},t.prototype.setControlBtnsStatus=function(t){c.tcLog.log("setControlBtnsStatus show = ",t),this.controlPanelLogic.setControlBtnsStatus(t)},t.prototype.update=function(){if(p.FortuneRabbitTable.tabelInfo.task)if(p.FortuneRabbitTable.tabelInfo.task=!1,this.taskQueue.length>0){var t=this.taskQueue.shift();null==t||t.callback(t.data)}else this.checkIsAutoStart();0==this.controlPanelLogic.getSpinNum()&&(new Date).getTime()>S.SelectGameMrg.getInstance().preDoTime+6e4&&cc.systemEvent.emit(s.event.BTNSPIN_STATUS_CHANGE,m.EBtnSpineStatus.ACTIVE_NORMAL)},t.prototype.handler=function(){},t.prototype.stopHeartBeat=function(){},t.prototype.checkWildShow=function(t){var e;null===(e=this.view)||void 0===e||e.playWildShowEffect(t)},t.prototype.showItemTip=function(t){var e;l.uAudio.getInstance().playEffect(I.FortuneRabbitDefine.soundNames.click_element),null===(e=this.view)||void 0===e||e.showItemTip(t)},t.prototype.hideItem=function(t){var e;null===(e=this.view)||void 0===e||e.hideItem(t)},t.prototype.startShowGameView=function(){c.tcLog.info("===>>>> startShowGameView"),this.view&&(p.FortuneRabbitTable.tabelInfo.bTrigger&&p.FortuneRabbitTable.tabelInfo.rollLeftCountForTrigger>0?(this.view.tryStartFortunRabbitMode(!1),this.startSpin(),this.changeMusic(I.FortuneRabbitDefine.soundNames.bon_music),this.setControlBtnsStatus(!1)):(this.controlPanelLogic.setWinCount(this.totalWinCoin),this.taskLineAnim(0),this.changeMusic(I.FortuneRabbitDefine.soundNames.bg_music)))},t.prototype.historyEventFromHTML=function(){y.apiConfig.isHistoryFromHtml=!0,this.controlPanelLogic.onClickBtnHistory()},t.prototype.betChagned=function(){p.FortuneRabbitTable.tabelInfo.curBet=this.controlPanelLogic.getBetNum()},t.prototype.getBgMusic=function(){return I.FortuneRabbitDefine.soundNames.bg_music},t.prototype.getAutoSettingSliderClickSound=function(){return I.FortuneRabbitDefine.soundNames.slider_effect},t.prototype.getBetSizes=function(){return y.gameData.betSizes},t.prototype.getControlPanelNode=function(){var t;return null===(t=this.view)||void 0===t?void 0:t.getControlPanelNode()},t.prototype.getPayTimes=function(){return y.gameData.betLines},t.prototype.getPayTableNodeURL=function(){return"prefab/newNodePayTable"},t.prototype.getRuleNodeURL=function(){return"prefab/newNodeRule"},t.prototype.getHistoryNodeURL=function(){return"prefab/history/UIhistory"},t.prototype.getHistoryData=function(){throw new Error("Method not implemented.")},t.prototype.getClickBtnSound=function(){return I.FortuneRabbitDefine.soundNames.click},t.prototype.getClickBtnCloseSound=function(){return I.FortuneRabbitDefine.soundNames.click_close},t.EventSpin="eventSpin",t.EventBigWinOver="EventBigWinOver",t}();n.FortuneRabbitLogic=R,cc._RF.pop()},{"../../../../ApiTemplate/script/tools/SelectGameMrg":void 0,"../../../../script/app/env":void 0,"../../../../script/config/cmd":void 0,"../../../../script/event/event":void 0,"../../../../script/framework/audio/audio":void 0,"../../../../script/framework/log/log":void 0,"../../../../script/framework/res/res":void 0,"../../../../script/pkg/currency":void 0,"../../../update-v2/script/api/api-config":void 0,"../../../update-v2/script/api/api-tip-manage":void 0,"../../../update-v2/script/fortune-rabbit-define":void 0,"../../common/PGGameRes/history/CocosUtil":void 0,"../../common/PGGameRes/script/PgEvent":void 0,"../../common/PGGameRes/script/PgGameControlPanelLogic":void 0,"./fortune-rabbit-anim":"fortune-rabbit-anim","./fortune-rabbit-res":"fortune-rabbit-res","./fortune-rabbit-sender":"fortune-rabbit-sender","./fortune-rabbit-table":"fortune-rabbit-table","./fortune-rabbit-view":"fortune-rabbit-view","./protocol/slot_fortune_rabbit":"slot_fortune_rabbit"}],"fortune-rabbit-res":[function(t,e,n){"use strict";cc._RF.push(e,"83a23K0jgZHCqRYU5BUWYii","fortune-rabbit-res");var i=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))(function(o,r){function a(t){try{l(i.next(t))}catch(e){r(e)}}function s(t){try{l(i.throw(t))}catch(e){r(e)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}l((i=i.apply(t,e||[])).next())})},o=this&&this.__generator||function(t,e){var n,i,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(t){return function(e){return l([t,e])}}function l(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,i=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(s){r=[6,s],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.FortuneRabbitRes=void 0;var r=t("../../../../script/config/cmd"),a=t("../../../../script/config/config"),s=t("../../../../script/framework/audio/audio"),l=t("../../../../script/framework/log/log"),c=t("../../../../script/framework/res/res"),u=t("../../../update-v2/script/fortune-rabbit-define"),b=t("./fortune-rabbit-table");(function(t){var e,n,f,p=new Map,h=[],d=new Map;function m(){return i(this,void 0,void 0,function(){var t,e,n,i,l;return o(this,function(o){switch(o.label){case 0:t=a.gameHelper.getBundleName(r.cmd.SERVER_TYPE_FORTUNE_RABBIT),e=Object.keys(u.FortuneRabbitDefine.loadsoundNames),n=0,o.label=1;case 1:return n<e.length?(i=e[n],[4,c.tcRes.load(t,cc.AudioClip,"sound/"+u.FortuneRabbitDefine.loadsoundNames[i])]):[3,4];case 2:l=o.sent(),b=u.FortuneRabbitDefine.loadsoundNames[i],(f=l)&&(h.push(b),s.uAudio.getInstance().addClip(b,f)),o.label=3;case 3:return++n,[3,1];case 4:return[2]}var b,f})})}function g(){h.forEach(function(t){s.uAudio.getInstance().removeClip(t)}),h.length=0}t.clearCache=function(){e=void 0,n=void 0,d.clear(),p.clear(),g()},t.loadResAsync=function(){return i(this,void 0,Promise,function(){var t,i,s,u,h,g;return o(this,function(o){switch(o.label){case 0:return o.trys.push([0,20,,21]),t=a.gameHelper.getBundleName(r.cmd.SERVER_TYPE_FORTUNE_RABBIT),[4,m()];case 1:o.sent(),i=0,o.label=2;case 2:return i<b.FortuneRabbitTable.itemsIds.length?(s="artwork/itemIcons/"+b.FortuneRabbitTable.itemsIds[i],[4,c.tcRes.load(t,cc.SpriteFrame,s)]):[3,6];case 3:return u=o.sent(),p.set(b.FortuneRabbitTable.itemsIds[i],u),s="artwork/itemIcons/"+10*b.FortuneRabbitTable.itemsIds[i],[4,c.tcRes.load(t,cc.SpriteFrame,s)];case 4:u=o.sent(),p.set(10*b.FortuneRabbitTable.itemsIds[i],u),o.label=5;case 5:return++i,[3,2];case 6:return[4,c.tcRes.load(t,cc.Prefab,"prefab/fortune-rabbit-Item")];case 7:return e=o.sent(),[4,c.tcRes.load(t,cc.Prefab,"prefab/RortuneRabbitItem")];case 8:return n=o.sent(),[4,c.tcRes.load(t,cc.Prefab,"prefab/fortune-score-item")];case 9:return f=o.sent(),[4,c.tcRes.load(t,cc.Prefab,"prefab/fortune-rabbit-bigWin")];case 10:return o.sent(),[4,c.tcRes.load(t,sp.SkeletonData,"artwork/spine/avatar")];case 11:return o.sent(),[4,c.tcRes.load(t,sp.SkeletonData,"artwork/spine/h_angbao_atlas_symbols")];case 12:return h=o.sent(),d.set(4,h),[4,c.tcRes.load(t,sp.SkeletonData,"artwork/spine/h_packet_atlas_symbols")];case 13:return h=o.sent(),d.set(81,h),[4,c.tcRes.load(t,sp.SkeletonData,"artwork/spine/h_carrot_atlas_symbols")];case 14:return h=o.sent(),d.set(1,h),[4,c.tcRes.load(t,sp.SkeletonData,"artwork/spine/h_firecracker_atlas_symbols")];case 15:return h=o.sent(),d.set(2,h),[4,c.tcRes.load(t,sp.SkeletonData,"artwork/spine/h_ingot_atlas_symbols")];case 16:return h=o.sent(),d.set(82,h),[4,c.tcRes.load(t,sp.SkeletonData,"artwork/spine/s_wild")];case 17:return h=o.sent(),d.set(51,h),[4,c.tcRes.load(t,sp.SkeletonData,"artwork/spine/h_coins_atlas_symbols")];case 18:return h=o.sent(),d.set(3,h),[4,c.tcRes.load(t,sp.SkeletonData,"artwork/spine/banzi")];case 19:return h=o.sent(),d.set(9,h),[3,21];case 20:return g=o.sent(),l.tcLog.error("fortune-ox-res loadResAsync,"+g.message),[3,21];case 21:return[2]}})})},t.getItemSkeletionData=function(t){return d.get(t)},t.getCellItem=function(){return e},t.getCellItemNew=function(){return n},t.getScoreItem=function(){return f},t.getItemIconById=function(t){return p.get(t)},t.clearAudioRes=g})(n.FortuneRabbitRes||(n.FortuneRabbitRes={})),cc._RF.pop()},{"../../../../script/config/cmd":void 0,"../../../../script/config/config":void 0,"../../../../script/framework/audio/audio":void 0,"../../../../script/framework/log/log":void 0,"../../../../script/framework/res/res":void 0,"../../../update-v2/script/fortune-rabbit-define":void 0,"./fortune-rabbit-table":"fortune-rabbit-table"}],"fortune-rabbit-sender":[function(t,e,n){"use strict";cc._RF.push(e,"0567ce2lwpEeoDtDAh+9FMe","fortune-rabbit-sender"),Object.defineProperty(n,"__esModule",{value:!0}),n.FortuneRabbitSender=void 0;var i=t("../../../../ApiTemplate/script/tools/SelectGameMrg"),o=t("../../../update-v2/script/api/api-config");(function(t){t.reqRoomInfo=function(){},t.reqSpin=function(t,e,n,r){void 0===e&&(e=!1);var a=o.gameData.betSizes.indexOf(n),s=o.gameData.betLevels.indexOf(r);i.SelectGameMrg.getInstance().spin(a,s,function(){})}})(n.FortuneRabbitSender||(n.FortuneRabbitSender={})),cc._RF.pop()},{"../../../../ApiTemplate/script/tools/SelectGameMrg":void 0,"../../../update-v2/script/api/api-config":void 0}],"fortune-rabbit-table":[function(t,e,n){"use strict";cc._RF.push(e,"a063dVqmthOAINVpNgjg6Wo","fortune-rabbit-table"),Object.defineProperty(n,"__esModule",{value:!0}),n.FortuneRabbitTable=void 0;var i=t("../../../update-v2/script/fortune-rabbit-define");(function(t){function e(){var e,n,i=0;if(t.itemsShow.forEach(function(t){i+=t}),!(i<=0)){for(var o=(n=i-1,1+Math.round(Math.random()*n)),r=0;r<t.itemsShow.length;r++){var a=t.itemsShow[r];if(o<=a){e=r;break}o-=a}return e}}t.itemsIds=[0,9,1,2,3,4,51,81,82],t.itemsShow=[0,50,70,90,90,50,50,50,50],t.lines={1:[0,0,0],2:[0,1,0],3:[0,1,1],4:[1,1,0],5:[1,1,1],6:[1,2,1],7:[1,2,2],8:[2,2,1],9:[2,2,2],10:[2,3,2]},t.tabelInfo={roomId:0,type:0,screen:void 0,featureScreen:[0],circle:2,bRolling:!1,isFree:!1,musicName:"",tablebg:"normal",isInit:!1,isAnimEnd:!0,task:!1,winLevel:[20,35,50],bTrigger:!1,rollLeftCountForTrigger:0,rollendCount:0,isQuickModel:!1,bWin:!1,bWinScoreRuning:!1,bBallWin:!1,featureData:new Array,runScoreLevels:[5,20],lastBonus:0,bWish:!1,curBet:0,isRollEnd:!1,wildCount:0,startRollTime:0,isReadyFortuneAnimation:!1},t.reset=function(){t.tabelInfo.musicName="",t.tabelInfo.bRolling=!1,t.tabelInfo.isFree=!1,t.tabelInfo.isInit=!1,t.tabelInfo.isAnimEnd=!0,t.tabelInfo.task=!1,t.tabelInfo.rollendCount=0,t.tabelInfo.isQuickModel=!1,t.tabelInfo.bTrigger=!1,t.tabelInfo.rollLeftCountForTrigger=0},t.setFirstScreen=function(){t.tabelInfo.screen=i.FortuneRabbitDefine.firstScreen},t.setScreen=function(e){var n=[];e.forEach(function(t,e){var i=e%3,o=Math.floor(e/3),r=9==t.id?t.multi:0;!n[i]&&(n[i]=[]),n[i][o]={itemId:t.id,value:r}}),t.tabelInfo.screen=n},t.getPatternByCellId=function(e){void 0===e&&(e=!1);var n=[];if(e)for(var i=0;i<4;i++){var o=Math.random()>.8?9:0;n.push(o)}else for(i=0;i<4;i++){var r=2+Math.floor(Math.random()*(t.itemsIds.length-2));n.push(t.itemsIds[r])}return n},t.randByWeight=e,t.getPatternRandomItem=function(n){return void 0===n&&(n=!1),n&&0==t.tabelInfo.isReadyFortuneAnimation?Math.random()>.8?9:0:t.itemsIds[e()]}})(n.FortuneRabbitTable||(n.FortuneRabbitTable={})),cc._RF.pop()},{"../../../update-v2/script/fortune-rabbit-define":void 0}],"fortune-rabbit-view":[function(t,e,n){"use strict";cc._RF.push(e,"46698zmYU1LoJ6RNPd2BgU8","fortune-rabbit-view");var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,n,a):o(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))(function(o,r){function a(t){try{l(i.next(t))}catch(e){r(e)}}function s(t){try{l(i.throw(t))}catch(e){r(e)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}l((i=i.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var n,i,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(t){return function(e){return l([t,e])}}function l(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,i=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(s){r=[6,s],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.FortuneRabbitView=void 0;var l=t("../../../../script/framework/audio/audio"),c=t("./fortune-rabbit-award-layer"),u=t("./fortune-rabbit-table"),b=t("./fortune-rabbit-cell-item"),f=t("./fortune-rabbit-res"),p=t("./fortune-rabbit-win-node"),h=t("../../../../script/descriptor/descriptor"),d=t("../../common/PGGameRes/script/PgGameControlPanelLogic"),m=t("../../../../script/event/event"),g=t("../../../../script/framework/log/log"),y=t("../../common/PGGameRes/history/CocosUtil"),v=t("../../common/PGGameRes/history/BaseView"),w=t("../../../../script/pkg/currency"),S=t("../../../../script/config/config"),T=t("../../../../script/framework/res/res"),_=t("../../../../script/config/cmd"),I=t("../../../update-v2/script/fortune-rabbit-define"),R=cc._decorator,L=R.ccclass,C=(R.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.awardLayer=null,e.itemGrounps=[],e.startRollTimeouts=[],e.bIsStopScoll=!1,e.isGetData=!1,e.scrollForeverCount=0,e}return o(e,t),e.prototype.onLoad=function(){var t,e;y.default.traverseNodes(this.node,this.m_ui),this.nodeGame=cc.find("nodeGame",this.node),this.nodeTable=cc.find("nodeGame/nodeTable",this.node),this.nodeAnimLayer=cc.find("nodeGame/anim_layer",this.node),this.nodeMiddleView=null===(t=cc.find("nodeGame/nodeMiddle",this.node))||void 0===t?void 0:t.addComponent(p.FortuneRabbitWinNode),this.rabbitSkeletion=cc.find("nodeGame/rabbitSkeletion/spineRabbit",this.node).getComponent(sp.Skeleton),this.rabbitSkeletionTease=cc.find("nodeGame/rabbitSkeletion/spineRabbitTease",this.node).getComponent(sp.Skeleton),this.rabbitSkeletionTease.node.active=!1,this.featureCellBg=cc.find("nodeGame/cellBgFeature",this.node),this.nodeWildCollect=cc.find("nodeGame/rabbitSkeletion/ballCollect",this.node),this.leftStartRollEffect=cc.find("nodeGame/rollCellEffects/leftCellStartRollEffect",this.node),this.leftStartRollEffect_featrue=cc.find("nodeGame/rollCellEffects/leftCellStartRollEffect_feature",this.node),this.rightStartRollEffect=cc.find("nodeGame/rollCellEffects/rightCellStartRollEffect",this.node),this.rightStartRollEffect_featrue=cc.find("nodeGame/rollCellEffects/rightCellStartRollEffect_feature",this.node),this.middleStartRollEffect=cc.find("nodeGame/rollCellEffects/middleCellStartRollEffect",this.node),this.middleStartRollEffect_feature=cc.find("nodeGame/rollCellEffects/middleCellStartRollEffect_feature",this.node),this.leftLineNumFrameLight=cc.find("nodeGame/rollCellEffects/leftNumFrameLight",this.node),this.rightLineNumFrameLight=cc.find("nodeGame/rollCellEffects/rightNumFrameLight",this.node),this.nodeLastFeatureRollTip=cc.find("bottom/spriteLastFeatureCount",this.node),this.nodeFeatrueRoolCountTip=cc.find("bottom/spriteLeftRoateCountTip",this.node),this.labelCurFeatureRoolCount=cc.find("bottom/spriteLeftRoateCountTip/leftCount",this.node).getComponent(cc.Label),this.featureModeBottomShakeLight=cc.find("nodeGame/bg_infoglow_a_add",this.node),this.featureModeBottomShakeLight.active=!1,this.spFeatureEnter=cc.find("fortuneRabbitSp",this.node).getComponent(sp.Skeleton),this.spFeatureEnterBgEffect=cc.find("nodeGame/fortuneModeSheGuangBgEffect/fortuneModeSheGuangBgEffect",this.node).getComponent(sp.Skeleton),this.featureOtherGongxiEffect=cc.find("nodeGame/fortuneModeSheGuangBgEffect/featureOtherGongxiEffect",this.node),this.featureOtherGongxiEffect2=cc.find("nodeGame/fortuneModeSheGuangBgEffect/featureOtherGongxiEffect2",this.node),this.featureTopNote=cc.find("nodeGame/featureTopNote",this.node),this.btnTable=cc.find("nodeGame/tableBtn",this.node),this.awardLayer=null===(e=this.nodeAnimLayer)||void 0===e?void 0:e.addComponent(c.FortuneRabbitAwardLayer),this.nodeTable=cc.find("nodeGame/nodeTable",this.node),this.leftRightNode=cc.find("leftRightNode",this.node),this.middleNode=cc.find("middleNode",this.node),this.leftRightNode.active=!1,this.middleNode.active=!1,cc.systemEvent.on(I.FortuneRabbitDefine.events.scrollForever,this.onScrollForever,this)},e.prototype.onScrollForever=function(){if(this.scrollForeverCount++,this.scrollForeverCount>=3){var t=this.isQuick?.3:0;this.schedule(this.checkIsGetData,0,cc.macro.REPEAT_FOREVER,t)}},e.prototype.checkIsGetData=function(){var t;this.isGetData&&(this.unschedule(this.checkIsGetData),!(null===(t=this.gameLogic)||void 0===t?void 0:t.bQuickMode())&&0==this.gameLogic.getWinnerInfo().length&&u.FortuneRabbitTable.tabelInfo.bWish?(this.OnReceiveSpinResult(),this.setBtnTableActive(!1)):this.isStopQuickly?this.stopQuickly():(this.OnReceiveSpinResult(),this.schedule(this.checkIsStopQuickly,0,cc.macro.REPEAT_FOREVER,0)))},e.prototype.checkIsStopQuickly=function(){this.isStopQuickly&&(this.unschedule(this.checkIsStopQuickly),this.setBtnTableActive(!1),this.stopQuickly())},e.prototype.cancelCheckIsStopQuickly=function(){this.unschedule(this.checkIsStopQuickly)},e.prototype.onDestroy=function(){cc.systemEvent.off(I.FortuneRabbitDefine.events.scrollForever,this.onScrollForever,this)},e.prototype.init=function(t){var e,n=this;this.gameLogic=t,this.nodeMiddleView.init(this),null===(e=this.nodeMiddleView)||void 0===e||e.showAd(),this.effectClickTable=cc.find("nodeGame/click",this.node).getComponent(sp.Skeleton),this.effectClickTable.setCompleteListener(function(){n.effectClickTable.node.active=!1})},e.prototype.getControlPanelNode=function(){return cc.find("bottom/gameControlPanel",this.node)},e.prototype.bindClickTableEvent=function(t){this.btnTable.on(cc.Node.EventType.TOUCH_END,function(e){t(e)},this)},e.prototype.getPoint=function(t){var e=t.pos,n=[];return function(){for(var t=0;t<(null==e?void 0:e.length);t++)if(e[t]>=0){var i={x:0,y:0};i.x=t,i.y=e[t],n.push(i)}}(),n},e.prototype.showWinNote=function(t,e,n,i,o,r){var a,s,c=this;void 0===n&&(n=!0),void 0===i&&(i=!1),void 0===o&&(o=!0),g.tcLog.info("winTimes ==> ",e,",FortuneRabbitTable.tabelInfo.runScoreLevels = ",u.FortuneRabbitTable.tabelInfo.runScoreLevels);var b="",f="";e<u.FortuneRabbitTable.tabelInfo.runScoreLevels[0]?(b=I.FortuneRabbitDefine.soundNames.win1,f="win"):e<u.FortuneRabbitTable.tabelInfo.winLevel[0]?(b=I.FortuneRabbitDefine.soundNames.win1,f="win2"):(b=I.FortuneRabbitDefine.soundNames.win2,f="win3"),u.FortuneRabbitTable.tabelInfo.bTrigger||this.playRabbitSkeletion(f,!1,function(){c.playRabbitIdleAni()}),o&&l.uAudio.getInstance().playEffect(b),g.tcLog.info("showWinNote",t,e,n,i,o),null===(a=this.nodeMiddleView)||void 0===a||a.showWinNote(t,e,n,i,o,r),null===(s=this.nodeMiddleView)||void 0===s||s.setBgStatus(!0)},e.prototype.setBonus=function(t,e){this.gameLogic.setBonus(t,e)},e.prototype.showAllLineInfo=function(t,e){var n;l.uAudio.getInstance().playEffect(I.FortuneRabbitDefine.soundNames.winlines),this.resetAllAwardInfo(),null===(n=this.awardLayer)||void 0===n||n.setData(t,e,1)},e.prototype.showOneLineInfo=function(t){var e;this.resetAllAwardInfo(),l.uAudio.getInstance().playEffect(I.FortuneRabbitDefine.soundNames.winlines);var n=this.getPoint(t);if(n.length&&!(t.lineId<0)){var i=t.win||0;null===(e=this.awardLayer)||void 0===e||e.setData(n,[t.lineId||0],2,i)}},e.prototype.resetAllAwardInfo=function(){var t;this.itemGrounps.forEach(function(t){null==t||t.setItemsActive()}),null===(t=this.awardLayer)||void 0===t||t.hideAward()},e.prototype.pintUnique=function(t){var e=[];return t.forEach(function(t){var n=!1;e.forEach(function(e){t.x==e.x&&t.y==e.y&&(n=!0)}),n||e.push(t)}),e},e.prototype.initTableView=function(){this.playRabbitIdleAni(),this.featureCellBg.active=u.FortuneRabbitTable.tabelInfo.bTrigger},e.prototype.playRabbitIdleAni=function(){var t=this;this.unschedule(this.playOtherRabbitIdleAni),u.FortuneRabbitTable.tabelInfo.wildCount>=40?(this.playRabbitSkeletion("idle2",!0),this.rabbitSkeletion.setAnimation(1,"vfx_lvl3",!0)):u.FortuneRabbitTable.tabelInfo.wildCount>=20&&u.FortuneRabbitTable.tabelInfo.wildCount<40?(this.playRabbitSkeletion("idle2",!0),this.rabbitSkeletion.setAnimation(1,"vfx_lvl2",!0)):(this.playRabbitSkeletion("idle",!0),this.rabbitSkeletion.setAnimation(1,"vfx_lvl1",!0)),this.scheduleOnce(function(){t.playOtherRabbitIdleAni()},200)},e.prototype.playOtherRabbitIdleAni=function(){var t=this;Math.random()>.5&&this.playRabbitSkeletion("idle3",!1,function(){t.playRabbitIdleAni()})},e.prototype.initCellsItem=function(){var t,e=this;null===(t=this.nodeTable)||void 0===t||t.children.forEach(function(t,n){var i=cc.instantiate(f.FortuneRabbitRes.getCellItemNew());i.setParent(t);var o=i.addComponent(b.FortuneRabbitCellItem);null==o||o.init(n,0),e.itemGrounps[2*n]=o})},e.prototype.startRoll=function(t){var e,n;this.bIsStopScoll=!1,this.isGetData=!1,this.scrollForeverCount=0,this.isStopQuickly=!1,this.unscheduleAllCallbacks(),this.playRabbitIdleAni(),this.isQuick=null===(e=this.gameLogic)||void 0===e?void 0:e.bQuickMode(),this.isQuick||this.setBtnTableActive(!0),u.FortuneRabbitTable.tabelInfo.isAnimEnd=!1,cc.Tween.stopAllByTarget(this.featureModeBottomShakeLight),this.featureModeBottomShakeLight.active=!1;var i=(null===(n=this.gameLogic)||void 0===n?void 0:n.bQuickMode())?.3:.5,o=u.FortuneRabbitTable.tabelInfo.bTrigger?2:1;this.playCellFrameEffect(this.middleStartRollEffect,0,o,.15,.15),this.playCellFrameEffect(this.leftStartRollEffect,.15,o,.15,.15),this.playCellFrameEffect(this.rightStartRollEffect,.15,o,.15,.15),this.playCellFrameEffect(this.leftLineNumFrameLight,.3,1,i,i),this.playCellFrameEffect(this.rightLineNumFrameLight,.3,1,i,i),this.startCellRolling(!1,t)},e.prototype.setIsGetData=function(){this.isGetData=!0},e.prototype.OnReceiveSpinResult=function(){this.unscheduleAllCallbacks(),u.FortuneRabbitTable.tabelInfo.bTrigger?(u.FortuneRabbitTable.tabelInfo.isReadyFortuneAnimation=!0,this.tryStartFortunRabbitMode(),this.stopRoll(8.7)):this.startNormalMode()},e.prototype.stopRoll=function(t){void 0===t&&(t=0),this.scheduleOnce(this.startStopRoll,t)},e.prototype.startStopRoll=function(){return a(this,void 0,void 0,function(){var t=this;return s(this,function(){return this.gameLogic.bQuickMode()&&!u.FortuneRabbitTable.tabelInfo.bTrigger?this.itemGrounps.forEach(function(t){t.stopRoll()}):this.itemGrounps.forEach(function(e){var n=0;1==e.grounpId?n=.25:2==e.grounpId&&(n=.55),t.startRollTimeouts.push(setTimeout(function(){t.bIsStopScoll||(g.tcLog.log("element.grounpId1111 call stop:",e.grounpId),e.stopRoll())},1e3*n))}),[2]})})},e.prototype.setIsStopQuickly=function(t,e){if(void 0===e&&(e=!1),e&&t){this.effectClickTable.node.active=!0,this.effectClickTable.setAnimation(0,"animation",!1);var n=t.getLocation(),i=this.nodeGame.convertToNodeSpaceAR(n);this.effectClickTable.node.setPosition(i)}this.isStopQuickly=!0},e.prototype.stopQuickly=function(){this.bIsStopScoll=!0,this.startRollTimeouts.forEach(function(t){window.clearTimeout(t)}),this.startRollTimeouts.length=0,this.unschedule(this.startStopRoll),this.itemGrounps.forEach(function(t){t.stopQuickly()})},e.prototype.setBtnTableActive=function(t){this.btnTable.active=t},e.prototype.startNormalMode=function(){var t,e=!1;!(null===(t=this.gameLogic)||void 0===t?void 0:t.bQuickMode())&&0==this.gameLogic.getWinnerInfo().length&&u.FortuneRabbitTable.tabelInfo.bWish&&(cc.systemEvent.emit(m.event.BTNSPIN_STATUS_CHANGE,d.EBtnSpineStatus.UNACTIVE_RUN),this.tryStartFortunRabbitMode(),e=!0);(new Date).getTime(),u.FortuneRabbitTable.tabelInfo.startRollTime;this.stopRoll(e?2.5:this.gameLogic.bQuickMode()?0:.5)},e.prototype.tryStartFortunRabbitMode=function(t){var e=this;void 0===t&&(t=!0),t&&this.playRabbitSkeletion("tease_start",!1,function(){e.playRabbitSkeletion("tease_idle",!1)}),cc.systemEvent.emit(m.event.BTNSPIN_STATUS_CHANGE,d.EBtnSpineStatus.UNACTIVE_RUN,!this.gameLogic.bQuickMode()),t?(this.spFeatureEnter.node.active=!0,this.spFeatureEnter.setAnimation(0,"logo",!0),this.m_ui.feature_spin.active=!1,l.uAudio.getInstance().playEffect(I.FortuneRabbitDefine.soundNames.reel_bon),l.uAudio.getInstance().playEffect(I.FortuneRabbitDefine.soundNames.rabbit_wish),cc.tween(this.node).to(2.5,{scale:.91}).call(function(){u.FortuneRabbitTable.tabelInfo.bTrigger?e.startFortuneMode():(e.playRabbitSkeletion("tease_exit",!1,function(){e.playRabbitIdleAni()}),e.hideFortuneRabbitNode(1))}).delay(.5).call(function(){g.tcLog.log("setBtnSpineStatus:  tryStartFortunRabbitMode over")}).start(),this.scheduleOnce(function(){cc.tween(e.featureCellBg).set({active:!0,opacity:0}).to(.5,{opacity:255}).start(),e.playCellFrameEffect(e.middleStartRollEffect_feature,0,1),e.playCellFrameEffect(e.leftStartRollEffect_featrue,.15,1),e.playCellFrameEffect(e.rightStartRollEffect_featrue,.15,1)},2)):(this.node.scale=.91,this.nodeFeatrueRoolCountTip.setPosition(cc.v3(-111,-178,0)))},e.prototype.modeBottomShakeLight=function(){u.FortuneRabbitTable.tabelInfo.bTrigger,cc.tween(this.featureModeBottomShakeLight).set({active:!0,opacity:0}).to(.1,{opacity:190}).union().repeat(4).start()},e.prototype.freeMovie=function(){var t=this;this.scheduleOnce(function(){t.spFeatureEnter.node.active=!0,t.m_ui.feature_spin.active=!0,t.spFeatureEnter.setAnimation(0,"tanchu",!1),t.spFeatureEnter.setCompleteListener(function(){t.spFeatureEnter.node.active=!1,t.spFeatureEnter.setCompleteListener(function(){})}),t.spFeatureEnterBgEffect.node.active=!0,t.spFeatureEnterBgEffect.setAnimation(0,"sheguang",!0)},.9),this.scheduleOnce(function(){t.addScoreFun()},2.4)},e.prototype.addScoreFun=function(){return a(this,void 0,void 0,function(){var t,e,n,i,o,r,a;return s(this,function(c){switch(c.label){case 0:t=this.gameLogic.controlPanelLogic.getBetNum(),e=[.5,1,2,5,10,20,50,500],n=10,i=0,(o=cc.instantiate(this.nodeTable)).removeAllChildren(),o.active=!0,o.setPosition(cc.v2(0,90)),o.setParent(this.node),r=function(r){var a,c,b,p,h,d,m,g,y,v,R,L,C,F;return s(this,function(s){switch(s.label){case 0:return a=cc.Vec2.ZERO,c=cc.Vec2.ZERO,b=cc.Vec2.ZERO,p=0,h=!1,d=!1,m=Math.random(),g=Math.floor(Math.random()*e.length),r==Math.floor(n/2)&&0==h&&(h=!0,g=e.length-1),r==Math.floor(n/3)&&0==d&&(d=!0,g=0),v="font1",(y=e[g])>=10&&y<50?v="font3":y>=50&&(v="font4"),[4,T.tcRes.load(S.gameHelper.getBundleName(_.cmd.SERVER_TYPE_FORTUNE_RABBIT),cc.Font,"artwork/font/"+v)];case 1:return R=s.sent(),p=y*t,L=cc.instantiate(f.FortuneRabbitRes.getScoreItem()),(C=cc.find("spine/itemAddedValue",L).getComponent(cc.Label)).font=R,C.string=w.currency.format(p,!0,!1,0,!0),L.setParent(o),L.setPosition(cc.v2(0,o.height/2-L.height)),m<.33?(b=cc.v2(L.width/2-o.width/2+35,0),a=cc.v2(L.width/2-o.width/2+35,o.height/2-L.height),c=cc.v2(L.width/2-o.width/2+35,0)):m<.66?(b=cc.v2(0,0),a=cc.v2(0,o.height/2-L.height),c=cc.v2(0,0)):(b=cc.v2(o.width/2-L.width/2-35,0),a=cc.v2(o.width/2-L.width/2-35,o.height/2-L.height),c=cc.v2(o.width/2-L.width/2-35,0)),L.opacity=0,L.scale=.3,L.active=!1,F=.2*r+Math.random()/10,cc.tween,cc.tween(L).delay(F).set({active:!0}).call(function(){l.uAudio.getInstance().playEffect(I.FortuneRabbitDefine.soundNames.bon_xiu)}).bezierTo(.6,a,c,b).to(.3,{position:cc.v3(b.x,-o.height/2-L.height,0)}).call(function(){++i==n&&(o.destroy(),u.FortuneRabbitTable.tabelInfo.isReadyFortuneAnimation=!1),L.destroy()}).start(),cc.tween(L).delay(F).to(.25,{scale:1+.12*g}).to(.25,{scale:1}).start(),cc.tween(L).delay(F).to(.15,{opacity:255}).start(),[2]}})},a=0,c.label=1;case 1:return a<n?[5,r(a)]:[3,4];case 2:c.sent(),c.label=3;case 3:return a++,[3,1];case 4:return[2]}})})},e.prototype.startFortuneMode=function(){var t=this;g.tcLog.info("startFortuneMode"),l.uAudio.getInstance().stopMusic(),this.gameLogic.changeMusic(I.FortuneRabbitDefine.soundNames.bon_music),this.scheduleOnce(function(){l.uAudio.getInstance().playEffect(I.FortuneRabbitDefine.soundNames.rabbit_bon)},.1),this.nodeMiddleView.showAd("feature",!1),this.scheduleOnce(function(){l.uAudio.getInstance().playEffect(I.FortuneRabbitDefine.soundNames.bg_bigwin_cheer)},.5),cc.tween(this.featureOtherGongxiEffect).set({active:!0,opacity:0}).to(.3,{opacity:255}).to(.3,{opacity:0}).union().repeatForever().start(),cc.tween(this.featureOtherGongxiEffect2).set({active:!0,opacity:0}).to(.3,{opacity:255}).to(.3,{opacity:0}).union().repeatForever().start(),cc.tween(this.featureModeBottomShakeLight).set({active:!0,opacity:0}).to(.5,{opacity:255}).to(.5,{opacity:0}).union().repeatForever().start(),this.freeMovie(),this.playRabbitSkeletion("freespin",!1,function(){t.rabbitSkeletion.node.active=!1}),this.scheduleOnce(function(){t.gameLogic.setControlBtnsStatus(!1)},.5),this.scheduleOnce(function(){t.itemGrounps.forEach(function(t){t.startFeatureRoll()}),t.labelCurFeatureRoolCount.string=u.FortuneRabbitTable.tabelInfo.rollLeftCountForTrigger+1+"",t.scheduleOnce(function(){t.labelCurFeatureRoolCount.string=u.FortuneRabbitTable.tabelInfo.rollLeftCountForTrigger+""},4),cc.tween(t.featureTopNote).set({active:!0,opacity:0}).to(.3,{opacity:255}).start(),cc.tween(t.nodeFeatrueRoolCountTip).delay(.3).set({active:!0,opacity:0,position:cc.v3(-111,-138)}).to(.2,{opacity:255,position:cc.v3(-111,-178)}).start()},1.5)},e.prototype.startFortuneRoll=function(t){this.resetAllAwardInfo(),this.nodeLastFeatureRollTip.active=0==u.FortuneRabbitTable.tabelInfo.rollLeftCountForTrigger,this.nodeFeatrueRoolCountTip.active=0!=u.FortuneRabbitTable.tabelInfo.rollLeftCountForTrigger,this.labelCurFeatureRoolCount.string=u.FortuneRabbitTable.tabelInfo.rollLeftCountForTrigger+"",g.tcLog.log("rollLeftCountForTrigger:",u.FortuneRabbitTable.tabelInfo.rollLeftCountForTrigger),u.FortuneRabbitTable.tabelInfo.bTrigger&&(this.nodeLastFeatureRollTip.active||this.nodeFeatrueRoolCountTip.active)?(this.getControlPanelNode().getChildByName("btnSpine").y=2e3,this.getControlPanelNode().getChildByName("btnAutostop").y=2e3):(this.getControlPanelNode().getChildByName("btnSpine").y=135,this.getControlPanelNode().getChildByName("btnAutostop").y=130),this.playCellFrameEffect(this.middleStartRollEffect_feature,0,1,.15,.15),this.playCellFrameEffect(this.leftStartRollEffect_featrue,.15,1,.15,.15),this.playCellFrameEffect(this.rightStartRollEffect_featrue,.15,1,.15,.15),this.playCellFrameEffect(this.leftLineNumFrameLight,.3,1,.5,.5),this.playCellFrameEffect(this.rightLineNumFrameLight,.3,1,.5,.5),this.startCellRolling(!0,t),this.isGetData=!1,this.isStopQuickly=!1,this.isQuick=!1,this.setBtnTableActive(!1)},e.prototype.getControlPanelNodeCheck=function(){u.FortuneRabbitTable.tabelInfo.bTrigger&&0==u.FortuneRabbitTable.tabelInfo.rollLeftCountForTrigger&&(this.getControlPanelNode().getChildByName("btnSpine").y=135,this.getControlPanelNode().getChildByName("btnAutostop").y=130)},e.prototype.createFeatureModeCellItems=function(t){for(var e=[[{itemId:0,value:0},{itemId:0,value:0},{itemId:0,value:0},{itemId:0,value:0}],[{itemId:0,value:0},{itemId:0,value:0},{itemId:0,value:0},{itemId:0,value:0}],[{itemId:0,value:0},{itemId:0,value:0},{itemId:0,value:0},{itemId:0,value:0}]],n=0;n<t.length;++n){for(var i=9,o=void 0,r=void 0;9==i;){var a=1==(o=Math.floor(3*Math.random()))?4:3;r=Math.floor(Math.random()*a),i=e[o][r].itemId}e[o][r]={itemId:9,value:t[n]}}return e},e.prototype.startCellRolling=function(t,e){var n=this;void 0===t&&(t=!1),u.FortuneRabbitTable.tabelInfo.isRollEnd=!1;var i=0;this.startRollTimeouts.length=0;var o=this.getCellStartRollDelayTime();this.itemGrounps.forEach(function(r,a){var s,l,c=Math.floor(a/2);i=c*o,(null===(s=n.gameLogic)||void 0===s?void 0:s.bQuickMode())&&(i=0),r.setData({bQuickMode:(null===(l=n.gameLogic)||void 0===l?void 0:l.bQuickMode())&&!u.FortuneRabbitTable.tabelInfo.bTrigger,bTrigger:t}),null==r||r.setView(n),n.startRollTimeouts.push(window.setTimeout(function(){null==r||r.startRoll(),2==c&&0==r.itemIndex&&e&&e()},1e3*i))}),t&&this.stopRoll(i+2)},e.prototype.getCellStartRollDelayTime=function(){var t;return(null===(t=this.gameLogic)||void 0===t?void 0:t.bQuickMode())?0:.06},e.prototype.reset=function(){this.nodeMiddleView.reset(),this.resetAllAwardInfo(),this.awardLayer.hideItemTip(),cc.Tween.stopAllByTarget(this.featureOtherGongxiEffect2),this.featureOtherGongxiEffect2.active=!1},e.prototype.showCongratilationLabelEffect=function(){cc.tween(this.featureOtherGongxiEffect2).set({active:!0,opacity:0}).to(.3,{opacity:255}).to(.3,{opacity:0}).union().repeatForever().start()},e.prototype.hideFortuneRabbitNode=function(t){return a(this,void 0,void 0,function(){var e=this;return s(this,function(n){switch(n.label){case 0:return 1!=t?[3,1]:(cc.tween(this.node).to(.5,{scale:1}).start(),cc.tween(this.featureCellBg).to(.3,{opacity:0}).start(),this.spFeatureEnter.node.active=!1,[3,4]);case 1:return 2!=t?[3,3]:(this.rabbitSkeletion.node.active=!0,this.playRabbitSkeletion("freespin",!1),this.rabbitSkeletion.node.opacity=0,this.featureTopNote.active=!1,this.spFeatureEnterBgEffect.node.active=!1,cc.Tween.stopAllByTarget(this.featureOtherGongxiEffect),cc.Tween.stopAllByTarget(this.featureOtherGongxiEffect2),this.featureOtherGongxiEffect.active=!1,this.featureOtherGongxiEffect2.active=!1,cc.Tween.stopAllByTarget(this.featureModeBottomShakeLight),this.featureModeBottomShakeLight.active=!1,cc.tween(this.node).to(.5,{scale:1}).start(),[4,y.default.wait(.5)]);case 2:return n.sent(),this.rabbitSkeletion.node.opacity=255,this.playRabbitSkeletion("respawn",!1,function(){e.playRabbitIdleAni()}),this.gameLogic.setControlBtnsStatus(!0),cc.tween(this.nodeLastFeatureRollTip).to(.3,{opacity:0}).call(function(){e.nodeLastFeatureRollTip.active=!1,e.nodeFeatrueRoolCountTip.active=!1,e.nodeLastFeatureRollTip.opacity=255}).start(),[3,4];case 3:cc.tween(this.featureCellBg).to(.3,{opacity:0}).start(),n.label=4;case 4:return[2]}})})},e.prototype.setItemsOpacity=function(t){this.itemGrounps.forEach(function(e){e.setItemsOpacity(t)})},e.prototype.lateUpdate=function(){},e.prototype.playRabbitSkeletion=function(t,e,n){var i=this;if(void 0===e&&(e=!1),this.rabbitSkeletion){if("tease_start"==t||"tease_idle"==t||"tease_exit"==t){if(this.rabbitSkeletionTease.node.active=!0,this.rabbitSkeletionTease.getCurrent(0).animation.name!=t){var o=this.rabbitSkeletionTease.setAnimation(0,t,e);n&&this.rabbitSkeletionTease.setTrackCompleteListener(o,function(){i.rabbitSkeletionTease.node.active=!1})}}else this.rabbitSkeletionTease.node.active=!1;if(!this.rabbitSkeletion.node.active&&(this.rabbitSkeletion.node.active=!0),this.rabbitSkeletion.node.active=!0,this.rabbitSkeletion.getCurrent(0).animation.name!=t){var r=this.rabbitSkeletion.setAnimation(0,t,e);n&&this.rabbitSkeletion.setTrackCompleteListener(r,function(){n()})}}},e.prototype.playCellFrameEffect=function(t,e,n,i,o){void 0===i&&(i=.3),void 0===o&&(o=.2),t&&(cc.Tween.stopAllByTarget(t),cc.tween(t).delay(e).set({active:!0,opacity:0}).to(i,{opacity:255}).to(o,{opacity:0}).repeat(n).call(function(){t.active=!1}).start())},e.prototype.playWildShowEffect=function(t){var e=this,n=cc.instantiate(this.nodeWildCollect);if(n){null==n||n.setParent(this.nodeAnimLayer),n.active=!0,l.uAudio.getInstance().playEffect(I.FortuneRabbitDefine.soundNames.bonus_showfly);var i=t.convertToWorldSpaceAR(cc.Vec3.ZERO),o=this.nodeAnimLayer.convertToNodeSpaceAR(i);n.setPosition(o);var r=n.getComponent(cc.Animation);r.play(),r.on(cc.Animation.EventType.FINISHED,function(){n.getChildByName("piaolz").active=!0,cc.tween(n).to(.3,{position:cc.v3(-135.5,570.5,0)}).call(function(){null==n||n.destroy();var t;u.FortuneRabbitTable.tabelInfo.wildCount++,t=u.FortuneRabbitTable.tabelInfo.wildCount>=40?e.rabbitSkeletion.setAnimation(2,"vfx_collect_fx2_to_3",!0):u.FortuneRabbitTable.tabelInfo.wildCount>=20&&u.FortuneRabbitTable.tabelInfo.wildCount<40?e.rabbitSkeletion.setAnimation(2,"vfx_collect_fx1_to_2",!0):e.rabbitSkeletion.setAnimation(2,"vfx_collect_fx1",!0),e.rabbitSkeletion.setTrackCompleteListener(t,function(){e.rabbitSkeletion.clearTrack(2)}),e.playWildCollectMusic()}).start()})}},e.prototype.playWildCollectMusic=function(){var t=this;l.uAudio.getInstance().playEffect(I.FortuneRabbitDefine.soundNames.wild_show),this.playRabbitSkeletion("wild_collect",!1,function(){t.playRabbitIdleAni()})},e.prototype.playCollectBallScore=function(){var t=this,e=0;u.FortuneRabbitTable.tabelInfo.screen.forEach(function(n){n.forEach(function(n){return a(t,void 0,void 0,function(){return s(this,function(){return 9==n.itemId&&e++,[2]})})})}),e>=5&&(this.awardLayer.playCollectBallScore(this.nodeMiddleView.node,function(e){return a(t,void 0,void 0,function(){return s(this,function(){return this.nodeMiddleView.playFeatureModeAddScore(e),[2]})})}),this.itemGrounps.forEach(function(t){t.setBallValueNodeOpacity(128)}))},e.prototype.showItemTip=function(t){var e,n=t.cellId,i=t.itemIndex;null===(e=this.awardLayer)||void 0===e||e.showItemTip(n,i)},e.prototype.hideItem=function(t){this.itemGrounps.forEach(function(e){e.hideItem(t)})},e.prototype.send=function(){},r([h.throttle(300)],e.prototype,"playWildCollectMusic",null),r([L],e)}(v.BaseView));n.FortuneRabbitView=C,cc._RF.pop()},{"../../../../script/config/cmd":void 0,"../../../../script/config/config":void 0,"../../../../script/descriptor/descriptor":void 0,"../../../../script/event/event":void 0,"../../../../script/framework/audio/audio":void 0,"../../../../script/framework/log/log":void 0,"../../../../script/framework/res/res":void 0,"../../../../script/pkg/currency":void 0,"../../../update-v2/script/fortune-rabbit-define":void 0,"../../common/PGGameRes/history/BaseView":void 0,"../../common/PGGameRes/history/CocosUtil":void 0,"../../common/PGGameRes/script/PgGameControlPanelLogic":void 0,"./fortune-rabbit-award-layer":"fortune-rabbit-award-layer","./fortune-rabbit-cell-item":"fortune-rabbit-cell-item","./fortune-rabbit-res":"fortune-rabbit-res","./fortune-rabbit-table":"fortune-rabbit-table","./fortune-rabbit-win-node":"fortune-rabbit-win-node"}],"fortune-rabbit-win-node":[function(t,e,n){"use strict";cc._RF.push(e,"28663Pv8/pMlLbyk2rNTAhL","fortune-rabbit-win-node");var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,n,a):o(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))(function(o,r){function a(t){try{l(i.next(t))}catch(e){r(e)}}function s(t){try{l(i.throw(t))}catch(e){r(e)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}l((i=i.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var n,i,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(t){return function(e){return l([t,e])}}function l(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,i=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(s){r=[6,s],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.FortuneRabbitWinNode=void 0;var l=t("../../../../script/app/env"),c=t("../../../../script/framework/audio/audio"),u=t("../../../../script/framework/i18n/i18n-sprite"),b=t("../../../../script/framework/log/log"),f=t("../../../../script/pkg/currency"),p=t("../../../update-v2/script/fortune-rabbit-define"),h=t("./fortune-rabbit-table"),d=cc._decorator,m=d.ccclass,g=(d.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.adIndex=0,e.adImgNames=["ad1","ad2","ad3"],e.bAdMode=!0,e.curWinScore=0,e}return o(e,t),e.prototype.onLoad=function(){this.labelWinCount=cc.find("nodeWin/winNote/labelWinCount",this.node).getComponent(cc.Label),this.i18WinNodeTip=cc.find("nodeWin/winNote/winTip",this.node).getComponent(u.default),this.winNode=cc.find("nodeWin",this.node),this.winNote=cc.find("nodeWin/winNote",this.node),this.winNodeBgNormal=cc.find("winBg/winBg_normal",this.node),this.winNodeBgMiddle=cc.find("winBg/winBg_middle",this.node),this.winNodeBgHigh=cc.find("winBg/winBg_high",this.node),this.spriteAd=cc.find("nodeWin/ads",this.node).getComponent(cc.Sprite),this.nodeGuangDotTop=cc.find("winBg/guangFrameTop",this.node),this.nodeGuangDotBottom=cc.find("winBg/guangFrameBottom",this.node),this.nodeWinBgEnd=cc.find("winBgEnd",this.node),this.nodeStarEffect=cc.find("winBg/starEffectAni",this.node).getComponent(cc.Animation),this.nodeCoinsAni=cc.find("aniCoin",this.node).getComponent(cc.Animation),this.nodeGuangRotater=cc.find("winBg/effect/guangRotateMask/guangRotate",this.node),this.nodeShaoGuangAni=cc.find("winBg/shaoguangAni",this.node).getComponent(cc.Animation),this.nodeCongratulationAni=cc.find("aniCongratulation",this.node).getComponent(cc.Animation),this.i18SpriteAd=this.spriteAd.node.getComponent(u.default)},e.prototype.init=function(t){this.view=t},e.prototype.updateBonus=function(){this.view.setBonus(l.env.curGameData.balance,!0)},e.prototype.showAd=function(t,e){var n,i,o;return void 0===e&&(e=!0),a(this,void 0,void 0,function(){var r,a,l=this;return s(this,function(s){switch(s.label){case 0:return this.spriteAd?(clearTimeout(this.gunTime),this.spriteAd.node.active=!0,this.winNote.active=!1,this.nodeWinBgEnd.active=!0,this.winNodeBgMiddle.active=!1,this.winNodeBgHigh.active=!1,this.winNodeBgNormal.active=!0,this.winNodeBgNormal.opacity=255,this.nodeStarEffect.node.active=!1,this.nodeCongratulationAni.node.active=!1,this.nodeGuangRotater.parent.parent.active=!1,this.nodeShaoGuangAni.node.active=!1,this.nodeGuangDotBottom.active=!1,this.nodeGuangDotTop.active=!1,this.setBgStatus(!0),cc.Tween.stopAllByTarget(null===(n=this.spriteAd)||void 0===n?void 0:n.node),[4,this.changeAd(t)]):[2];case 1:return s.sent(),r=this.spriteAd.node.getContentSize(),a=this.winNode.getContentSize().width,r.width>a?(null===(i=this.spriteAd)||void 0===i||i.node.setPosition(new cc.Vec3((r.width-a)/2+40,3,0)),clearTimeout(this.gunTime),this.gunTime=setTimeout(function(){var e;cc.tween(null===(e=l.spriteAd)||void 0===e?void 0:e.node).by(r.width/79,{position:cc.v3(-r.width,3,0)}).call(function(){l.showAd(t)}).start()},3e3)):(null===(o=this.spriteAd)||void 0===o||o.node.setPosition(cc.Vec3.ZERO),e&&(clearTimeout(this.gunTime),this.gunTime=setTimeout(function(){l.showAd(t)},5e3))),[2]}})})},e.prototype.changeAd=function(t){return a(this,void 0,void 0,function(){var e;return s(this,function(n){switch(n.label){case 0:return e=t||this.adImgNames[this.adIndex%this.adImgNames.length],this.adIndex+=t?0:1,this.i18SpriteAd.spriteName=""+e,[4,this.i18SpriteAd.refresh()];case 1:return n.sent(),[2]}})})},e.prototype.showWinNote=function(t,e,n,i,o,r){return void 0===n&&(n=!0),void 0===i&&(i=!1),void 0===o&&(o=!0),a(this,void 0,void 0,function(){var a,l,u,d=this;return s(this,function(){return this.curWinScore=t,this.bAdMode=!1,this.spriteAd.node.active=!1,b.tcLog.log("showWinNote unscheduleAllCallback "),clearTimeout(this.gunTime),clearInterval(this.showWinNoteNum),cc.Tween.stopAllByTarget(this.spriteAd.node),cc.Tween.stopAllByTarget(this.winNote),this.nodeWinBgEnd.active=!1,this.winNote.active=!0,this.playBaseEffect(e),e>=h.FortuneRabbitTable.tabelInfo.runScoreLevels[0]&&e<h.FortuneRabbitTable.tabelInfo.runScoreLevels[1]?(o&&c.uAudio.getInstance().stopEffect(p.FortuneRabbitDefine.soundNames.rabbit_runscore),o&&c.uAudio.getInstance().playEffect(p.FortuneRabbitDefine.soundNames.runscore,null,!0),h.FortuneRabbitTable.tabelInfo.bWinScoreRuning=!0,b.tcLog.info("==>>>>>>>>>> bWinScoreRuning = ",h.FortuneRabbitTable.tabelInfo.bWinScoreRuning,",showWinNote \u663e\u793a\u4e2d\u5956\u5206\u6570 => \u975efeature\u6a21\u5f0f\u65f6\u7279\u5b9a\u500d\u6570\u65f6\u9700\u8981\u6570\u5b57\u6eda\u52a8"),this.i18WinNodeTip.node.active=!1,a=0,l=t/60,this.showWinNoteNum=setInterval(function(){if(a<t)a=(a+=l)>t?t:a,d.labelWinCount.string=f.currency.formatWithSymbol(a);else{b.tcLog.log("else unscheduleAllCallbacks "),clearInterval(d.showWinNoteNum),d.i18WinNodeTip.node.active=!0;var n=i?"total_win":"win";d.i18WinNodeTip.spriteName=n,d.i18WinNodeTip.refresh(),h.FortuneRabbitTable.tabelInfo.bWinScoreRuning=!1,b.tcLog.info("==>>>>>>>>>> bWinScoreRuning = ",h.FortuneRabbitTable.tabelInfo.bWinScoreRuning,",showWinNote \u663e\u793a\u4e2d\u5956\u5206\u6570 => \u975efeature\u6a21\u5f0f\u65f6\u7279\u5b9a\u500d\u6570\u65f6\u9700\u8981\u6570\u5b57\u6eda\u52a8 \u5904\u7406\u5b8c\u6210"),d.updateBonus(),c.uAudio.getInstance().stopEffect(p.FortuneRabbitDefine.soundNames.runscore),o&&c.uAudio.getInstance().playEffect(p.FortuneRabbitDefine.soundNames.win2),d.playAddedEffect(e),setTimeout(function(){r&&r()},500)}},1300/60)):(u=i?"total_win":"win",this.i18WinNodeTip.spriteName=u,this.i18WinNodeTip.refresh(),this.winNote&&cc.tween(this.winNote).set({scale:1.1}).to(.2,{scale:1},{easing:cc.easing.backInOut}).start(),n&&this.playAddedEffect(e),this.labelWinCount.string=f.currency.formatWithSymbol(t),r&&r()),[2]})})},e.prototype.playBaseEffect=function(t){var e=t>=h.FortuneRabbitTable.tabelInfo.winLevel[0];b.tcLog.log("playBaseEffect:",e," winTimes:",t,"  winLevel:",h.FortuneRabbitTable.tabelInfo.winLevel[0]);var n=e?this.winNodeBgHigh:this.winNodeBgMiddle;n.active||(n.opacity=0,n.active=!0,cc.tween(n).to(.3,{opacity:255}).start(),cc.tween(this.winNodeBgNormal).to(.2,{opacity:0}).start()),this.nodeGuangRotater.parent.parent.active=!0,cc.tween(this.nodeGuangRotater).by(20,{angle:-360}).union().repeatForever().start()},e.prototype.playAddedEffect=function(t){var e=this;if(this.nodeStarEffect.node.active=!0,this.nodeStarEffect.play(),t>=h.FortuneRabbitTable.tabelInfo.winLevel[0]&&(this.nodeCoinsAni.node.active=!0,this.nodeCoinsAni.play(),this.nodeCongratulationAni.node.active=!0,this.nodeCongratulationAni.play(),this.nodeCoinsAni.on(cc.Animation.EventType.FINISHED,function(){e.nodeCoinsAni.node.active=!1,e.nodeCongratulationAni.node.active=!1})),t>=h.FortuneRabbitTable.tabelInfo.runScoreLevels[0]){this.view.modeBottomShakeLight(),this.nodeCoinsAni.node.active=!0,this.nodeCoinsAni.play(),this.playShaoGuangAni();var n=cc.tween().to(.8,{position:cc.v3(272,88.5)},{easing:cc.easing.quadIn}),i=cc.tween().to(.8,{position:cc.v3(-272,5.26)},{easing:cc.easing.quadIn});cc.tween(this.nodeGuangDotTop).set({position:cc.v3(-272,88.5),opacity:0,active:!0}).parallel(cc.tween().to(.1,{opacity:255}),n).then(cc.tween().to(.1,{opacity:0})).start(),cc.tween(this.nodeGuangDotBottom).set({position:cc.v3(272,5.26),opacity:0,active:!0}).parallel(cc.tween().to(.1,{opacity:255}),i).then(cc.tween().to(.1,{opacity:0})).start()}},e.prototype.playFeatureModeAddScore=function(t){this.playShaoGuangAni(),this.addScore(t)},e.prototype.addScore=function(t){this.curWinScore+=t,this.showWinNote(this.curWinScore,0,!1)},e.prototype.playShaoGuangAni=function(){var t=this;this.nodeShaoGuangAni.node.active=!0,this.nodeShaoGuangAni.play(),this.nodeCoinsAni.on(cc.Animation.EventType.FINISHED,function(){t.nodeShaoGuangAni.node.active=!1})},e.prototype.setBgStatus=function(){},e.prototype.reset=function(){this.bAdMode||(this.curWinScore=0,this.showAd())},r([m],e)}(cc.Component));n.FortuneRabbitWinNode=g,cc._RF.pop()},{"../../../../script/app/env":void 0,"../../../../script/framework/audio/audio":void 0,"../../../../script/framework/i18n/i18n-sprite":void 0,"../../../../script/framework/log/log":void 0,"../../../../script/pkg/currency":void 0,"../../../update-v2/script/fortune-rabbit-define":void 0,"./fortune-rabbit-table":"fortune-rabbit-table"}],"fortune-rabbittable-launch":[function(t,e,n){"use strict";cc._RF.push(e,"fb35eJ4OgZGd5AMKBXyzBb1","fortune-rabbittable-launch");var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,n,a):o(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))(function(o,r){function a(t){try{l(i.next(t))}catch(e){r(e)}}function s(t){try{l(i.throw(t))}catch(e){r(e)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}l((i=i.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var n,i,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(t){return function(e){return l([t,e])}}function l(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,i=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(s){r=[6,s],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.FortuneRabbitTableLaunch=void 0;var l=t("./fortune-rabbit-logic"),c=t("./fortune-rabbit-res"),u=cc._decorator,b=u.ccclass,f=(u.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.start=function(){this.loadAssetsAsync()},e.prototype.loadAssetsAsync=function(){return a(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return[4,c.FortuneRabbitRes.loadResAsync()];case 1:return t.sent(),this.node?(new l.FortuneRabbitLogic(this.node),[2]):[2]}})})},r([b],e)}(cc.Component));n.FortuneRabbitTableLaunch=f,cc._RF.pop()},{"./fortune-rabbit-logic":"fortune-rabbit-logic","./fortune-rabbit-res":"fortune-rabbit-res"}],slot_fortune_rabbit:[function(t,e){"use strict";cc._RF.push(e,"3b748ay7TRDFb88PpjMMBkJ","slot_fortune_rabbit");var n,i,o,r=protobuf,a=r.Reader,s=r.Writer,l=r.util,c=r.roots.default||(r.roots.default={});c.slot_fortune_rabbit=((o={}).FortuneRabbitCmd=(n={},(i=Object.create(n))[n[0]="CMD_INVALID"]=0,i[n[1]="CMD_GAME_ENTER_REQ"]=1,i[n[2]="CMD_GAME_ENTER_RESP"]=2,i[n[3]="CMD_GAME_GET_TABLE_STATUS_REQ"]=3,i[n[4]="CMD_GAME_GET_TABLE_STATUS_RESP"]=4,i[n[7]="CMD_GAME_SPIN_REQ"]=7,i[n[8]="CMD_GAME_SPIN_RESP"]=8,i[n[11]="CMD_GAME_LEAVE_REQ"]=11,i[n[12]="CMD_GAME_LEAVE_RESP"]=12,i),o.User=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.userId=0,t.prototype.balance=l.Long?l.Long.fromBits(0,0,!1):0,t.prototype.nickname="",t.prototype.avatar="",t.create=function(e){return new t(e)},t.encode=function(t,e){return e||(e=s.create()),null!=t.userId&&Object.hasOwnProperty.call(t,"userId")&&e.uint32(8).uint32(t.userId),null!=t.balance&&Object.hasOwnProperty.call(t,"balance")&&e.uint32(16).int64(t.balance),null!=t.nickname&&Object.hasOwnProperty.call(t,"nickname")&&e.uint32(26).string(t.nickname),null!=t.avatar&&Object.hasOwnProperty.call(t,"avatar")&&e.uint32(34).string(t.avatar),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof a||(t=a.create(t));for(var n=void 0===e?t.len:t.pos+e,i=new c.slot_fortune_rabbit.User;t.pos<n;){var o=t.uint32();switch(o>>>3){case 1:i.userId=t.uint32();break;case 2:i.balance=t.int64();break;case 3:i.nickname=t.string();break;case 4:i.avatar=t.string();break;default:t.skipType(7&o)}}return i},t.decodeDelimited=function(t){return t instanceof a||(t=new a(t)),this.decode(t,t.uint32())},t.verify=function(t){return"object"!=typeof t||null===t?"object expected":null!=t.userId&&t.hasOwnProperty("userId")&&!l.isInteger(t.userId)?"userId: integer expected":null!=t.balance&&t.hasOwnProperty("balance")&&!(l.isInteger(t.balance)||t.balance&&l.isInteger(t.balance.low)&&l.isInteger(t.balance.high))?"balance: integer|Long expected":null!=t.nickname&&t.hasOwnProperty("nickname")&&!l.isString(t.nickname)?"nickname: string expected":null!=t.avatar&&t.hasOwnProperty("avatar")&&!l.isString(t.avatar)?"avatar: string expected":null},t.fromObject=function(t){if(t instanceof c.slot_fortune_rabbit.User)return t;var e=new c.slot_fortune_rabbit.User;return null!=t.userId&&(e.userId=t.userId>>>0),null!=t.balance&&(l.Long?(e.balance=l.Long.fromValue(t.balance)).unsigned=!1:"string"==typeof t.balance?e.balance=parseInt(t.balance,10):"number"==typeof t.balance?e.balance=t.balance:"object"==typeof t.balance&&(e.balance=new l.LongBits(t.balance.low>>>0,t.balance.high>>>0).toNumber())),null!=t.nickname&&(e.nickname=String(t.nickname)),null!=t.avatar&&(e.avatar=String(t.avatar)),e},t.toObject=function(t,e){e||(e={});var n={};if(e.defaults){if(n.userId=0,l.Long){var i=new l.Long(0,0,!1);n.balance=e.longs===String?i.toString():e.longs===Number?i.toNumber():i}else n.balance=e.longs===String?"0":0;n.nickname="",n.avatar=""}return null!=t.userId&&t.hasOwnProperty("userId")&&(n.userId=t.userId),null!=t.balance&&t.hasOwnProperty("balance")&&("number"==typeof t.balance?n.balance=e.longs===String?String(t.balance):t.balance:n.balance=e.longs===String?l.Long.prototype.toString.call(t.balance):e.longs===Number?new l.LongBits(t.balance.low>>>0,t.balance.high>>>0).toNumber():t.balance),null!=t.nickname&&t.hasOwnProperty("nickname")&&(n.nickname=t.nickname),null!=t.avatar&&t.hasOwnProperty("avatar")&&(n.avatar=t.avatar),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t.getTypeUrl=function(t){return void 0===t&&(t="type.googleapis.com"),t+"/slot_fortune_rabbit.User"},t}(),o.FortuneRabbitSlotLevelDesc=function(){function t(t){if(this.chips=[],t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.roomId=0,t.prototype.gameType=0,t.prototype.chips=l.emptyArray,t.create=function(e){return new t(e)},t.encode=function(t,e){if(e||(e=s.create()),null!=t.roomId&&Object.hasOwnProperty.call(t,"roomId")&&e.uint32(8).uint32(t.roomId),null!=t.gameType&&Object.hasOwnProperty.call(t,"gameType")&&e.uint32(16).uint32(t.gameType),null!=t.chips&&t.chips.length){e.uint32(26).fork();for(var n=0;n<t.chips.length;++n)e.uint32(t.chips[n]);e.ldelim()}return e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof a||(t=a.create(t));for(var n=void 0===e?t.len:t.pos+e,i=new c.slot_fortune_rabbit.FortuneRabbitSlotLevelDesc;t.pos<n;){var o=t.uint32();switch(o>>>3){case 1:i.roomId=t.uint32();break;case 2:i.gameType=t.uint32();break;case 3:if(i.chips&&i.chips.length||(i.chips=[]),2==(7&o))for(var r=t.uint32()+t.pos;t.pos<r;)i.chips.push(t.uint32());else i.chips.push(t.uint32());break;default:t.skipType(7&o)}}return i},t.decodeDelimited=function(t){return t instanceof a||(t=new a(t)),this.decode(t,t.uint32())},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(null!=t.roomId&&t.hasOwnProperty("roomId")&&!l.isInteger(t.roomId))return"roomId: integer expected";if(null!=t.gameType&&t.hasOwnProperty("gameType")&&!l.isInteger(t.gameType))return"gameType: integer expected";if(null!=t.chips&&t.hasOwnProperty("chips")){if(!Array.isArray(t.chips))return"chips: array expected";for(var e=0;e<t.chips.length;++e)if(!l.isInteger(t.chips[e]))return"chips: integer[] expected"}return null},t.fromObject=function(t){if(t instanceof c.slot_fortune_rabbit.FortuneRabbitSlotLevelDesc)return t;var e=new c.slot_fortune_rabbit.FortuneRabbitSlotLevelDesc;if(null!=t.roomId&&(e.roomId=t.roomId>>>0),null!=t.gameType&&(e.gameType=t.gameType>>>0),t.chips){if(!Array.isArray(t.chips))throw TypeError(".slot_fortune_rabbit.FortuneRabbitSlotLevelDesc.chips: array expected");e.chips=[];for(var n=0;n<t.chips.length;++n)e.chips[n]=t.chips[n]>>>0}return e},t.toObject=function(t,e){e||(e={});var n={};if((e.arrays||e.defaults)&&(n.chips=[]),e.defaults&&(n.roomId=0,n.gameType=0),null!=t.roomId&&t.hasOwnProperty("roomId")&&(n.roomId=t.roomId),null!=t.gameType&&t.hasOwnProperty("gameType")&&(n.gameType=t.gameType),t.chips&&t.chips.length){n.chips=[];for(var i=0;i<t.chips.length;++i)n.chips[i]=t.chips[i]}return n},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t.getTypeUrl=function(t){return void 0===t&&(t="type.googleapis.com"),t+"/slot_fortune_rabbit.FortuneRabbitSlotLevelDesc"},t}(),o.Hit=function(){function t(t){if(this.pos=[],t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.lineId=l.Long?l.Long.fromBits(0,0,!1):0,t.prototype.win=l.Long?l.Long.fromBits(0,0,!1):0,t.prototype.pos=l.emptyArray,t.prototype.symbol=0,t.create=function(e){return new t(e)},t.encode=function(t,e){if(e||(e=s.create()),null!=t.lineId&&Object.hasOwnProperty.call(t,"lineId")&&e.uint32(8).int64(t.lineId),null!=t.win&&Object.hasOwnProperty.call(t,"win")&&e.uint32(16).int64(t.win),null!=t.pos&&t.pos.length){e.uint32(26).fork();for(var n=0;n<t.pos.length;++n)e.uint32(t.pos[n]);e.ldelim()}return null!=t.symbol&&Object.hasOwnProperty.call(t,"symbol")&&e.uint32(32).uint32(t.symbol),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof a||(t=a.create(t));for(var n=void 0===e?t.len:t.pos+e,i=new c.slot_fortune_rabbit.Hit;t.pos<n;){var o=t.uint32();switch(o>>>3){case 1:i.lineId=t.int64();break;case 2:i.win=t.int64();break;case 3:if(i.pos&&i.pos.length||(i.pos=[]),2==(7&o))for(var r=t.uint32()+t.pos;t.pos<r;)i.pos.push(t.uint32());else i.pos.push(t.uint32());break;case 4:i.symbol=t.uint32();break;default:t.skipType(7&o)}}return i},t.decodeDelimited=function(t){return t instanceof a||(t=new a(t)),this.decode(t,t.uint32())},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(null!=t.lineId&&t.hasOwnProperty("lineId")&&!(l.isInteger(t.lineId)||t.lineId&&l.isInteger(t.lineId.low)&&l.isInteger(t.lineId.high)))return"lineId: integer|Long expected";if(null!=t.win&&t.hasOwnProperty("win")&&!(l.isInteger(t.win)||t.win&&l.isInteger(t.win.low)&&l.isInteger(t.win.high)))return"win: integer|Long expected";if(null!=t.pos&&t.hasOwnProperty("pos")){if(!Array.isArray(t.pos))return"pos: array expected";for(var e=0;e<t.pos.length;++e)if(!l.isInteger(t.pos[e]))return"pos: integer[] expected"}return null!=t.symbol&&t.hasOwnProperty("symbol")&&!l.isInteger(t.symbol)?"symbol: integer expected":null},t.fromObject=function(t){if(t instanceof c.slot_fortune_rabbit.Hit)return t;var e=new c.slot_fortune_rabbit.Hit;if(null!=t.lineId&&(l.Long?(e.lineId=l.Long.fromValue(t.lineId)).unsigned=!1:"string"==typeof t.lineId?e.lineId=parseInt(t.lineId,10):"number"==typeof t.lineId?e.lineId=t.lineId:"object"==typeof t.lineId&&(e.lineId=new l.LongBits(t.lineId.low>>>0,t.lineId.high>>>0).toNumber())),null!=t.win&&(l.Long?(e.win=l.Long.fromValue(t.win)).unsigned=!1:"string"==typeof t.win?e.win=parseInt(t.win,10):"number"==typeof t.win?e.win=t.win:"object"==typeof t.win&&(e.win=new l.LongBits(t.win.low>>>0,t.win.high>>>0).toNumber())),t.pos){if(!Array.isArray(t.pos))throw TypeError(".slot_fortune_rabbit.Hit.pos: array expected");e.pos=[];for(var n=0;n<t.pos.length;++n)e.pos[n]=t.pos[n]>>>0}return null!=t.symbol&&(e.symbol=t.symbol>>>0),e},t.toObject=function(t,e){e||(e={});var n={};if((e.arrays||e.defaults)&&(n.pos=[]),e.defaults){if(l.Long){var i=new l.Long(0,0,!1);n.lineId=e.longs===String?i.toString():e.longs===Number?i.toNumber():i}else n.lineId=e.longs===String?"0":0;l.Long?(i=new l.Long(0,0,!1),n.win=e.longs===String?i.toString():e.longs===Number?i.toNumber():i):n.win=e.longs===String?"0":0,n.symbol=0}if(null!=t.lineId&&t.hasOwnProperty("lineId")&&("number"==typeof t.lineId?n.lineId=e.longs===String?String(t.lineId):t.lineId:n.lineId=e.longs===String?l.Long.prototype.toString.call(t.lineId):e.longs===Number?new l.LongBits(t.lineId.low>>>0,t.lineId.high>>>0).toNumber():t.lineId),null!=t.win&&t.hasOwnProperty("win")&&("number"==typeof t.win?n.win=e.longs===String?String(t.win):t.win:n.win=e.longs===String?l.Long.prototype.toString.call(t.win):e.longs===Number?new l.LongBits(t.win.low>>>0,t.win.high>>>0).toNumber():t.win),t.pos&&t.pos.length){n.pos=[];for(var o=0;o<t.pos.length;++o)n.pos[o]=t.pos[o]}return null!=t.symbol&&t.hasOwnProperty("symbol")&&(n.symbol=t.symbol),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t.getTypeUrl=function(t){return void 0===t&&(t="type.googleapis.com"),t+"/slot_fortune_rabbit.Hit"},t}(),o.Symbol=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.id=0,t.prototype.multi=l.Long?l.Long.fromBits(0,0,!1):0,t.create=function(e){return new t(e)},t.encode=function(t,e){return e||(e=s.create()),null!=t.id&&Object.hasOwnProperty.call(t,"id")&&e.uint32(8).uint32(t.id),null!=t.multi&&Object.hasOwnProperty.call(t,"multi")&&e.uint32(16).int64(t.multi),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof a||(t=a.create(t));for(var n=void 0===e?t.len:t.pos+e,i=new c.slot_fortune_rabbit.Symbol;t.pos<n;){var o=t.uint32();switch(o>>>3){case 1:i.id=t.uint32();break;case 2:i.multi=t.int64();break;default:t.skipType(7&o)}}return i},t.decodeDelimited=function(t){return t instanceof a||(t=new a(t)),this.decode(t,t.uint32())},t.verify=function(t){return"object"!=typeof t||null===t?"object expected":null!=t.id&&t.hasOwnProperty("id")&&!l.isInteger(t.id)?"id: integer expected":null!=t.multi&&t.hasOwnProperty("multi")&&!(l.isInteger(t.multi)||t.multi&&l.isInteger(t.multi.low)&&l.isInteger(t.multi.high))?"multi: integer|Long expected":null},t.fromObject=function(t){if(t instanceof c.slot_fortune_rabbit.Symbol)return t;var e=new c.slot_fortune_rabbit.Symbol;return null!=t.id&&(e.id=t.id>>>0),null!=t.multi&&(l.Long?(e.multi=l.Long.fromValue(t.multi)).unsigned=!1:"string"==typeof t.multi?e.multi=parseInt(t.multi,10):"number"==typeof t.multi?e.multi=t.multi:"object"==typeof t.multi&&(e.multi=new l.LongBits(t.multi.low>>>0,t.multi.high>>>0).toNumber())),e},t.toObject=function(t,e){e||(e={});var n={};if(e.defaults)if(n.id=0,l.Long){var i=new l.Long(0,0,!1);n.multi=e.longs===String?i.toString():e.longs===Number?i.toNumber():i}else n.multi=e.longs===String?"0":0;return null!=t.id&&t.hasOwnProperty("id")&&(n.id=t.id),null!=t.multi&&t.hasOwnProperty("multi")&&("number"==typeof t.multi?n.multi=e.longs===String?String(t.multi):t.multi:n.multi=e.longs===String?l.Long.prototype.toString.call(t.multi):e.longs===Number?new l.LongBits(t.multi.low>>>0,t.multi.high>>>0).toNumber():t.multi),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t.getTypeUrl=function(t){return void 0===t&&(t="type.googleapis.com"),t+"/slot_fortune_rabbit.Symbol"},t}(),o.LastScreen=function(){function t(t){if(this.screen=[],this.hits=[],t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.win=l.Long?l.Long.fromBits(0,0,!1):0,t.prototype.amount=l.Long?l.Long.fromBits(0,0,!1):0,t.prototype.betSize=l.Long?l.Long.fromBits(0,0,!1):0,t.prototype.betMul=l.Long?l.Long.fromBits(0,0,!1):0,t.prototype.screen=l.emptyArray,t.prototype.hits=l.emptyArray,t.prototype.leftTimes=l.Long?l.Long.fromBits(0,0,!1):0,t.prototype.feature=!1,t.prototype.rabbitWin=l.Long?l.Long.fromBits(0,0,!1):0,t.create=function(e){return new t(e)},t.encode=function(t,e){if(e||(e=s.create()),null!=t.win&&Object.hasOwnProperty.call(t,"win")&&e.uint32(8).int64(t.win),null!=t.amount&&Object.hasOwnProperty.call(t,"amount")&&e.uint32(16).int64(t.amount),null!=t.betSize&&Object.hasOwnProperty.call(t,"betSize")&&e.uint32(24).int64(t.betSize),null!=t.betMul&&Object.hasOwnProperty.call(t,"betMul")&&e.uint32(32).int64(t.betMul),null!=t.screen&&t.screen.length)for(var n=0;n<t.screen.length;++n)c.slot_fortune_rabbit.Symbol.encode(t.screen[n],e.uint32(42).fork()).ldelim();if(null!=t.hits&&t.hits.length)for(n=0;n<t.hits.length;++n)c.slot_fortune_rabbit.Hit.encode(t.hits[n],e.uint32(50).fork()).ldelim();return null!=t.leftTimes&&Object.hasOwnProperty.call(t,"leftTimes")&&e.uint32(56).int64(t.leftTimes),null!=t.feature&&Object.hasOwnProperty.call(t,"feature")&&e.uint32(64).bool(t.feature),null!=t.rabbitWin&&Object.hasOwnProperty.call(t,"rabbitWin")&&e.uint32(72).int64(t.rabbitWin),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof a||(t=a.create(t));for(var n=void 0===e?t.len:t.pos+e,i=new c.slot_fortune_rabbit.LastScreen;t.pos<n;){var o=t.uint32();switch(o>>>3){case 1:i.win=t.int64();break;case 2:i.amount=t.int64();break;case 3:i.betSize=t.int64();break;case 4:i.betMul=t.int64();break;case 5:i.screen&&i.screen.length||(i.screen=[]),i.screen.push(c.slot_fortune_rabbit.Symbol.decode(t,t.uint32()));break;case 6:i.hits&&i.hits.length||(i.hits=[]),i.hits.push(c.slot_fortune_rabbit.Hit.decode(t,t.uint32()));break;case 7:i.leftTimes=t.int64();break;case 8:i.feature=t.bool();break;case 9:i.rabbitWin=t.int64();break;default:t.skipType(7&o)}}return i},t.decodeDelimited=function(t){return t instanceof a||(t=new a(t)),this.decode(t,t.uint32())},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(null!=t.win&&t.hasOwnProperty("win")&&!(l.isInteger(t.win)||t.win&&l.isInteger(t.win.low)&&l.isInteger(t.win.high)))return"win: integer|Long expected";if(null!=t.amount&&t.hasOwnProperty("amount")&&!(l.isInteger(t.amount)||t.amount&&l.isInteger(t.amount.low)&&l.isInteger(t.amount.high)))return"amount: integer|Long expected";if(null!=t.betSize&&t.hasOwnProperty("betSize")&&!(l.isInteger(t.betSize)||t.betSize&&l.isInteger(t.betSize.low)&&l.isInteger(t.betSize.high)))return"betSize: integer|Long expected";if(null!=t.betMul&&t.hasOwnProperty("betMul")&&!(l.isInteger(t.betMul)||t.betMul&&l.isInteger(t.betMul.low)&&l.isInteger(t.betMul.high)))return"betMul: integer|Long expected";if(null!=t.screen&&t.hasOwnProperty("screen")){if(!Array.isArray(t.screen))return"screen: array expected";for(var e=0;e<t.screen.length;++e)if(n=c.slot_fortune_rabbit.Symbol.verify(t.screen[e]))return"screen."+n}if(null!=t.hits&&t.hasOwnProperty("hits")){if(!Array.isArray(t.hits))return"hits: array expected";for(e=0;e<t.hits.length;++e){var n;if(n=c.slot_fortune_rabbit.Hit.verify(t.hits[e]))return"hits."+n}}return null!=t.leftTimes&&t.hasOwnProperty("leftTimes")&&!(l.isInteger(t.leftTimes)||t.leftTimes&&l.isInteger(t.leftTimes.low)&&l.isInteger(t.leftTimes.high))?"leftTimes: integer|Long expected":null!=t.feature&&t.hasOwnProperty("feature")&&"boolean"!=typeof t.feature?"feature: boolean expected":null!=t.rabbitWin&&t.hasOwnProperty("rabbitWin")&&!(l.isInteger(t.rabbitWin)||t.rabbitWin&&l.isInteger(t.rabbitWin.low)&&l.isInteger(t.rabbitWin.high))?"rabbitWin: integer|Long expected":null},t.fromObject=function(t){if(t instanceof c.slot_fortune_rabbit.LastScreen)return t;var e=new c.slot_fortune_rabbit.LastScreen;if(null!=t.win&&(l.Long?(e.win=l.Long.fromValue(t.win)).unsigned=!1:"string"==typeof t.win?e.win=parseInt(t.win,10):"number"==typeof t.win?e.win=t.win:"object"==typeof t.win&&(e.win=new l.LongBits(t.win.low>>>0,t.win.high>>>0).toNumber())),null!=t.amount&&(l.Long?(e.amount=l.Long.fromValue(t.amount)).unsigned=!1:"string"==typeof t.amount?e.amount=parseInt(t.amount,10):"number"==typeof t.amount?e.amount=t.amount:"object"==typeof t.amount&&(e.amount=new l.LongBits(t.amount.low>>>0,t.amount.high>>>0).toNumber())),null!=t.betSize&&(l.Long?(e.betSize=l.Long.fromValue(t.betSize)).unsigned=!1:"string"==typeof t.betSize?e.betSize=parseInt(t.betSize,10):"number"==typeof t.betSize?e.betSize=t.betSize:"object"==typeof t.betSize&&(e.betSize=new l.LongBits(t.betSize.low>>>0,t.betSize.high>>>0).toNumber())),null!=t.betMul&&(l.Long?(e.betMul=l.Long.fromValue(t.betMul)).unsigned=!1:"string"==typeof t.betMul?e.betMul=parseInt(t.betMul,10):"number"==typeof t.betMul?e.betMul=t.betMul:"object"==typeof t.betMul&&(e.betMul=new l.LongBits(t.betMul.low>>>0,t.betMul.high>>>0).toNumber())),t.screen){if(!Array.isArray(t.screen))throw TypeError(".slot_fortune_rabbit.LastScreen.screen: array expected");e.screen=[];for(var n=0;n<t.screen.length;++n){if("object"!=typeof t.screen[n])throw TypeError(".slot_fortune_rabbit.LastScreen.screen: object expected");e.screen[n]=c.slot_fortune_rabbit.Symbol.fromObject(t.screen[n])}}if(t.hits){if(!Array.isArray(t.hits))throw TypeError(".slot_fortune_rabbit.LastScreen.hits: array expected");for(e.hits=[],n=0;n<t.hits.length;++n){if("object"!=typeof t.hits[n])throw TypeError(".slot_fortune_rabbit.LastScreen.hits: object expected");e.hits[n]=c.slot_fortune_rabbit.Hit.fromObject(t.hits[n])}}return null!=t.leftTimes&&(l.Long?(e.leftTimes=l.Long.fromValue(t.leftTimes)).unsigned=!1:"string"==typeof t.leftTimes?e.leftTimes=parseInt(t.leftTimes,10):"number"==typeof t.leftTimes?e.leftTimes=t.leftTimes:"object"==typeof t.leftTimes&&(e.leftTimes=new l.LongBits(t.leftTimes.low>>>0,t.leftTimes.high>>>0).toNumber())),null!=t.feature&&(e.feature=Boolean(t.feature)),null!=t.rabbitWin&&(l.Long?(e.rabbitWin=l.Long.fromValue(t.rabbitWin)).unsigned=!1:"string"==typeof t.rabbitWin?e.rabbitWin=parseInt(t.rabbitWin,10):"number"==typeof t.rabbitWin?e.rabbitWin=t.rabbitWin:"object"==typeof t.rabbitWin&&(e.rabbitWin=new l.LongBits(t.rabbitWin.low>>>0,t.rabbitWin.high>>>0).toNumber())),e},t.toObject=function(t,e){e||(e={});var n={};if((e.arrays||e.defaults)&&(n.screen=[],n.hits=[]),e.defaults){if(l.Long){var i=new l.Long(0,0,!1);n.win=e.longs===String?i.toString():e.longs===Number?i.toNumber():i}else n.win=e.longs===String?"0":0;l.Long?(i=new l.Long(0,0,!1),n.amount=e.longs===String?i.toString():e.longs===Number?i.toNumber():i):n.amount=e.longs===String?"0":0,l.Long?(i=new l.Long(0,0,!1),n.betSize=e.longs===String?i.toString():e.longs===Number?i.toNumber():i):n.betSize=e.longs===String?"0":0,l.Long?(i=new l.Long(0,0,!1),n.betMul=e.longs===String?i.toString():e.longs===Number?i.toNumber():i):n.betMul=e.longs===String?"0":0,l.Long?(i=new l.Long(0,0,!1),n.leftTimes=e.longs===String?i.toString():e.longs===Number?i.toNumber():i):n.leftTimes=e.longs===String?"0":0,n.feature=!1,l.Long?(i=new l.Long(0,0,!1),n.rabbitWin=e.longs===String?i.toString():e.longs===Number?i.toNumber():i):n.rabbitWin=e.longs===String?"0":0}if(null!=t.win&&t.hasOwnProperty("win")&&("number"==typeof t.win?n.win=e.longs===String?String(t.win):t.win:n.win=e.longs===String?l.Long.prototype.toString.call(t.win):e.longs===Number?new l.LongBits(t.win.low>>>0,t.win.high>>>0).toNumber():t.win),null!=t.amount&&t.hasOwnProperty("amount")&&("number"==typeof t.amount?n.amount=e.longs===String?String(t.amount):t.amount:n.amount=e.longs===String?l.Long.prototype.toString.call(t.amount):e.longs===Number?new l.LongBits(t.amount.low>>>0,t.amount.high>>>0).toNumber():t.amount),null!=t.betSize&&t.hasOwnProperty("betSize")&&("number"==typeof t.betSize?n.betSize=e.longs===String?String(t.betSize):t.betSize:n.betSize=e.longs===String?l.Long.prototype.toString.call(t.betSize):e.longs===Number?new l.LongBits(t.betSize.low>>>0,t.betSize.high>>>0).toNumber():t.betSize),null!=t.betMul&&t.hasOwnProperty("betMul")&&("number"==typeof t.betMul?n.betMul=e.longs===String?String(t.betMul):t.betMul:n.betMul=e.longs===String?l.Long.prototype.toString.call(t.betMul):e.longs===Number?new l.LongBits(t.betMul.low>>>0,t.betMul.high>>>0).toNumber():t.betMul),t.screen&&t.screen.length){n.screen=[];for(var o=0;o<t.screen.length;++o)n.screen[o]=c.slot_fortune_rabbit.Symbol.toObject(t.screen[o],e)}if(t.hits&&t.hits.length)for(n.hits=[],o=0;o<t.hits.length;++o)n.hits[o]=c.slot_fortune_rabbit.Hit.toObject(t.hits[o],e);return null!=t.leftTimes&&t.hasOwnProperty("leftTimes")&&("number"==typeof t.leftTimes?n.leftTimes=e.longs===String?String(t.leftTimes):t.leftTimes:n.leftTimes=e.longs===String?l.Long.prototype.toString.call(t.leftTimes):e.longs===Number?new l.LongBits(t.leftTimes.low>>>0,t.leftTimes.high>>>0).toNumber():t.leftTimes),null!=t.feature&&t.hasOwnProperty("feature")&&(n.feature=t.feature),null!=t.rabbitWin&&t.hasOwnProperty("rabbitWin")&&("number"==typeof t.rabbitWin?n.rabbitWin=e.longs===String?String(t.rabbitWin):t.rabbitWin:n.rabbitWin=e.longs===String?l.Long.prototype.toString.call(t.rabbitWin):e.longs===Number?new l.LongBits(t.rabbitWin.low>>>0,t.rabbitWin.high>>>0).toNumber():t.rabbitWin),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t.getTypeUrl=function(t){return void 0===t&&(t="type.googleapis.com"),t+"/slot_fortune_rabbit.LastScreen"},t}(),o.GameGetTableInfoResp=function(){function t(t){if(this.winLevel=[],t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.desc=null,t.prototype.roundId="",t.prototype.self=null,t.prototype.lastScreen=null,t.prototype.winLevel=l.emptyArray,t.create=function(e){return new t(e)},t.encode=function(t,e){if(e||(e=s.create()),null!=t.desc&&Object.hasOwnProperty.call(t,"desc")&&c.slot_fortune_rabbit.FortuneRabbitSlotLevelDesc.encode(t.desc,e.uint32(10).fork()).ldelim(),null!=t.roundId&&Object.hasOwnProperty.call(t,"roundId")&&e.uint32(18).string(t.roundId),null!=t.self&&Object.hasOwnProperty.call(t,"self")&&c.slot_fortune_rabbit.User.encode(t.self,e.uint32(26).fork()).ldelim(),null!=t.lastScreen&&Object.hasOwnProperty.call(t,"lastScreen")&&c.slot_fortune_rabbit.LastScreen.encode(t.lastScreen,e.uint32(34).fork()).ldelim(),null!=t.winLevel&&t.winLevel.length){e.uint32(42).fork();for(var n=0;n<t.winLevel.length;++n)e.int64(t.winLevel[n]);e.ldelim()}return e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof a||(t=a.create(t));for(var n=void 0===e?t.len:t.pos+e,i=new c.slot_fortune_rabbit.GameGetTableInfoResp;t.pos<n;){var o=t.uint32();switch(o>>>3){case 1:i.desc=c.slot_fortune_rabbit.FortuneRabbitSlotLevelDesc.decode(t,t.uint32());break;case 2:i.roundId=t.string();break;case 3:i.self=c.slot_fortune_rabbit.User.decode(t,t.uint32());break;case 4:i.lastScreen=c.slot_fortune_rabbit.LastScreen.decode(t,t.uint32());break;case 5:if(i.winLevel&&i.winLevel.length||(i.winLevel=[]),2==(7&o))for(var r=t.uint32()+t.pos;t.pos<r;)i.winLevel.push(t.int64());else i.winLevel.push(t.int64());break;default:t.skipType(7&o)}}return i},t.decodeDelimited=function(t){return t instanceof a||(t=new a(t)),this.decode(t,t.uint32())},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";var e;if(null!=t.desc&&t.hasOwnProperty("desc")&&(e=c.slot_fortune_rabbit.FortuneRabbitSlotLevelDesc.verify(t.desc)))return"desc."+e;if(null!=t.roundId&&t.hasOwnProperty("roundId")&&!l.isString(t.roundId))return"roundId: string expected";if(null!=t.self&&t.hasOwnProperty("self")&&(e=c.slot_fortune_rabbit.User.verify(t.self)))return"self."+e;if(null!=t.lastScreen&&t.hasOwnProperty("lastScreen")&&(e=c.slot_fortune_rabbit.LastScreen.verify(t.lastScreen)))return"lastScreen."+e;if(null!=t.winLevel&&t.hasOwnProperty("winLevel")){if(!Array.isArray(t.winLevel))return"winLevel: array expected";for(var n=0;n<t.winLevel.length;++n)if(!(l.isInteger(t.winLevel[n])||t.winLevel[n]&&l.isInteger(t.winLevel[n].low)&&l.isInteger(t.winLevel[n].high)))return"winLevel: integer|Long[] expected"}return null},t.fromObject=function(t){if(t instanceof c.slot_fortune_rabbit.GameGetTableInfoResp)return t;var e=new c.slot_fortune_rabbit.GameGetTableInfoResp;if(null!=t.desc){if("object"!=typeof t.desc)throw TypeError(".slot_fortune_rabbit.GameGetTableInfoResp.desc: object expected");e.desc=c.slot_fortune_rabbit.FortuneRabbitSlotLevelDesc.fromObject(t.desc)}if(null!=t.roundId&&(e.roundId=String(t.roundId)),null!=t.self){if("object"!=typeof t.self)throw TypeError(".slot_fortune_rabbit.GameGetTableInfoResp.self: object expected");e.self=c.slot_fortune_rabbit.User.fromObject(t.self)}if(null!=t.lastScreen){if("object"!=typeof t.lastScreen)throw TypeError(".slot_fortune_rabbit.GameGetTableInfoResp.lastScreen: object expected");e.lastScreen=c.slot_fortune_rabbit.LastScreen.fromObject(t.lastScreen)}if(t.winLevel){if(!Array.isArray(t.winLevel))throw TypeError(".slot_fortune_rabbit.GameGetTableInfoResp.winLevel: array expected");e.winLevel=[];for(var n=0;n<t.winLevel.length;++n)l.Long?(e.winLevel[n]=l.Long.fromValue(t.winLevel[n])).unsigned=!1:"string"==typeof t.winLevel[n]?e.winLevel[n]=parseInt(t.winLevel[n],10):"number"==typeof t.winLevel[n]?e.winLevel[n]=t.winLevel[n]:"object"==typeof t.winLevel[n]&&(e.winLevel[n]=new l.LongBits(t.winLevel[n].low>>>0,t.winLevel[n].high>>>0).toNumber())}return e},t.toObject=function(t,e){e||(e={});var n={};if((e.arrays||e.defaults)&&(n.winLevel=[]),e.defaults&&(n.desc=null,n.roundId="",n.self=null,n.lastScreen=null),null!=t.desc&&t.hasOwnProperty("desc")&&(n.desc=c.slot_fortune_rabbit.FortuneRabbitSlotLevelDesc.toObject(t.desc,e)),null!=t.roundId&&t.hasOwnProperty("roundId")&&(n.roundId=t.roundId),null!=t.self&&t.hasOwnProperty("self")&&(n.self=c.slot_fortune_rabbit.User.toObject(t.self,e)),null!=t.lastScreen&&t.hasOwnProperty("lastScreen")&&(n.lastScreen=c.slot_fortune_rabbit.LastScreen.toObject(t.lastScreen,e)),t.winLevel&&t.winLevel.length){n.winLevel=[];for(var i=0;i<t.winLevel.length;++i)"number"==typeof t.winLevel[i]?n.winLevel[i]=e.longs===String?String(t.winLevel[i]):t.winLevel[i]:n.winLevel[i]=e.longs===String?l.Long.prototype.toString.call(t.winLevel[i]):e.longs===Number?new l.LongBits(t.winLevel[i].low>>>0,t.winLevel[i].high>>>0).toNumber():t.winLevel[i]}return n},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t.getTypeUrl=function(t){return void 0===t&&(t="type.googleapis.com"),t+"/slot_fortune_rabbit.GameGetTableInfoResp"},t}(),o.SpinResp=function(){function t(t){if(this.hits=[],this.screen=[],t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.hits=l.emptyArray,t.prototype.screen=l.emptyArray,t.prototype.trigger=!1,t.prototype.bet=l.Long?l.Long.fromBits(0,0,!1):0,t.prototype.balance=l.Long?l.Long.fromBits(0,0,!1):0,t.prototype.totalWin=l.Long?l.Long.fromBits(0,0,!1):0,t.prototype.leftTimes=l.Long?l.Long.fromBits(0,0,!1):0,t.prototype.priseTrigger=!1,t.prototype.rabbitWin=l.Long?l.Long.fromBits(0,0,!1):0,t.prototype.isWish=!1,t.create=function(e){return new t(e)},t.encode=function(t,e){if(e||(e=s.create()),null!=t.hits&&t.hits.length)for(var n=0;n<t.hits.length;++n)c.slot_fortune_rabbit.Hit.encode(t.hits[n],e.uint32(10).fork()).ldelim();if(null!=t.screen&&t.screen.length)for(n=0;n<t.screen.length;++n)c.slot_fortune_rabbit.Symbol.encode(t.screen[n],e.uint32(18).fork()).ldelim();return null!=t.trigger&&Object.hasOwnProperty.call(t,"trigger")&&e.uint32(24).bool(t.trigger),null!=t.bet&&Object.hasOwnProperty.call(t,"bet")&&e.uint32(32).int64(t.bet),null!=t.balance&&Object.hasOwnProperty.call(t,"balance")&&e.uint32(40).int64(t.balance),null!=t.totalWin&&Object.hasOwnProperty.call(t,"totalWin")&&e.uint32(48).int64(t.totalWin),null!=t.leftTimes&&Object.hasOwnProperty.call(t,"leftTimes")&&e.uint32(56).int64(t.leftTimes),null!=t.priseTrigger&&Object.hasOwnProperty.call(t,"priseTrigger")&&e.uint32(64).bool(t.priseTrigger),null!=t.rabbitWin&&Object.hasOwnProperty.call(t,"rabbitWin")&&e.uint32(72).int64(t.rabbitWin),null!=t.isWish&&Object.hasOwnProperty.call(t,"isWish")&&e.uint32(80).bool(t.isWish),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof a||(t=a.create(t));for(var n=void 0===e?t.len:t.pos+e,i=new c.slot_fortune_rabbit.SpinResp;t.pos<n;){var o=t.uint32();switch(o>>>3){case 1:i.hits&&i.hits.length||(i.hits=[]),i.hits.push(c.slot_fortune_rabbit.Hit.decode(t,t.uint32()));break;case 2:i.screen&&i.screen.length||(i.screen=[]),i.screen.push(c.slot_fortune_rabbit.Symbol.decode(t,t.uint32()));break;case 3:i.trigger=t.bool();break;case 4:i.bet=t.int64();break;case 5:i.balance=t.int64();break;case 6:i.totalWin=t.int64();break;case 7:i.leftTimes=t.int64();break;case 8:i.priseTrigger=t.bool();break;case 9:i.rabbitWin=t.int64();break;case 10:i.isWish=t.bool();break;default:t.skipType(7&o)}}return i},t.decodeDelimited=function(t){return t instanceof a||(t=new a(t)),this.decode(t,t.uint32())},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(null!=t.hits&&t.hasOwnProperty("hits")){if(!Array.isArray(t.hits))return"hits: array expected";for(var e=0;e<t.hits.length;++e)if(n=c.slot_fortune_rabbit.Hit.verify(t.hits[e]))return"hits."+n}if(null!=t.screen&&t.hasOwnProperty("screen")){if(!Array.isArray(t.screen))return"screen: array expected";for(e=0;e<t.screen.length;++e){var n;if(n=c.slot_fortune_rabbit.Symbol.verify(t.screen[e]))return"screen."+n}}return null!=t.trigger&&t.hasOwnProperty("trigger")&&"boolean"!=typeof t.trigger?"trigger: boolean expected":null!=t.bet&&t.hasOwnProperty("bet")&&!(l.isInteger(t.bet)||t.bet&&l.isInteger(t.bet.low)&&l.isInteger(t.bet.high))?"bet: integer|Long expected":null!=t.balance&&t.hasOwnProperty("balance")&&!(l.isInteger(t.balance)||t.balance&&l.isInteger(t.balance.low)&&l.isInteger(t.balance.high))?"balance: integer|Long expected":null!=t.totalWin&&t.hasOwnProperty("totalWin")&&!(l.isInteger(t.totalWin)||t.totalWin&&l.isInteger(t.totalWin.low)&&l.isInteger(t.totalWin.high))?"totalWin: integer|Long expected":null!=t.leftTimes&&t.hasOwnProperty("leftTimes")&&!(l.isInteger(t.leftTimes)||t.leftTimes&&l.isInteger(t.leftTimes.low)&&l.isInteger(t.leftTimes.high))?"leftTimes: integer|Long expected":null!=t.priseTrigger&&t.hasOwnProperty("priseTrigger")&&"boolean"!=typeof t.priseTrigger?"priseTrigger: boolean expected":null!=t.rabbitWin&&t.hasOwnProperty("rabbitWin")&&!(l.isInteger(t.rabbitWin)||t.rabbitWin&&l.isInteger(t.rabbitWin.low)&&l.isInteger(t.rabbitWin.high))?"rabbitWin: integer|Long expected":null!=t.isWish&&t.hasOwnProperty("isWish")&&"boolean"!=typeof t.isWish?"isWish: boolean expected":null},t.fromObject=function(t){if(t instanceof c.slot_fortune_rabbit.SpinResp)return t;var e=new c.slot_fortune_rabbit.SpinResp;if(t.hits){if(!Array.isArray(t.hits))throw TypeError(".slot_fortune_rabbit.SpinResp.hits: array expected");e.hits=[];for(var n=0;n<t.hits.length;++n){if("object"!=typeof t.hits[n])throw TypeError(".slot_fortune_rabbit.SpinResp.hits: object expected");e.hits[n]=c.slot_fortune_rabbit.Hit.fromObject(t.hits[n])}}if(t.screen){if(!Array.isArray(t.screen))throw TypeError(".slot_fortune_rabbit.SpinResp.screen: array expected");for(e.screen=[],n=0;n<t.screen.length;++n){if("object"!=typeof t.screen[n])throw TypeError(".slot_fortune_rabbit.SpinResp.screen: object expected");e.screen[n]=c.slot_fortune_rabbit.Symbol.fromObject(t.screen[n])}}return null!=t.trigger&&(e.trigger=Boolean(t.trigger)),null!=t.bet&&(l.Long?(e.bet=l.Long.fromValue(t.bet)).unsigned=!1:"string"==typeof t.bet?e.bet=parseInt(t.bet,10):"number"==typeof t.bet?e.bet=t.bet:"object"==typeof t.bet&&(e.bet=new l.LongBits(t.bet.low>>>0,t.bet.high>>>0).toNumber())),null!=t.balance&&(l.Long?(e.balance=l.Long.fromValue(t.balance)).unsigned=!1:"string"==typeof t.balance?e.balance=parseInt(t.balance,10):"number"==typeof t.balance?e.balance=t.balance:"object"==typeof t.balance&&(e.balance=new l.LongBits(t.balance.low>>>0,t.balance.high>>>0).toNumber())),null!=t.totalWin&&(l.Long?(e.totalWin=l.Long.fromValue(t.totalWin)).unsigned=!1:"string"==typeof t.totalWin?e.totalWin=parseInt(t.totalWin,10):"number"==typeof t.totalWin?e.totalWin=t.totalWin:"object"==typeof t.totalWin&&(e.totalWin=new l.LongBits(t.totalWin.low>>>0,t.totalWin.high>>>0).toNumber())),null!=t.leftTimes&&(l.Long?(e.leftTimes=l.Long.fromValue(t.leftTimes)).unsigned=!1:"string"==typeof t.leftTimes?e.leftTimes=parseInt(t.leftTimes,10):"number"==typeof t.leftTimes?e.leftTimes=t.leftTimes:"object"==typeof t.leftTimes&&(e.leftTimes=new l.LongBits(t.leftTimes.low>>>0,t.leftTimes.high>>>0).toNumber())),null!=t.priseTrigger&&(e.priseTrigger=Boolean(t.priseTrigger)),null!=t.rabbitWin&&(l.Long?(e.rabbitWin=l.Long.fromValue(t.rabbitWin)).unsigned=!1:"string"==typeof t.rabbitWin?e.rabbitWin=parseInt(t.rabbitWin,10):"number"==typeof t.rabbitWin?e.rabbitWin=t.rabbitWin:"object"==typeof t.rabbitWin&&(e.rabbitWin=new l.LongBits(t.rabbitWin.low>>>0,t.rabbitWin.high>>>0).toNumber())),null!=t.isWish&&(e.isWish=Boolean(t.isWish)),e},t.toObject=function(t,e){e||(e={});var n={};if((e.arrays||e.defaults)&&(n.hits=[],n.screen=[]),e.defaults){if(n.trigger=!1,l.Long){var i=new l.Long(0,0,!1);n.bet=e.longs===String?i.toString():e.longs===Number?i.toNumber():i}else n.bet=e.longs===String?"0":0;l.Long?(i=new l.Long(0,0,!1),n.balance=e.longs===String?i.toString():e.longs===Number?i.toNumber():i):n.balance=e.longs===String?"0":0,l.Long?(i=new l.Long(0,0,!1),n.totalWin=e.longs===String?i.toString():e.longs===Number?i.toNumber():i):n.totalWin=e.longs===String?"0":0,l.Long?(i=new l.Long(0,0,!1),n.leftTimes=e.longs===String?i.toString():e.longs===Number?i.toNumber():i):n.leftTimes=e.longs===String?"0":0,n.priseTrigger=!1,l.Long?(i=new l.Long(0,0,!1),n.rabbitWin=e.longs===String?i.toString():e.longs===Number?i.toNumber():i):n.rabbitWin=e.longs===String?"0":0,n.isWish=!1}if(t.hits&&t.hits.length){n.hits=[];for(var o=0;o<t.hits.length;++o)n.hits[o]=c.slot_fortune_rabbit.Hit.toObject(t.hits[o],e)}if(t.screen&&t.screen.length)for(n.screen=[],o=0;o<t.screen.length;++o)n.screen[o]=c.slot_fortune_rabbit.Symbol.toObject(t.screen[o],e);return null!=t.trigger&&t.hasOwnProperty("trigger")&&(n.trigger=t.trigger),null!=t.bet&&t.hasOwnProperty("bet")&&("number"==typeof t.bet?n.bet=e.longs===String?String(t.bet):t.bet:n.bet=e.longs===String?l.Long.prototype.toString.call(t.bet):e.longs===Number?new l.LongBits(t.bet.low>>>0,t.bet.high>>>0).toNumber():t.bet),null!=t.balance&&t.hasOwnProperty("balance")&&("number"==typeof t.balance?n.balance=e.longs===String?String(t.balance):t.balance:n.balance=e.longs===String?l.Long.prototype.toString.call(t.balance):e.longs===Number?new l.LongBits(t.balance.low>>>0,t.balance.high>>>0).toNumber():t.balance),null!=t.totalWin&&t.hasOwnProperty("totalWin")&&("number"==typeof t.totalWin?n.totalWin=e.longs===String?String(t.totalWin):t.totalWin:n.totalWin=e.longs===String?l.Long.prototype.toString.call(t.totalWin):e.longs===Number?new l.LongBits(t.totalWin.low>>>0,t.totalWin.high>>>0).toNumber():t.totalWin),null!=t.leftTimes&&t.hasOwnProperty("leftTimes")&&("number"==typeof t.leftTimes?n.leftTimes=e.longs===String?String(t.leftTimes):t.leftTimes:n.leftTimes=e.longs===String?l.Long.prototype.toString.call(t.leftTimes):e.longs===Number?new l.LongBits(t.leftTimes.low>>>0,t.leftTimes.high>>>0).toNumber():t.leftTimes),null!=t.priseTrigger&&t.hasOwnProperty("priseTrigger")&&(n.priseTrigger=t.priseTrigger),null!=t.rabbitWin&&t.hasOwnProperty("rabbitWin")&&("number"==typeof t.rabbitWin?n.rabbitWin=e.longs===String?String(t.rabbitWin):t.rabbitWin:n.rabbitWin=e.longs===String?l.Long.prototype.toString.call(t.rabbitWin):e.longs===Number?new l.LongBits(t.rabbitWin.low>>>0,t.rabbitWin.high>>>0).toNumber():t.rabbitWin),null!=t.isWish&&t.hasOwnProperty("isWish")&&(n.isWish=t.isWish),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t.getTypeUrl=function(t){return void 0===t&&(t="type.googleapis.com"),t+"/slot_fortune_rabbit.SpinResp"},t}(),o.GameGetTableEmptyResp=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.create=function(e){return new t(e)},t.encode=function(t,e){return e||(e=s.create()),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof a||(t=a.create(t));for(var n=void 0===e?t.len:t.pos+e,i=new c.slot_fortune_rabbit.GameGetTableEmptyResp;t.pos<n;){var o=t.uint32();t.skipType(7&o)}return i},t.decodeDelimited=function(t){return t instanceof a||(t=new a(t)),this.decode(t,t.uint32())},t.verify=function(t){return"object"!=typeof t||null===t?"object expected":null},t.fromObject=function(t){return t instanceof c.slot_fortune_rabbit.GameGetTableEmptyResp?t:new c.slot_fortune_rabbit.GameGetTableEmptyResp},t.toObject=function(){return{}},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t.getTypeUrl=function(t){return void 0===t&&(t="type.googleapis.com"),t+"/slot_fortune_rabbit.GameGetTableEmptyResp"},t}(),o.GameEnterReq=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.create=function(e){return new t(e)},t.encode=function(t,e){return e||(e=s.create()),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof a||(t=a.create(t));for(var n=void 0===e?t.len:t.pos+e,i=new c.slot_fortune_rabbit.GameEnterReq;t.pos<n;){var o=t.uint32();t.skipType(7&o)}return i},t.decodeDelimited=function(t){return t instanceof a||(t=new a(t)),this.decode(t,t.uint32())},t.verify=function(t){return"object"!=typeof t||null===t?"object expected":null},t.fromObject=function(t){return t instanceof c.slot_fortune_rabbit.GameEnterReq?t:new c.slot_fortune_rabbit.GameEnterReq},t.toObject=function(){return{}},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t.getTypeUrl=function(t){return void 0===t&&(t="type.googleapis.com"),t+"/slot_fortune_rabbit.GameEnterReq"},t}(),o.GameEnterResp=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.create=function(e){return new t(e)},t.encode=function(t,e){return e||(e=s.create()),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof a||(t=a.create(t));for(var n=void 0===e?t.len:t.pos+e,i=new c.slot_fortune_rabbit.GameEnterResp;t.pos<n;){var o=t.uint32();t.skipType(7&o)}return i},t.decodeDelimited=function(t){return t instanceof a||(t=new a(t)),this.decode(t,t.uint32())},t.verify=function(t){return"object"!=typeof t||null===t?"object expected":null},t.fromObject=function(t){return t instanceof c.slot_fortune_rabbit.GameEnterResp?t:new c.slot_fortune_rabbit.GameEnterResp},t.toObject=function(){return{}},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t.getTypeUrl=function(t){return void 0===t&&(t="type.googleapis.com"),t+"/slot_fortune_rabbit.GameEnterResp"},t}(),o.GameSpinReq=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.amount=l.Long?l.Long.fromBits(0,0,!1):0,t.prototype.mode=!1,t.prototype.betSize=l.Long?l.Long.fromBits(0,0,!1):0,t.prototype.betMultiple=l.Long?l.Long.fromBits(0,0,!1):0,t.create=function(e){return new t(e)},t.encode=function(t,e){return e||(e=s.create()),null!=t.amount&&Object.hasOwnProperty.call(t,"amount")&&e.uint32(8).int64(t.amount),null!=t.mode&&Object.hasOwnProperty.call(t,"mode")&&e.uint32(16).bool(t.mode),null!=t.betSize&&Object.hasOwnProperty.call(t,"betSize")&&e.uint32(24).int64(t.betSize),null!=t.betMultiple&&Object.hasOwnProperty.call(t,"betMultiple")&&e.uint32(32).int64(t.betMultiple),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof a||(t=a.create(t));for(var n=void 0===e?t.len:t.pos+e,i=new c.slot_fortune_rabbit.GameSpinReq;t.pos<n;){var o=t.uint32();switch(o>>>3){case 1:i.amount=t.int64();break;case 2:i.mode=t.bool();break;case 3:i.betSize=t.int64();break;case 4:i.betMultiple=t.int64();break;default:t.skipType(7&o)}}return i},t.decodeDelimited=function(t){return t instanceof a||(t=new a(t)),this.decode(t,t.uint32())},t.verify=function(t){return"object"!=typeof t||null===t?"object expected":null!=t.amount&&t.hasOwnProperty("amount")&&!(l.isInteger(t.amount)||t.amount&&l.isInteger(t.amount.low)&&l.isInteger(t.amount.high))?"amount: integer|Long expected":null!=t.mode&&t.hasOwnProperty("mode")&&"boolean"!=typeof t.mode?"mode: boolean expected":null!=t.betSize&&t.hasOwnProperty("betSize")&&!(l.isInteger(t.betSize)||t.betSize&&l.isInteger(t.betSize.low)&&l.isInteger(t.betSize.high))?"betSize: integer|Long expected":null!=t.betMultiple&&t.hasOwnProperty("betMultiple")&&!(l.isInteger(t.betMultiple)||t.betMultiple&&l.isInteger(t.betMultiple.low)&&l.isInteger(t.betMultiple.high))?"betMultiple: integer|Long expected":null},t.fromObject=function(t){if(t instanceof c.slot_fortune_rabbit.GameSpinReq)return t;var e=new c.slot_fortune_rabbit.GameSpinReq;return null!=t.amount&&(l.Long?(e.amount=l.Long.fromValue(t.amount)).unsigned=!1:"string"==typeof t.amount?e.amount=parseInt(t.amount,10):"number"==typeof t.amount?e.amount=t.amount:"object"==typeof t.amount&&(e.amount=new l.LongBits(t.amount.low>>>0,t.amount.high>>>0).toNumber())),null!=t.mode&&(e.mode=Boolean(t.mode)),null!=t.betSize&&(l.Long?(e.betSize=l.Long.fromValue(t.betSize)).unsigned=!1:"string"==typeof t.betSize?e.betSize=parseInt(t.betSize,10):"number"==typeof t.betSize?e.betSize=t.betSize:"object"==typeof t.betSize&&(e.betSize=new l.LongBits(t.betSize.low>>>0,t.betSize.high>>>0).toNumber())),null!=t.betMultiple&&(l.Long?(e.betMultiple=l.Long.fromValue(t.betMultiple)).unsigned=!1:"string"==typeof t.betMultiple?e.betMultiple=parseInt(t.betMultiple,10):"number"==typeof t.betMultiple?e.betMultiple=t.betMultiple:"object"==typeof t.betMultiple&&(e.betMultiple=new l.LongBits(t.betMultiple.low>>>0,t.betMultiple.high>>>0).toNumber())),e},t.toObject=function(t,e){e||(e={});var n={};if(e.defaults){if(l.Long){var i=new l.Long(0,0,!1);n.amount=e.longs===String?i.toString():e.longs===Number?i.toNumber():i}else n.amount=e.longs===String?"0":0;n.mode=!1,l.Long?(i=new l.Long(0,0,!1),n.betSize=e.longs===String?i.toString():e.longs===Number?i.toNumber():i):n.betSize=e.longs===String?"0":0,l.Long?(i=new l.Long(0,0,!1),n.betMultiple=e.longs===String?i.toString():e.longs===Number?i.toNumber():i):n.betMultiple=e.longs===String?"0":0}return null!=t.amount&&t.hasOwnProperty("amount")&&("number"==typeof t.amount?n.amount=e.longs===String?String(t.amount):t.amount:n.amount=e.longs===String?l.Long.prototype.toString.call(t.amount):e.longs===Number?new l.LongBits(t.amount.low>>>0,t.amount.high>>>0).toNumber():t.amount),null!=t.mode&&t.hasOwnProperty("mode")&&(n.mode=t.mode),null!=t.betSize&&t.hasOwnProperty("betSize")&&("number"==typeof t.betSize?n.betSize=e.longs===String?String(t.betSize):t.betSize:n.betSize=e.longs===String?l.Long.prototype.toString.call(t.betSize):e.longs===Number?new l.LongBits(t.betSize.low>>>0,t.betSize.high>>>0).toNumber():t.betSize),null!=t.betMultiple&&t.hasOwnProperty("betMultiple")&&("number"==typeof t.betMultiple?n.betMultiple=e.longs===String?String(t.betMultiple):t.betMultiple:n.betMultiple=e.longs===String?l.Long.prototype.toString.call(t.betMultiple):e.longs===Number?new l.LongBits(t.betMultiple.low>>>0,t.betMultiple.high>>>0).toNumber():t.betMultiple),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t.getTypeUrl=function(t){return void 0===t&&(t="type.googleapis.com"),t+"/slot_fortune_rabbit.GameSpinReq"},t}(),o.GameGetConfigReq=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.create=function(e){return new t(e)},t.encode=function(t,e){return e||(e=s.create()),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof a||(t=a.create(t));for(var n=void 0===e?t.len:t.pos+e,i=new c.slot_fortune_rabbit.GameGetConfigReq;t.pos<n;){var o=t.uint32();t.skipType(7&o)}return i},t.decodeDelimited=function(t){return t instanceof a||(t=new a(t)),this.decode(t,t.uint32())},t.verify=function(t){return"object"!=typeof t||null===t?"object expected":null},t.fromObject=function(t){return t instanceof c.slot_fortune_rabbit.GameGetConfigReq?t:new c.slot_fortune_rabbit.GameGetConfigReq},t.toObject=function(){return{}},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t.getTypeUrl=function(t){return void 0===t&&(t="type.googleapis.com"),t+"/slot_fortune_rabbit.GameGetConfigReq"},t}(),o.GameConfigResp=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.config="",t.create=function(e){return new t(e)},t.encode=function(t,e){return e||(e=s.create()),null!=t.config&&Object.hasOwnProperty.call(t,"config")&&e.uint32(10).string(t.config),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof a||(t=a.create(t));for(var n=void 0===e?t.len:t.pos+e,i=new c.slot_fortune_rabbit.GameConfigResp;t.pos<n;){var o=t.uint32();switch(o>>>3){case 1:i.config=t.string();break;default:t.skipType(7&o)}}return i},t.decodeDelimited=function(t){return t instanceof a||(t=new a(t)),this.decode(t,t.uint32())},t.verify=function(t){return"object"!=typeof t||null===t?"object expected":null!=t.config&&t.hasOwnProperty("config")&&!l.isString(t.config)?"config: string expected":null},t.fromObject=function(t){if(t instanceof c.slot_fortune_rabbit.GameConfigResp)return t;var e=new c.slot_fortune_rabbit.GameConfigResp;return null!=t.config&&(e.config=String(t.config)),e},t.toObject=function(t,e){e||(e={});var n={};return e.defaults&&(n.config=""),null!=t.config&&t.hasOwnProperty("config")&&(n.config=t.config),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t.getTypeUrl=function(t){return void 0===t&&(t="type.googleapis.com"),t+"/slot_fortune_rabbit.GameConfigResp"},t}(),o),e.exports=c,cc._RF.pop()},{}]},{},["BigWinEmitter","Game1810Scroll","RuleView","TestScroll","fortune-rabbit-anim","fortune-rabbit-award-layer","fortune-rabbit-cell-item","fortune-rabbit-coins","fortune-rabbit-logic","fortune-rabbit-res","fortune-rabbit-sender","fortune-rabbit-table","fortune-rabbit-view","fortune-rabbit-win-node","fortune-rabbittable-launch","slot_fortune_rabbit"]);